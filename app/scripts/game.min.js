"use strict";

var trConfig = {

    debug: true

};
"use strict";

var toot = {
    //gravity: (300 * 0.27),
    gravity: 300,
    fartStrength: 250,
    currentDistance: 0,

    soundsEnabled: false,

    // namespacing
    character: {},
    environment: {},
    obstacle: {},
    ui: {}
};

var run = function run() {
    var game = new Game();
    game.start();
};
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var CharPlayer = function CharPlayer() {
    _classCallCheck(this, CharPlayer);

    console.log('created a new player instance!');
};
"use strict";
/**
 * ScreenBoot
 *
 * This is the logo/loading screen that shows when the game starts up.
 *      - Show company logo
 *      - Load game assets (graphics, sounds, etc...)
 *      - Show loading progress
 *      - Set mood for game
 *
 */
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var ScreenBoot = (function () {
    function ScreenBoot() {
        _classCallCheck(this, ScreenBoot);
    }

    _createClass(ScreenBoot, [{
        key: 'preload',
        value: function preload(game) {
            this.startTime = moment();
            this.isLoaded = false;
            this.minTime = moment().add(ScreenBoot.MIN_BOOT_TIME, 'seconds');

            console.log('ScreenBoot.preload');
        }
    }, {
        key: 'create',
        value: function create(game) {
            var loadTime = moment();
            var duration = moment.utc(loadTime.diff(this.startTime));
            console.log('ScreenBoot assets loaded in ' + duration.format('HH:mm:ss:SSS'));
            this.isLoaded = true;

            var x = game.world.centerX;
            var y = game.world.centerY;
            var msg = 'morphzero';
            var text = game.add.text(x, y, msg, {
                font: '32px Arial',
                fill: '#ddddd9',
                align: 'center'
            });
            text.anchor.setTo(0.5, 0.5);
        }
    }, {
        key: 'update',
        value: function update(game) {
            var now = moment();
            if (this.isLoaded && now.isAfter(this.minTime)) {
                game.state.start('menu');
            }
        }
    }]);

    return ScreenBoot;
})();

ScreenBoot.MIN_BOOT_TIME = 1.5; // seconds
/**
 * ScreenMenu
 *
 * This is the menu screen. Options for:
 *      - Starting a game
 *      - About/Credits page
 *      - Settings page?
 *
 */
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var ScreenMenu = (function () {
    function ScreenMenu() {
        _classCallCheck(this, ScreenMenu);
    }

    _createClass(ScreenMenu, [{
        key: 'preload',
        value: function preload(game) {
            console.log('ScreenMenu.preload start...');
            this.startTime = moment();
            this.isLoaded = false;

            var preloader = new UtilPreloader();
            preloader.preload(game);
        }
    }, {
        key: 'create',
        value: function create(game) {
            var loadTime = moment();
            var duration = moment.utc(loadTime.diff(this.startTime));
            console.log('ScreenMenu assets loaded in ' + duration.format('HH:mm:ss:SSS'));
            this.isLoaded = true;

            var x = game.world.centerX;
            var y = game.world.centerY;
            var msg = 'play';
            var text = game.add.text(x, y, msg, {
                font: '32px Arial',
                fill: '#ddddd9',
                align: 'center'
            });
            text.anchor.setTo(0.5, 0.5);

            game.input.onDown.addOnce(function () {
                game.state.start('play');
            }, this);
        }
    }, {
        key: 'update',
        value: function update(game) {}
    }]);

    return ScreenMenu;
})();
/**
 * ScreenPlay
 *
 * This is the main play/game screen.
 *
 */
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var ScreenPlay = (function () {
    function ScreenPlay() {
        _classCallCheck(this, ScreenPlay);
    }

    _createClass(ScreenPlay, [{
        key: 'preload',
        value: function preload(game) {}
    }, {
        key: 'create',
        value: function create(game) {
            console.log('ScreenPlay.create');

            if (trConfig.debug) {
                this.stats = new Stats();
                document.body.appendChild(this.stats.domElement);
                this.stats.domElement.style.position = 'absolute';
                this.stats.domElement.style.top = '0px';
            }
        }
    }, {
        key: 'update',
        value: function update(game) {

            if (trConfig.debug) {
                this.stats.begin();
            }

            if (trConfig.debug) {
                this.stats.end();
            }
        }
    }]);

    return ScreenPlay;
})();

// preload assets in UtilPreloader
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Game = (function () {
    function Game() {
        _classCallCheck(this, Game);

        console.log('-- -- -- --   Toot Rippington - Blasts Off!   -- -- -- --');

        var pGame = new Phaser.Game(1334, 750, Phaser.AUTO, '');

        pGame.state.add('boot', new ScreenBoot());
        pGame.state.add('menu', new ScreenMenu());
        pGame.state.add('play', new ScreenPlay());

        this.pGame = pGame;
    }

    _createClass(Game, [{
        key: 'start',
        value: function start() {
            this.pGame.state.start('boot');
        }
    }]);

    return Game;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var UtilPreloader = (function () {
    function UtilPreloader() {
        _classCallCheck(this, UtilPreloader);
    }

    _createClass(UtilPreloader, [{
        key: 'preload',
        value: function preload(game) {
            this.loadSprites(game);
            this.loadSpriteSheets(game);
            this.loadAudio(game);
        }
    }, {
        key: 'loadSprites',

        // Asset Loading...
        value: function loadSprites(game) {
            // background
            game.load.image('bg-space', 'images/bg-space.jpg');
            game.load.image('bg-stars-small', 'images/bg-stars-small.png');
            game.load.image('bg-stars-dense', 'images/bg-stars-small-dense.png');
            game.load.image('bg-stars-large', 'images/bg-stars-large.png');
            game.load.image('bg-horizon', 'images/bg-horizon-gradient.png');
            game.load.image('bg-mountains-01', 'images/bg-mountains-01.png');
            game.load.image('bg-mountains-02', 'images/bg-mountains-02.png');
            // ground
            game.load.image('ground', 'images/ground.jpg');
            game.load.image('vignette', 'images/vignette.png');
        }
    }, {
        key: 'loadSpriteSheets',
        value: function loadSpriteSheets(game) {
            // player
            game.load.spritesheet('player.toot', 'images/toot-spritesheet.png', 64, 96);
            game.load.spritesheet('player.blast', 'images/blast-spritesheet.png', 60, 63);
            // Obstacles
            game.load.spritesheet('obs.saucer', 'images/saucer-spritesheet.png', 276, 100);
            game.load.spritesheet('obs.probe', 'images/probe-spritesheet.png', 128, 107);
        }
    }, {
        key: 'loadAudio',
        value: function loadAudio(game) {
            game.load.audio('player.fart', 'sounds/fart-02.wav');
            game.load.audio('obs.saucer.ufo', 'sounds/ufo-01.wav');
        }
    }]);

    return UtilPreloader;
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy5qcyIsIm1haW4uanMiLCJjaGFyYWN0ZXIvcGxheWVyLmpzIiwiZW52aXJvbm1lbnQvYmFja2dyb3VuZC5qcyIsInNjcmVlbi9ib290LmpzIiwic2NyZWVuL21lbnUuanMiLCJzY3JlZW4vcGxheS5qcyIsInV0aWwvZ2FtZS5qcyIsInV0aWwvcHJlbG9hZGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxRQUFRLEdBQUc7O0FBRVgsU0FBSyxFQUFFLElBQUk7O0NBRWQsQ0FBQzs7O0FDSkYsSUFBSSxJQUFJLEdBQUc7O0FBRVAsV0FBTyxFQUFFLEdBQUc7QUFDWixnQkFBWSxFQUFFLEdBQUc7QUFDakIsbUJBQWUsRUFBRSxDQUFDOztBQUVsQixpQkFBYSxFQUFFLEtBQUs7OztBQUdwQixhQUFTLEVBQUUsRUFBRTtBQUNiLGVBQVcsRUFBRSxFQUFFO0FBQ2YsWUFBUSxFQUFFLEVBQUU7QUFDWixNQUFFLEVBQUUsRUFBRTtDQUNULENBQUM7O0FBRUYsSUFBSSxHQUFHLEdBQUcsU0FBTixHQUFHLEdBQWM7QUFDakIsUUFBSSxJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUN0QixRQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7Q0FDaEIsQ0FBQzs7Ozs7SUNqQkksVUFBVSxHQUVELFNBRlQsVUFBVSxHQUVFOzBCQUZaLFVBQVU7O0FBR1IsV0FBTyxDQUFDLEdBQUcsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO0NBQ2pEO0FDTEw7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDVU0sVUFBVTthQUFWLFVBQVU7OEJBQVYsVUFBVTs7O2lCQUFWLFVBQVU7O2VBRUwsaUJBQUMsSUFBSSxFQUFFO0FBQ1YsZ0JBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxFQUFFLENBQUM7QUFDMUIsZ0JBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO0FBQ3RCLGdCQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENB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QUNaLGdCQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLEVBQUUsb0JBQW9CLENBQUMsQ0FBQztBQUNyRCxnQkFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztTQUMxRDs7O1dBeENDLGFBQWEiLCJmaWxlIjoiZ2FtZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdHJDb25maWcgPSB7XG5cbiAgICBkZWJ1ZzogdHJ1ZVxuXG59O1xuIiwidmFyIHRvb3QgPSB7XG4gICAgLy9ncmF2aXR5OiAoMzAwICogMC4yNyksXG4gICAgZ3Jhdml0eTogMzAwLFxuICAgIGZhcnRTdHJlbmd0aDogMjUwLFxuICAgIGN1cnJlbnREaXN0YW5jZTogMCxcblxuICAgIHNvdW5kc0VuYWJsZWQ6IGZhbHNlLFxuXG4gICAgLy8gbmFtZXNwYWNpbmdcbiAgICBjaGFyYWN0ZXI6IHt9LFxuICAgIGVudmlyb25tZW50OiB7fSxcbiAgICBvYnN0YWNsZToge30sXG4gICAgdWk6IHt9XG59O1xuXG52YXIgcnVuID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGdhbWUgPSBuZXcgR2FtZSgpO1xuICAgIGdhbWUuc3RhcnQoKTtcbn07XG4iLCJcbmNsYXNzIENoYXJQbGF5ZXIge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGVkIGEgbmV3IHBsYXllciBpbnN0YW5jZSEnKTtcbiAgICB9XG59XG4iLCIiLCIvKipcbiAqIFNjcmVlbkJvb3RcbiAqXG4gKiBUaGlzIGlzIHRoZSBsb2dvL2xvYWRpbmcgc2NyZWVuIHRoYXQgc2hvd3Mgd2hlbiB0aGUgZ2FtZSBzdGFydHMgdXAuXG4gKiAgICAgIC0gU2hvdyBjb21wYW55IGxvZ29cbiAqICAgICAgLSBMb2FkIGdhbWUgYXNzZXRzIChncmFwaGljcywgc291bmRzLCBldGMuLi4pXG4gKiAgICAgIC0gU2hvdyBsb2FkaW5nIHByb2dyZXNzXG4gKiAgICAgIC0gU2V0IG1vb2QgZm9yIGdhbWVcbiAqXG4gKi9cbmNsYXNzIFNjcmVlbkJvb3Qge1xuXG4gICAgcHJlbG9hZChnYW1lKSB7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gbW9tZW50KCk7XG4gICAgICAgIHRoaXMuaXNMb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5taW5UaW1lID0gbW9tZW50KCkuYWRkKFNjcmVlbkJvb3QuTUlOX0JPT1RfVElNRSwgJ3NlY29uZHMnKTtcblxuICAgICAgICBjb25zb2xlLmxvZygnU2NyZWVuQm9vdC5wcmVsb2FkJyk7XG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcbiAgICAgICAgdmFyIGxvYWRUaW1lID0gbW9tZW50KCk7XG4gICAgICAgIHZhciBkdXJhdGlvbiA9IG1vbWVudC51dGMobG9hZFRpbWUuZGlmZih0aGlzLnN0YXJ0VGltZSkpO1xuICAgICAgICBjb25zb2xlLmxvZygnU2NyZWVuQm9vdCBhc3NldHMgbG9hZGVkIGluICcgKyBkdXJhdGlvbi5mb3JtYXQoJ0hIOm1tOnNzOlNTUycpKTtcbiAgICAgICAgdGhpcy5pc0xvYWRlZCA9IHRydWU7XG5cbiAgICAgICAgdmFyIHggPSBnYW1lLndvcmxkLmNlbnRlclg7XG4gICAgICAgIHZhciB5ID0gZ2FtZS53b3JsZC5jZW50ZXJZO1xuICAgICAgICB2YXIgbXNnID0gXCJtb3JwaHplcm9cIlxuICAgICAgICB2YXIgdGV4dCA9IGdhbWUuYWRkLnRleHQoeCwgeSwgbXNnLCB7XG4gICAgICAgICAgICBmb250OiBcIjMycHggQXJpYWxcIixcbiAgICAgICAgICAgIGZpbGw6IFwiI2RkZGRkOVwiLFxuICAgICAgICAgICAgYWxpZ246IFwiY2VudGVyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRleHQuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcbiAgICB9XG5cbiAgICB1cGRhdGUoZ2FtZSkge1xuICAgICAgICB2YXIgbm93ID0gbW9tZW50KCk7XG4gICAgICAgIGlmICh0aGlzLmlzTG9hZGVkICYmIG5vdy5pc0FmdGVyKHRoaXMubWluVGltZSkpIHtcbiAgICAgICAgICAgIGdhbWUuc3RhdGUuc3RhcnQoJ21lbnUnKTtcbiAgICAgICAgfVxuICAgIH1cblxufVxuXG5TY3JlZW5Cb290Lk1JTl9CT09UX1RJTUUgPSAxLjU7IC8vIHNlY29uZHNcbiIsIi8qKlxuICogU2NyZWVuTWVudVxuICpcbiAqIFRoaXMgaXMgdGhlIG1lbnUgc2NyZWVuLiBPcHRpb25zIGZvcjpcbiAqICAgICAgLSBTdGFydGluZyBhIGdhbWVcbiAqICAgICAgLSBBYm91dC9DcmVkaXRzIHBhZ2VcbiAqICAgICAgLSBTZXR0aW5ncyBwYWdlP1xuICpcbiAqL1xuY2xhc3MgU2NyZWVuTWVudSB7XG5cbiAgICBwcmVsb2FkKGdhbWUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1NjcmVlbk1lbnUucHJlbG9hZCBzdGFydC4uLicpO1xuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IG1vbWVudCgpO1xuICAgICAgICB0aGlzLmlzTG9hZGVkID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIHByZWxvYWRlciA9IG5ldyBVdGlsUHJlbG9hZGVyKCk7XG4gICAgICAgIHByZWxvYWRlci5wcmVsb2FkKGdhbWUpO1xuICAgIH1cblxuICAgIGNyZWF0ZShnYW1lKSB7XG4gICAgICAgIHZhciBsb2FkVGltZSA9IG1vbWVudCgpO1xuICAgICAgICB2YXIgZHVyYXRpb24gPSBtb21lbnQudXRjKGxvYWRUaW1lLmRpZmYodGhpcy5zdGFydFRpbWUpKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1NjcmVlbk1lbnUgYXNzZXRzIGxvYWRlZCBpbiAnICsgZHVyYXRpb24uZm9ybWF0KCdISDptbTpzczpTU1MnKSk7XG4gICAgICAgIHRoaXMuaXNMb2FkZWQgPSB0cnVlO1xuXG4gICAgICAgIHZhciB4ID0gZ2FtZS53b3JsZC5jZW50ZXJYO1xuICAgICAgICB2YXIgeSA9IGdhbWUud29ybGQuY2VudGVyWTtcbiAgICAgICAgdmFyIG1zZyA9IFwicGxheVwiXG4gICAgICAgIHZhciB0ZXh0ID0gZ2FtZS5hZGQudGV4dCh4LCB5LCBtc2csIHtcbiAgICAgICAgICAgIGZvbnQ6IFwiMzJweCBBcmlhbFwiLFxuICAgICAgICAgICAgZmlsbDogXCIjZGRkZGQ5XCIsXG4gICAgICAgICAgICBhbGlnbjogXCJjZW50ZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgdGV4dC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuXG4gICAgICAgIGdhbWUuaW5wdXQub25Eb3duLmFkZE9uY2UoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBnYW1lLnN0YXRlLnN0YXJ0KCdwbGF5Jyk7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgIH1cblxuICAgIHVwZGF0ZShnYW1lKSB7XG5cbiAgICB9XG5cbn1cbiIsIi8qKlxuICogU2NyZWVuUGxheVxuICpcbiAqIFRoaXMgaXMgdGhlIG1haW4gcGxheS9nYW1lIHNjcmVlbi5cbiAqXG4gKi9cbmNsYXNzIFNjcmVlblBsYXkge1xuXG4gICAgcHJlbG9hZChnYW1lKSB7XG4gICAgICAgIC8vIHByZWxvYWQgYXNzZXRzIGluIFV0aWxQcmVsb2FkZXJcbiAgICB9XG5cbiAgICBjcmVhdGUoZ2FtZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnU2NyZWVuUGxheS5jcmVhdGUnKTtcblxuICAgICAgICBpZiAodHJDb25maWcuZGVidWcpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHMgPSBuZXcgU3RhdHMoKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5zdGF0cy5kb21FbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMuc3RhdHMuZG9tRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICB0aGlzLnN0YXRzLmRvbUVsZW1lbnQuc3R5bGUudG9wID0gJzBweCc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGUoZ2FtZSkge1xuXG4gICAgICAgIGlmICh0ckNvbmZpZy5kZWJ1Zykge1xuICAgICAgICAgICAgdGhpcy5zdGF0cy5iZWdpbigpO1xuICAgICAgICB9XG5cblxuICAgICAgICBpZiAodHJDb25maWcuZGVidWcpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHMuZW5kKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cbiIsIlxuY2xhc3MgR2FtZSB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcblxuICAgICAgICBjb25zb2xlLmxvZygnLS0gLS0gLS0gLS0gICBUb290IFJpcHBpbmd0b24gLSBCbGFzdHMgT2ZmISAgIC0tIC0tIC0tIC0tJyk7XG5cbiAgICAgICAgdmFyIHBHYW1lID0gbmV3IFBoYXNlci5HYW1lKFxuICAgICAgICAgICAgMTMzNCwgNzUwLFxuICAgICAgICAgICAgUGhhc2VyLkFVVE8sXG4gICAgICAgICAgICAnJ1xuICAgICAgICApO1xuXG4gICAgICAgIHBHYW1lLnN0YXRlLmFkZCgnYm9vdCcsIG5ldyBTY3JlZW5Cb290KCkpO1xuICAgICAgICBwR2FtZS5zdGF0ZS5hZGQoJ21lbnUnLCBuZXcgU2NyZWVuTWVudSgpKTtcbiAgICAgICAgcEdhbWUuc3RhdGUuYWRkKCdwbGF5JywgbmV3IFNjcmVlblBsYXkoKSk7XG5cbiAgICAgICAgdGhpcy5wR2FtZSA9IHBHYW1lO1xuICAgIH1cblxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnBHYW1lLnN0YXRlLnN0YXJ0KCdib290Jyk7XG4gICAgfVxufVxuIiwiY2xhc3MgVXRpbFByZWxvYWRlciB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcblxuICAgIH1cblxuICAgIHByZWxvYWQoZ2FtZSkge1xuICAgICAgICB0aGlzLmxvYWRTcHJpdGVzKGdhbWUpO1xuICAgICAgICB0aGlzLmxvYWRTcHJpdGVTaGVldHMoZ2FtZSk7XG4gICAgICAgIHRoaXMubG9hZEF1ZGlvKGdhbWUpO1xuICAgIH1cblxuICAgIC8vIEFzc2V0IExvYWRpbmcuLi5cbiAgICBsb2FkU3ByaXRlcyhnYW1lKSB7XG4gICAgICAgIC8vIGJhY2tncm91bmRcbiAgICAgICAgZ2FtZS5sb2FkLmltYWdlKCdiZy1zcGFjZScsICdpbWFnZXMvYmctc3BhY2UuanBnJyk7XG4gICAgICAgIGdhbWUubG9hZC5pbWFnZSgnYmctc3RhcnMtc21hbGwnLCAnaW1hZ2VzL2JnLXN0YXJzLXNtYWxsLnBuZycpO1xuICAgICAgICBnYW1lLmxvYWQuaW1hZ2UoJ2JnLXN0YXJzLWRlbnNlJywgJ2ltYWdlcy9iZy1zdGFycy1zbWFsbC1kZW5zZS5wbmcnKTtcbiAgICAgICAgZ2FtZS5sb2FkLmltYWdlKCdiZy1zdGFycy1sYXJnZScsICdpbWFnZXMvYmctc3RhcnMtbGFyZ2UucG5nJyk7XG4gICAgICAgIGdhbWUubG9hZC5pbWFnZSgnYmctaG9yaXpvbicsICdpbWFnZXMvYmctaG9yaXpvbi1ncmFkaWVudC5wbmcnKTtcbiAgICAgICAgZ2FtZS5sb2FkLmltYWdlKCdiZy1tb3VudGFpbnMtMDEnLCAnaW1hZ2VzL2JnLW1vdW50YWlucy0wMS5wbmcnKTtcbiAgICAgICAgZ2FtZS5sb2FkLmltYWdlKCdiZy1tb3VudGFpbnMtMDInLCAnaW1hZ2VzL2JnLW1vdW50YWlucy0wMi5wbmcnKTtcbiAgICAgICAgLy8gZ3JvdW5kXG4gICAgICAgIGdhbWUubG9hZC5pbWFnZSgnZ3JvdW5kJywgJ2ltYWdlcy9ncm91bmQuanBnJyk7XG4gICAgICAgIGdhbWUubG9hZC5pbWFnZSgndmlnbmV0dGUnLCAnaW1hZ2VzL3ZpZ25ldHRlLnBuZycpO1xuICAgIH1cblxuICAgIGxvYWRTcHJpdGVTaGVldHMoZ2FtZSkge1xuICAgICAgICAvLyBwbGF5ZXJcbiAgICAgICAgZ2FtZS5sb2FkLnNwcml0ZXNoZWV0KCdwbGF5ZXIudG9vdCcsICdpbWFnZXMvdG9vdC1zcHJpdGVzaGVldC5wbmcnLCA2NCwgOTYpO1xuICAgICAgICBnYW1lLmxvYWQuc3ByaXRlc2hlZXQoJ3BsYXllci5ibGFzdCcsICdpbWFnZXMvYmxhc3Qtc3ByaXRlc2hlZXQucG5nJywgNjAsIDYzKTtcbiAgICAgICAgLy8gT2JzdGFjbGVzXG4gICAgICAgIGdhbWUubG9hZC5zcHJpdGVzaGVldCgnb2JzLnNhdWNlcicsICdpbWFnZXMvc2F1Y2VyLXNwcml0ZXNoZWV0LnBuZycsIDI3NiwgMTAwKTtcbiAgICAgICAgZ2FtZS5sb2FkLnNwcml0ZXNoZWV0KCdvYnMucHJvYmUnLCAnaW1hZ2VzL3Byb2JlLXNwcml0ZXNoZWV0LnBuZycsIDEyOCwgMTA3KTtcblxuICAgIH1cblxuICAgIGxvYWRBdWRpbyhnYW1lKSB7XG4gICAgICAgIGdhbWUubG9hZC5hdWRpbygncGxheWVyLmZhcnQnLCAnc291bmRzL2ZhcnQtMDIud2F2Jyk7XG4gICAgICAgIGdhbWUubG9hZC5hdWRpbygnb2JzLnNhdWNlci51Zm8nLCAnc291bmRzL3Vmby0wMS53YXYnKTtcbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=