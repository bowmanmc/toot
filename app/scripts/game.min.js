"use strict";

var trConfig = {

    debug: true

};
"use strict";

var toot = {
    //gravity: (300 * 0.27),
    gravity: 300,
    fartStrength: 250,
    currentDistance: 0,

    soundsEnabled: false,

    // namespacing
    character: {},
    environment: {},
    obstacle: {},
    ui: {}
};

var run = function run() {
    var game = new Game();
    game.start();
};
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var CharPlayer = function CharPlayer() {
    _classCallCheck(this, CharPlayer);

    console.log('created a new player instance!');
};
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var EnvBackground = (function () {
    function EnvBackground() {
        _classCallCheck(this, EnvBackground);

        console.log('created a new background instance!');
    }

    _createClass(EnvBackground, [{
        key: 'create',
        value: function create(game) {
            console.log('EnvBackground.create()');
            var w = game.world.width;
            var h = game.world.height;
            this.spaceBg = game.add.tileSprite(0, 0, w, h, 'bg-space');
            this.starsLg = game.add.tileSprite(0, 0, w, h, 'bg-stars-large');
            this.spaceDs = game.add.tileSprite(0, 0, w, h, 'bg-stars-dense');
            this.starsSm = game.add.tileSprite(0, 0, w, h, 'bg-stars-small');

            this.horizon = game.add.tileSprite(0, 0, w, h, 'bg-horizon');

            this.mountains1 = game.add.tileSprite(0, 0, w, h, 'bg-mountains-01');
            this.mountains2 = game.add.tileSprite(0, 0, w, h, 'bg-mountains-02');
        }
    }, {
        key: 'update',
        value: function update(game) {
            this.spaceBg.tilePosition.x -= 0.075;
            this.starsLg.tilePosition.x -= 0.1;
            this.spaceDs.tilePosition.x -= 0.125;
            this.starsSm.tilePosition.x -= 0.15;

            this.mountains1.tilePosition.x -= 0.2;
            this.mountains2.tilePosition.x -= 0.25;
        }
    }]);

    return EnvBackground;
})();
/**
 * ScreenBoot
 *
 * This is the logo/loading screen that shows when the game starts up.
 *      - Show company logo
 *      - Load game assets (graphics, sounds, etc...)
 *      - Show loading progress
 *      - Set mood for game
 *
 */
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var ScreenBoot = (function () {
    function ScreenBoot() {
        _classCallCheck(this, ScreenBoot);
    }

    _createClass(ScreenBoot, [{
        key: 'preload',
        value: function preload(game) {
            this.startTime = moment();
            this.isLoaded = false;
            this.minTime = moment().add(ScreenBoot.MIN_BOOT_TIME, 'seconds');

            console.log('ScreenBoot.preload');
        }
    }, {
        key: 'create',
        value: function create(game) {
            var loadTime = moment();
            var duration = moment.utc(loadTime.diff(this.startTime));
            console.log('ScreenBoot assets loaded in ' + duration.format('HH:mm:ss:SSS'));
            this.isLoaded = true;

            var x = game.world.centerX;
            var y = game.world.centerY;
            var msg = 'morphzero';
            var text = game.add.text(x, y, msg, {
                font: '32px Arial',
                fill: '#ddddd9',
                align: 'center'
            });
            text.anchor.setTo(0.5, 0.5);
        }
    }, {
        key: 'update',
        value: function update(game) {
            var now = moment();
            if (this.isLoaded && now.isAfter(this.minTime)) {
                game.state.start('menu');
            }
        }
    }]);

    return ScreenBoot;
})();

ScreenBoot.MIN_BOOT_TIME = 1.5; // seconds
/**
 * ScreenMenu
 *
 * This is the menu screen. Options for:
 *      - Starting a game
 *      - About/Credits page
 *      - Settings page?
 *
 */
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var ScreenMenu = (function () {
    function ScreenMenu() {
        _classCallCheck(this, ScreenMenu);
    }

    _createClass(ScreenMenu, [{
        key: 'preload',
        value: function preload(game) {
            console.log('ScreenMenu.preload start...');
            this.startTime = moment();
            this.isLoaded = false;

            var preloader = new UtilPreloader();
            preloader.preload(game);
        }
    }, {
        key: 'create',
        value: function create(game) {
            var loadTime = moment();
            var duration = moment.utc(loadTime.diff(this.startTime));
            console.log('ScreenMenu assets loaded in ' + duration.format('HH:mm:ss:SSS'));
            this.isLoaded = true;

            var x = game.world.centerX;
            var y = game.world.centerY;
            var msg = 'play';
            var text = game.add.text(x, y, msg, {
                font: '32px Arial',
                fill: '#ddddd9',
                align: 'center'
            });
            text.anchor.setTo(0.5, 0.5);

            game.input.onDown.addOnce(function () {
                game.state.start('play');
            }, this);
        }
    }, {
        key: 'update',
        value: function update(game) {}
    }]);

    return ScreenMenu;
})();
/**
 * ScreenPlay
 *
 * This is the main play/game screen.
 *
 */
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var ScreenPlay = (function () {
    function ScreenPlay() {
        _classCallCheck(this, ScreenPlay);
    }

    _createClass(ScreenPlay, [{
        key: 'preload',
        value: function preload(game) {
            this.bg = new EnvBackground();
        }
    }, {
        key: 'create',
        value: function create(game) {
            if (trConfig.debug) {
                this.stats = new Stats();
                document.body.appendChild(this.stats.domElement);
                this.stats.domElement.style.position = 'absolute';
                this.stats.domElement.style.top = '0px';
            }

            this.bg.create(game);
        }
    }, {
        key: 'update',
        value: function update(game) {

            if (trConfig.debug) {
                this.stats.begin();
            }

            this.bg.update(game);

            if (trConfig.debug) {
                this.stats.end();
            }
        }
    }]);

    return ScreenPlay;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Game = (function () {
    function Game() {
        _classCallCheck(this, Game);

        console.log('-- -- -- --   Toot Rippington - Blasts Off!   -- -- -- --');

        var pGame = new Phaser.Game(1334, 750, Phaser.AUTO, '');

        pGame.state.add('boot', new ScreenBoot());
        pGame.state.add('menu', new ScreenMenu());
        pGame.state.add('play', new ScreenPlay());

        this.pGame = pGame;
    }

    _createClass(Game, [{
        key: 'start',
        value: function start() {
            this.pGame.state.start('boot');
        }
    }]);

    return Game;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var UtilPreloader = (function () {
    function UtilPreloader() {
        _classCallCheck(this, UtilPreloader);
    }

    _createClass(UtilPreloader, [{
        key: 'preload',
        value: function preload(game) {
            this.loadSprites(game);
            this.loadSpriteSheets(game);
            this.loadAudio(game);
        }
    }, {
        key: 'loadSprites',

        // Asset Loading...
        value: function loadSprites(game) {
            // background
            game.load.image('bg-space', 'images/bg-space.jpg');
            game.load.image('bg-stars-small', 'images/bg-stars-small.png');
            game.load.image('bg-stars-dense', 'images/bg-stars-small-dense.png');
            game.load.image('bg-stars-large', 'images/bg-stars-large.png');
            game.load.image('bg-horizon', 'images/bg-horizon-gradient.png');
            game.load.image('bg-mountains-01', 'images/bg-mountains-01.png');
            game.load.image('bg-mountains-02', 'images/bg-mountains-02.png');
            // ground
            game.load.image('ground', 'images/ground.jpg');
            game.load.image('vignette', 'images/vignette.png');
        }
    }, {
        key: 'loadSpriteSheets',
        value: function loadSpriteSheets(game) {
            // player
            game.load.spritesheet('player.toot', 'images/toot-spritesheet.png', 64, 96);
            game.load.spritesheet('player.blast', 'images/blast-spritesheet.png', 60, 63);
            // Obstacles
            game.load.spritesheet('obs.saucer', 'images/saucer-spritesheet.png', 276, 100);
            game.load.spritesheet('obs.probe', 'images/probe-spritesheet.png', 128, 107);
        }
    }, {
        key: 'loadAudio',
        value: function loadAudio(game) {
            game.load.audio('player.fart', 'sounds/fart-02.wav');
            game.load.audio('obs.saucer.ufo', 'sounds/ufo-01.wav');
        }
    }]);

    return UtilPreloader;
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy5qcyIsIm1haW4uanMiLCJjaGFyYWN0ZXIvcGxheWVyLmpzIiwiZW52aXJvbm1lbnQvYmFja2dyb3VuZC5qcyIsInNjcmVlbi9ib290LmpzIiwic2NyZWVuL21lbnUuanMiLCJzY3JlZW4vcGxheS5qcyIsInV0aWwvZ2FtZS5qcyIsInV0aWwvcHJlbG9hZGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxRQUFRLEdBQUc7O0FBRVgsU0FBSyxFQUFFLElBQUk7O0NBRWQsQ0FBQzs7O0FDSkYsSUFBSSxJQUFJLEdBQUc7O0FBRVAsV0FBTyxFQUFFLEdBQUc7QUFDWixnQkFBWSxFQUFFLEdBQUc7QUFDakIsbUJBQWUsRUFBRSxDQUFDOztBQUVsQixpQkFBYSxFQUFFLEtBQUs7OztBQUdwQixhQUFTLEVBQUUsRUFBRTtBQUNiLGVBQVcsRUFBRSxFQUFFO0FBQ2YsWUFBUSxFQUFFLEVBQUU7QUFDWixNQUFFLEVBQUUsRUFBRTtDQUNULENBQUM7O0FBRUYsSUFBSSxHQUFHLEdBQUcsU0FBTixHQUFHLEdBQWM7QUFDakIsUUFBSSxJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUN0QixRQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7Q0FDaEIsQ0FBQzs7Ozs7SUNqQkksVUFBVSxHQUVELFNBRlQsVUFBVSxHQUVFOzBCQUZaLFVBQVU7O0FBR1IsV0FBTyxDQUFDLEdBQUcsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO0NBQ2pEOzs7Ozs7O0lDSkMsYUFBYTtBQUVKLGFBRlQsYUFBYSxHQUVEOzhCQUZaLGFBQWE7O0FBR1gsZUFBTyxDQUFDLEdBQUcsQ0FBQyxvQ0FBb0MsQ0FBQyxDQUFDO0tBQ3JEOztpQkFKQyxhQUFhOztlQU1ULGdCQUFDLElBQUksRUFBRTtBQUNULG1CQUFPLENBQUMsR0FBRyxDQUFDLHdCQUF3QixDQUFDLENBQUM7QUFDdEMsZ0JBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFD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QyxDQUFDO0FBQ2hFLGdCQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSw0QkFBNEIsQ0FBQyxDQUFDO0FBQ2pFLGdCQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSw0QkFBNEIsQ0FBQyxDQUFDOztBQUVqRSxnQkFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLG1CQUFtQixDQUFDLENBQUM7QUFDL0MsZ0JBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRSxxQkFBcUIsQ0FBQyxDQUFDO1NBQ3REOzs7ZUFFZSwwQkFBQyxJQUFJLEVBQUU7O0FBRW5CLGdCQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxhQUFhLEVBQUUsNkJBQTZCLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQzVFLGdCQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxjQUFjLEVBQUUsOEJBQThCLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDOztBQUU5RSxnQkFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsWUFBWSxFQUFFLCtCQUErQixFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUMvRSxnQkFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxFQUFFLDhCQUE4QixFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztTQUVoRjs7O2VBRVEsbUJBQUMsSUFBSSxFQUFFO0FBQ1osZ0JBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDO0FBQ3JELGdCQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO1NBQzFEOzs7V0F4Q0MsYUFBYSIsImZpbGUiOiJnYW1lLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciB0ckNvbmZpZyA9IHtcblxuICAgIGRlYnVnOiB0cnVlXG5cbn07XG4iLCJ2YXIgdG9vdCA9IHtcbiAgICAvL2dyYXZpdHk6ICgzMDAgKiAwLjI3KSxcbiAgICBncmF2aXR5OiAzMDAsXG4gICAgZmFydFN0cmVuZ3RoOiAyNTAsXG4gICAgY3VycmVudERpc3RhbmNlOiAwLFxuXG4gICAgc291bmRzRW5hYmxlZDogZmFsc2UsXG5cbiAgICAvLyBuYW1lc3BhY2luZ1xuICAgIGNoYXJhY3Rlcjoge30sXG4gICAgZW52aXJvbm1lbnQ6IHt9LFxuICAgIG9ic3RhY2xlOiB7fSxcbiAgICB1aToge31cbn07XG5cbnZhciBydW4gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZ2FtZSA9IG5ldyBHYW1lKCk7XG4gICAgZ2FtZS5zdGFydCgpO1xufTtcbiIsIlxuY2xhc3MgQ2hhclBsYXllciB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2NyZWF0ZWQgYSBuZXcgcGxheWVyIGluc3RhbmNlIScpO1xuICAgIH1cbn1cbiIsIlxuY2xhc3MgRW52QmFja2dyb3VuZCB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2NyZWF0ZWQgYSBuZXcgYmFja2dyb3VuZCBpbnN0YW5jZSEnKTtcbiAgICB9XG5cbiAgICBjcmVhdGUoZ2FtZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnRW52QmFja2dyb3VuZC5jcmVhdGUoKScpO1xuICAgICAgICB2YXIgdyA9IGdhbWUud29ybGQud2lkdGg7XG4gICAgICAgIHZhciBoID0gZ2FtZS53b3JsZC5oZWlnaHQ7XG4gICAgICAgIHRoaXMuc3BhY2VCZyA9IGdhbWUuYWRkLnRpbGVTcHJpdGUoMCwgMCwgdywgaCwgJ2JnLXNwYWNlJyk7XG4gICAgICAgIHRoaXMuc3RhcnNMZyA9IGdhbWUuYWRkLnRpbGVTcHJpdGUoMCwgMCwgdywgaCwgJ2JnLXN0YXJzLWxhcmdlJyk7XG4gICAgICAgIHRoaXMuc3BhY2VEcyA9IGdhbWUuYWRkLnRpbGVTcHJpdGUoMCwgMCwgdywgaCwgJ2JnLXN0YXJzLWRlbnNlJyk7XG4gICAgICAgIHRoaXMuc3RhcnNTbSA9IGdhbWUuYWRkLnRpbGVTcHJpdGUoMCwgMCwgdywgaCwgJ2JnLXN0YXJzLXNtYWxsJyk7XG5cbiAgICAgICAgdGhpcy5ob3Jpem9uID0gZ2FtZS5hZGQudGlsZVNwcml0ZSgwLCAwLCB3LCBoLCAnYmctaG9yaXpvbicpO1xuXG4gICAgICAgIHRoaXMubW91bnRhaW5zMSA9IGdhbWUuYWRkLnRpbGVTcHJpdGUoMCwgMCwgdywgaCwgJ2JnLW1vdW50YWlucy0wMScpO1xuICAgICAgICB0aGlzLm1vdW50YWluczIgPSBnYW1lLmFkZC50aWxlU3ByaXRlKDAsIDAsIHcsIGgsICdiZy1tb3VudGFpbnMtMDInKTtcbiAgICB9XG5cbiAgICB1cGRhdGUoZ2FtZSkge1xuICAgICAgICB0aGlzLnNwYWNlQmcudGlsZVBvc2l0aW9uLnggLT0gMC4wNzU7XG4gICAgICAgIHRoaXMuc3RhcnNMZy50aWxlUG9zaXRpb24ueCAtPSAwLjEwMDtcbiAgICAgICAgdGhpcy5zcGFjZURzLnRpbGVQb3NpdGlvbi54IC09IDAuMTI1O1xuICAgICAgICB0aGlzLnN0YXJzU20udGlsZVBvc2l0aW9uLnggLT0gMC4xNTA7XG5cbiAgICAgICAgdGhpcy5tb3VudGFpbnMxLnRpbGVQb3NpdGlvbi54IC09IDAuMjA7XG4gICAgICAgIHRoaXMubW91bnRhaW5zMi50aWxlUG9zaXRpb24ueCAtPSAwLjI1O1xuICAgIH1cbn1cbiIsIi8qKlxuICogU2NyZWVuQm9vdFxuICpcbiAqIFRoaXMgaXMgdGhlIGxvZ28vbG9hZGluZyBzY3JlZW4gdGhhdCBzaG93cyB3aGVuIHRoZSBnYW1lIHN0YXJ0cyB1cC5cbiAqICAgICAgLSBTaG93IGNvbXBhbnkgbG9nb1xuICogICAgICAtIExvYWQgZ2FtZSBhc3NldHMgKGdyYXBoaWNzLCBzb3VuZHMsIGV0Yy4uLilcbiAqICAgICAgLSBTaG93IGxvYWRpbmcgcHJvZ3Jlc3NcbiAqICAgICAgLSBTZXQgbW9vZCBmb3IgZ2FtZVxuICpcbiAqL1xuY2xhc3MgU2NyZWVuQm9vdCB7XG5cbiAgICBwcmVsb2FkKGdhbWUpIHtcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBtb21lbnQoKTtcbiAgICAgICAgdGhpcy5pc0xvYWRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1pblRpbWUgPSBtb21lbnQoKS5hZGQoU2NyZWVuQm9vdC5NSU5fQk9PVF9USU1FLCAnc2Vjb25kcycpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdTY3JlZW5Cb290LnByZWxvYWQnKTtcbiAgICB9XG5cbiAgICBjcmVhdGUoZ2FtZSkge1xuICAgICAgICB2YXIgbG9hZFRpbWUgPSBtb21lbnQoKTtcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gbW9tZW50LnV0Yyhsb2FkVGltZS5kaWZmKHRoaXMuc3RhcnRUaW1lKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTY3JlZW5Cb290IGFzc2V0cyBsb2FkZWQgaW4gJyArIGR1cmF0aW9uLmZvcm1hdCgnSEg6bW06c3M6U1NTJykpO1xuICAgICAgICB0aGlzLmlzTG9hZGVkID0gdHJ1ZTtcblxuICAgICAgICB2YXIgeCA9IGdhbWUud29ybGQuY2VudGVyWDtcbiAgICAgICAgdmFyIHkgPSBnYW1lLndvcmxkLmNlbnRlclk7XG4gICAgICAgIHZhciBtc2cgPSBcIm1vcnBoemVyb1wiXG4gICAgICAgIHZhciB0ZXh0ID0gZ2FtZS5hZGQudGV4dCh4LCB5LCBtc2csIHtcbiAgICAgICAgICAgIGZvbnQ6IFwiMzJweCBBcmlhbFwiLFxuICAgICAgICAgICAgZmlsbDogXCIjZGRkZGQ5XCIsXG4gICAgICAgICAgICBhbGlnbjogXCJjZW50ZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgdGV4dC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICAgIH1cblxuICAgIHVwZGF0ZShnYW1lKSB7XG4gICAgICAgIHZhciBub3cgPSBtb21lbnQoKTtcbiAgICAgICAgaWYgKHRoaXMuaXNMb2FkZWQgJiYgbm93LmlzQWZ0ZXIodGhpcy5taW5UaW1lKSkge1xuICAgICAgICAgICAgZ2FtZS5zdGF0ZS5zdGFydCgnbWVudScpO1xuICAgICAgICB9XG4gICAgfVxuXG59XG5cblNjcmVlbkJvb3QuTUlOX0JPT1RfVElNRSA9IDEuNTsgLy8gc2Vjb25kc1xuIiwiLyoqXG4gKiBTY3JlZW5NZW51XG4gKlxuICogVGhpcyBpcyB0aGUgbWVudSBzY3JlZW4uIE9wdGlvbnMgZm9yOlxuICogICAgICAtIFN0YXJ0aW5nIGEgZ2FtZVxuICogICAgICAtIEFib3V0L0NyZWRpdHMgcGFnZVxuICogICAgICAtIFNldHRpbmdzIHBhZ2U/XG4gKlxuICovXG5jbGFzcyBTY3JlZW5NZW51IHtcblxuICAgIHByZWxvYWQoZ2FtZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnU2NyZWVuTWVudS5wcmVsb2FkIHN0YXJ0Li4uJyk7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gbW9tZW50KCk7XG4gICAgICAgIHRoaXMuaXNMb2FkZWQgPSBmYWxzZTtcblxuICAgICAgICB2YXIgcHJlbG9hZGVyID0gbmV3IFV0aWxQcmVsb2FkZXIoKTtcbiAgICAgICAgcHJlbG9hZGVyLnByZWxvYWQoZ2FtZSk7XG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcbiAgICAgICAgdmFyIGxvYWRUaW1lID0gbW9tZW50KCk7XG4gICAgICAgIHZhciBkdXJhdGlvbiA9IG1vbWVudC51dGMobG9hZFRpbWUuZGlmZih0aGlzLnN0YXJ0VGltZSkpO1xuICAgICAgICBjb25zb2xlLmxvZygnU2NyZWVuTWVudSBhc3NldHMgbG9hZGVkIGluICcgKyBkdXJhdGlvbi5mb3JtYXQoJ0hIOm1tOnNzOlNTUycpKTtcbiAgICAgICAgdGhpcy5pc0xvYWRlZCA9IHRydWU7XG5cbiAgICAgICAgdmFyIHggPSBnYW1lLndvcmxkLmNlbnRlclg7XG4gICAgICAgIHZhciB5ID0gZ2FtZS53b3JsZC5jZW50ZXJZO1xuICAgICAgICB2YXIgbXNnID0gXCJwbGF5XCJcbiAgICAgICAgdmFyIHRleHQgPSBnYW1lLmFkZC50ZXh0KHgsIHksIG1zZywge1xuICAgICAgICAgICAgZm9udDogXCIzMnB4IEFyaWFsXCIsXG4gICAgICAgICAgICBmaWxsOiBcIiNkZGRkZDlcIixcbiAgICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiXG4gICAgICAgIH0pO1xuICAgICAgICB0ZXh0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG5cbiAgICAgICAgZ2FtZS5pbnB1dC5vbkRvd24uYWRkT25jZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGdhbWUuc3RhdGUuc3RhcnQoJ3BsYXknKTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgfVxuXG4gICAgdXBkYXRlKGdhbWUpIHtcblxuICAgIH1cblxufVxuIiwiLyoqXG4gKiBTY3JlZW5QbGF5XG4gKlxuICogVGhpcyBpcyB0aGUgbWFpbiBwbGF5L2dhbWUgc2NyZWVuLlxuICpcbiAqL1xuY2xhc3MgU2NyZWVuUGxheSB7XG5cbiAgICBwcmVsb2FkKGdhbWUpIHtcbiAgICAgICAgdGhpcy5iZyA9IG5ldyBFbnZCYWNrZ3JvdW5kKCk7XG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcbiAgICAgICAgaWYgKHRyQ29uZmlnLmRlYnVnKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRzID0gbmV3IFN0YXRzKCk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuc3RhdHMuZG9tRWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnN0YXRzLmRvbUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgdGhpcy5zdGF0cy5kb21FbGVtZW50LnN0eWxlLnRvcCA9ICcwcHgnO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5iZy5jcmVhdGUoZ2FtZSk7XG4gICAgfVxuXG4gICAgdXBkYXRlKGdhbWUpIHtcblxuICAgICAgICBpZiAodHJDb25maWcuZGVidWcpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHMuYmVnaW4oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYmcudXBkYXRlKGdhbWUpO1xuXG5cbiAgICAgICAgaWYgKHRyQ29uZmlnLmRlYnVnKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRzLmVuZCgpO1xuICAgICAgICB9XG4gICAgfVxuXG59XG4iLCJcbmNsYXNzIEdhbWUge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG5cbiAgICAgICAgY29uc29sZS5sb2coJy0tIC0tIC0tIC0tICAgVG9vdCBSaXBwaW5ndG9uIC0gQmxhc3RzIE9mZiEgICAtLSAtLSAtLSAtLScpO1xuXG4gICAgICAgIHZhciBwR2FtZSA9IG5ldyBQaGFzZXIuR2FtZShcbiAgICAgICAgICAgIDEzMzQsIDc1MCxcbiAgICAgICAgICAgIFBoYXNlci5BVVRPLFxuICAgICAgICAgICAgJydcbiAgICAgICAgKTtcblxuICAgICAgICBwR2FtZS5zdGF0ZS5hZGQoJ2Jvb3QnLCBuZXcgU2NyZWVuQm9vdCgpKTtcbiAgICAgICAgcEdhbWUuc3RhdGUuYWRkKCdtZW51JywgbmV3IFNjcmVlbk1lbnUoKSk7XG4gICAgICAgIHBHYW1lLnN0YXRlLmFkZCgncGxheScsIG5ldyBTY3JlZW5QbGF5KCkpO1xuXG4gICAgICAgIHRoaXMucEdhbWUgPSBwR2FtZTtcbiAgICB9XG5cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5wR2FtZS5zdGF0ZS5zdGFydCgnYm9vdCcpO1xuICAgIH1cbn1cbiIsImNsYXNzIFV0aWxQcmVsb2FkZXIge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG5cbiAgICB9XG5cbiAgICBwcmVsb2FkKGdhbWUpIHtcbiAgICAgICAgdGhpcy5sb2FkU3ByaXRlcyhnYW1lKTtcbiAgICAgICAgdGhpcy5sb2FkU3ByaXRlU2hlZXRzKGdhbWUpO1xuICAgICAgICB0aGlzLmxvYWRBdWRpbyhnYW1lKTtcbiAgICB9XG5cbiAgICAvLyBBc3NldCBMb2FkaW5nLi4uXG4gICAgbG9hZFNwcml0ZXMoZ2FtZSkge1xuICAgICAgICAvLyBiYWNrZ3JvdW5kXG4gICAgICAgIGdhbWUubG9hZC5pbWFnZSgnYmctc3BhY2UnLCAnaW1hZ2VzL2JnLXNwYWNlLmpwZycpO1xuICAgICAgICBnYW1lLmxvYWQuaW1hZ2UoJ2JnLXN0YXJzLXNtYWxsJywgJ2ltYWdlcy9iZy1zdGFycy1zbWFsbC5wbmcnKTtcbiAgICAgICAgZ2FtZS5sb2FkLmltYWdlKCdiZy1zdGFycy1kZW5zZScsICdpbWFnZXMvYmctc3RhcnMtc21hbGwtZGVuc2UucG5nJyk7XG4gICAgICAgIGdhbWUubG9hZC5pbWFnZSgnYmctc3RhcnMtbGFyZ2UnLCAnaW1hZ2VzL2JnLXN0YXJzLWxhcmdlLnBuZycpO1xuICAgICAgICBnYW1lLmxvYWQuaW1hZ2UoJ2JnLWhvcml6b24nLCAnaW1hZ2VzL2JnLWhvcml6b24tZ3JhZGllbnQucG5nJyk7XG4gICAgICAgIGdhbWUubG9hZC5pbWFnZSgnYmctbW91bnRhaW5zLTAxJywgJ2ltYWdlcy9iZy1tb3VudGFpbnMtMDEucG5nJyk7XG4gICAgICAgIGdhbWUubG9hZC5pbWFnZSgnYmctbW91bnRhaW5zLTAyJywgJ2ltYWdlcy9iZy1tb3VudGFpbnMtMDIucG5nJyk7XG4gICAgICAgIC8vIGdyb3VuZFxuICAgICAgICBnYW1lLmxvYWQuaW1hZ2UoJ2dyb3VuZCcsICdpbWFnZXMvZ3JvdW5kLmpwZycpO1xuICAgICAgICBnYW1lLmxvYWQuaW1hZ2UoJ3ZpZ25ldHRlJywgJ2ltYWdlcy92aWduZXR0ZS5wbmcnKTtcbiAgICB9XG5cbiAgICBsb2FkU3ByaXRlU2hlZXRzKGdhbWUpIHtcbiAgICAgICAgLy8gcGxheWVyXG4gICAgICAgIGdhbWUubG9hZC5zcHJpdGVzaGVldCgncGxheWVyLnRvb3QnLCAnaW1hZ2VzL3Rvb3Qtc3ByaXRlc2hlZXQucG5nJywgNjQsIDk2KTtcbiAgICAgICAgZ2FtZS5sb2FkLnNwcml0ZXNoZWV0KCdwbGF5ZXIuYmxhc3QnLCAnaW1hZ2VzL2JsYXN0LXNwcml0ZXNoZWV0LnBuZycsIDYwLCA2Myk7XG4gICAgICAgIC8vIE9ic3RhY2xlc1xuICAgICAgICBnYW1lLmxvYWQuc3ByaXRlc2hlZXQoJ29icy5zYXVjZXInLCAnaW1hZ2VzL3NhdWNlci1zcHJpdGVzaGVldC5wbmcnLCAyNzYsIDEwMCk7XG4gICAgICAgIGdhbWUubG9hZC5zcHJpdGVzaGVldCgnb2JzLnByb2JlJywgJ2ltYWdlcy9wcm9iZS1zcHJpdGVzaGVldC5wbmcnLCAxMjgsIDEwNyk7XG5cbiAgICB9XG5cbiAgICBsb2FkQXVkaW8oZ2FtZSkge1xuICAgICAgICBnYW1lLmxvYWQuYXVkaW8oJ3BsYXllci5mYXJ0JywgJ3NvdW5kcy9mYXJ0LTAyLndhdicpO1xuICAgICAgICBnYW1lLmxvYWQuYXVkaW8oJ29icy5zYXVjZXIudWZvJywgJ3NvdW5kcy91Zm8tMDEud2F2Jyk7XG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9