"use strict";

var trConfig = {

    debug: true,
    gravity: 300,

    mute: true,

    player: {
        debug: false,
        fartStrength: 250,
        mute: false
    },

    obstacle: {
        debug: false,
        mute: false
    }

};
"use strict";

var toot = {
    //gravity: (300 * 0.27),
    gravity: 300,
    fartStrength: 250,
    currentDistance: 0,

    soundsEnabled: false,

    // namespacing
    character: {},
    environment: {},
    obstacle: {},
    ui: {}
};

var run = function run() {
    var game = new Game();
    game.start();
};
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var CharPlayer = (function () {
    function CharPlayer() {
        _classCallCheck(this, CharPlayer);

        this.observers = {};
    }

    _createClass(CharPlayer, [{
        key: 'create',
        value: function create(game) {
            var startX = game.world.width * 0.15;
            var startY = game.world.height - 256;

            this.spriteToot = game.add.sprite(startX, startY, 'player.toot');
            game.physics.arcade.enable(this.spriteToot);

            this.spriteToot.body.gravity.y = trConfig.gravity;
            this.spriteToot.body.collideWorldBounds = true;

            this.spriteToot.animations.add('run', [5, 6, 7, 8], 6, true);
            this.spriteToot.animations.add('land', [5, 6, 7, 8], 2, true);

            // blast
            this.spriteBlast = game.add.sprite(startX - 60, startY + 60, 'player.blast');
            this.spriteBlast.animations.add('fart', [1, 3, 4, 4, 0], 10, false);

            this.soundFart = game.add.audio('player.fart');
            this.soundFart.allowMultiple = false;
        }
    }, {
        key: 'update',
        value: function update(game) {
            //  Reset the players velocity (movement)
            this.spriteToot.body.velocity.x = 0;

            if (game.input.activePointer.isDown) {

                this.spriteToot.body.velocity.y = trConfig.player.fartStrength * -1;
                this.spriteBlast.animations.play('fart');

                if (!trConfig.mute && !trConfig.player.mute) {
                    //this.soundFart.play('', 0.35, 1, false, false);
                    this.soundFart.play('', 0, 1, false, false);
                }
            }

            if (this.spriteToot.body.touching.down) {
                this.spriteToot.animations.play('run');
                this.spriteBlast.frame = 0;
            } else if (this.spriteToot.body.velocity.y > 0 && this.spriteToot.body.velocity.y > toot.fartStrength * 0.66) {
                this.spriteToot.animations.play('land');
            } else {
                this.spriteToot.frame = 4;
            }

            this.spriteBlast.position.x = this.spriteToot.position.x - 38;
            this.spriteBlast.position.y = this.spriteToot.position.y + 80;

            // update toot.state variable
            this.notify('position', {
                x: this.spriteToot.position.x,
                y: this.spriteToot.position.y + 40
            });

            if (trConfig.debug && trConfig.player.debug) {
                game.debug.body(this.spriteToot);
            }
        }
    }, {
        key: 'getColliders',
        value: function getColliders() {
            return this.spriteToot;
        }
    }, {
        key: 'notify',
        value: function notify(event, arg) {
            var callbacks = this.observers[event];
            if (typeof callbacks === 'undefined') {
                return;
            }
            callbacks.forEach(function (callback) {
                callback(arg);
            });
        }
    }, {
        key: 'registerObserver',
        value: function registerObserver(event, callback) {
            if (typeof this.observers[event] === 'undefined') {
                this.observers[event] = [];
            }
            this.observers[event].push(callback);
        }
    }]);

    return CharPlayer;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var CharProbe = (function () {
    function CharProbe() {
        _classCallCheck(this, CharProbe);

        this.velocity = 200;
        this.rotMax = 0.05;
        this.rotInc = 0.005;
    }

    _createClass(CharProbe, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            var h = game.world.height;

            this.collisionGroup = game.add.group();
            game.physics.arcade.enable(this.collisionGroup);
            this.collisionGroup.checkWorldBounds = true;

            this.spriteProbe = this.collisionGroup.create(w, 128, 'obs.probe');
            this.spriteProbe.scale.set(0.5, 0.5);
            this.spriteProbe.anchor.setTo(0.5, 0.5);
            game.physics.arcade.enable(this.spriteProbe);
            this.spriteProbe.body.allowGravity = false;
            this.spriteProbe.body.immovable = true;
        }
    }, {
        key: 'update',
        value: function update(game) {
            if (this.spriteProbe.rotation >= this.rotMax || this.spriteProbe.rotation <= this.rotMax * -1) {
                this.rotInc = this.rotInc * -1;
            }
            this.spriteProbe.rotation += this.rotInc;

            if (trConfig.obstacle.debug) {
                this.collisionGroup.forEach(function (child) {
                    game.debug.body(child);
                });
            }
        }
    }, {
        key: 'inWorld',
        value: function inWorld() {
            return this.spriteProbe.inWorld;
        }
    }, {
        key: 'stop',
        value: function stop() {}
    }, {
        key: 'reset',
        value: function reset(x, y) {
            console.log('resetting Probe to ' + x + ', ' + y);
            this.collisionGroup.forEach(function (item) {
                item.reset(x, y);
            });
            this.collisionGroup.setAll('body.velocity.x', this.velocity * -1);
        }
    }, {
        key: 'getColliders',
        value: function getColliders() {
            return this.collisionGroup;
        }
    }]);

    return CharProbe;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var CharSaucer = (function () {
    function CharSaucer() {
        _classCallCheck(this, CharSaucer);

        this.velocity = 300;
        this.rotMax = 0.025;
        this.rotInc = 0.0025;
    }

    _createClass(CharSaucer, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            var h = game.world.height;

            this.soundUfo = game.add.audio('obs.saucer.ufo');
            this.soundUfo.allowMultiple = false;

            this.collisionGroup = game.add.group();
            game.physics.arcade.enable(this.collisionGroup);
            //this.collisionGroup.body.allowGravity = false;
            //this.collisionGroup.body.immovable = true;
            this.collisionGroup.checkWorldBounds = true;

            //this.spriteSaucer = this.game.add.sprite(w, 128, 'saucer');
            this.spriteSaucer = this.collisionGroup.create(w, 128, 'obs.saucer');
            this.spriteSaucer.anchor.setTo(0.5, 0.5);
            game.physics.arcade.enable(this.spriteSaucer);
            this.spriteSaucer.body.allowGravity = false;
            this.spriteSaucer.body.immovable = true;
            this.spriteSaucer.body.setSize(64, 20, -10, -37);

            // Additional collider boxes to match the shape of the saucer more closely
            var c1 = this.collisionGroup.create(w, 128, '');
            c1.anchor.setTo(0.5, 0.5);
            game.physics.arcade.enable(c1);
            c1.body.allowGravity = false;
            c1.body.immovable = true;
            c1.body.setSize(200, 22, -4, -16);

            var c2 = this.collisionGroup.create(w, 128, '');
            c2.anchor.setTo(0.5, 0.5);
            game.physics.arcade.enable(c2);
            c2.body.allowGravity = false;
            c2.body.immovable = true;
            c2.body.setSize(270, 32, -4, 11);

            var c3 = this.collisionGroup.create(w, 128, '');
            c3.anchor.setTo(0.5, 0.5);
            game.physics.arcade.enable(c3);
            c3.allowGravity = false;
            c3.body.immovable = true;
            c3.body.setSize(200, 16, -4, 35);
        }
    }, {
        key: 'update',
        value: function update(game) {
            if (this.spriteSaucer.rotation >= this.rotMax || this.spriteSaucer.rotation <= this.rotMax * -1) {
                this.rotInc = this.rotInc * -1;
            }
            this.spriteSaucer.rotation += this.rotInc;

            if (this.debug) {
                this.collisionGroup.forEach(function (child) {
                    game.debug.body(child);
                });
            }
        }
    }, {
        key: 'stop',
        value: function stop() {
            this.soundUfo.stop();
        }
    }, {
        key: 'reset',
        value: function reset(x, y) {
            console.log('resetting saucer to ' + x + ', ' + y);
            this.collisionGroup.forEach(function (item) {
                item.reset(x, y);
            });
            this.collisionGroup.setAll('body.velocity.x', this.velocity * -1);

            if (!trConfig.mute && !trConfig.obstacle.mute) {
                this.soundUfo.play('', 0, 1, true, false);
            }
        }
    }, {
        key: 'getColliders',
        value: function getColliders() {
            return this.collisionGroup;
        }
    }, {
        key: 'inWorld',
        value: function inWorld() {
            return this.spriteSaucer.inWorld;
        }
    }]);

    return CharSaucer;
})();
/**
 * ScreenBoot
 *
 * This is the logo/loading screen that shows when the game starts up.
 *      - Show company logo
 *      - Load game assets (graphics, sounds, etc...)
 *      - Show loading progress
 *      - Set mood for game
 *
 */
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var ScreenBoot = (function () {
    function ScreenBoot() {
        _classCallCheck(this, ScreenBoot);
    }

    _createClass(ScreenBoot, [{
        key: 'preload',
        value: function preload(game) {
            this.startTime = moment();
            this.isLoaded = false;
            this.minTime = moment().add(ScreenBoot.MIN_BOOT_TIME, 'seconds');

            console.log('ScreenBoot.preload');
        }
    }, {
        key: 'create',
        value: function create(game) {
            var loadTime = moment();
            var duration = moment.utc(loadTime.diff(this.startTime));
            console.log('ScreenBoot assets loaded in ' + duration.format('HH:mm:ss:SSS'));
            this.isLoaded = true;

            var x = game.world.centerX;
            var y = game.world.centerY;
            var msg = 'MorphZero presents';
            var text = game.add.text(x, y, msg, {
                font: '32px Arial',
                fill: '#ddddd9',
                align: 'center'
            });
            text.anchor.setTo(0.5, 0.5);
        }
    }, {
        key: 'update',
        value: function update(game) {
            var now = moment();
            if (this.isLoaded && now.isAfter(this.minTime)) {
                game.state.start('menu');
            }
        }
    }]);

    return ScreenBoot;
})();

ScreenBoot.MIN_BOOT_TIME = 1.5; // seconds
/**
 * ScreenMenu
 *
 * This is the menu screen. Options for:
 *      - Starting a game
 *      - About/Credits page
 *      - Settings page?
 *
 */
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var ScreenMenu = (function () {
    function ScreenMenu() {
        _classCallCheck(this, ScreenMenu);
    }

    _createClass(ScreenMenu, [{
        key: 'preload',
        value: function preload(game) {
            console.log('ScreenMenu.preload start...');
            this.startTime = moment();
            this.isLoaded = false;

            var preloader = new UtilPreloader();
            preloader.preload(game);
        }
    }, {
        key: 'create',
        value: function create(game) {
            var loadTime = moment();
            var duration = moment.utc(loadTime.diff(this.startTime));
            console.log('ScreenMenu assets loaded in ' + duration.format('HH:mm:ss:SSS'));
            this.isLoaded = true;

            var x = game.world.centerX;
            var y = game.world.centerY;
            var msg = 'play';
            var text = game.add.text(x, y, msg, {
                font: '32px Arial',
                fill: '#ddddd9',
                align: 'center'
            });
            text.anchor.setTo(0.5, 0.5);

            game.input.onDown.addOnce(function () {
                game.state.start('play');
            }, this);
        }
    }, {
        key: 'update',
        value: function update(game) {}
    }]);

    return ScreenMenu;
})();
/**
 * ScreenPlay
 *
 * This is the main play/game screen.
 *
 */
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var ScreenPlay = (function () {
    function ScreenPlay() {
        _classCallCheck(this, ScreenPlay);
    }

    _createClass(ScreenPlay, [{
        key: 'preload',
        value: function preload(game) {
            // Create game objects. Order here matters! Layered Back -> Front
            this.objects = [];
            this.objects.push(new EnvBackground());

            this.ground = new EnvGround();
            this.objects.push(this.ground);

            this.player = new CharPlayer();
            this.objects.push(this.player);

            var obstacles = new UtilObstacleGenerator();
            this.objects.push(obstacles);
            this.player.registerObserver('position', function (pos) {
                obstacles.updatePlayerPosition(pos);
            });
            this.obstacles = obstacles;

            this.objects.push(new EnvVignette());
        }
    }, {
        key: 'create',
        value: function create(game) {
            if (trConfig.debug) {
                this.stats = new Stats();
                document.body.appendChild(this.stats.domElement);
                this.stats.domElement.style.position = 'absolute';
                this.stats.domElement.style.top = '0px';
            }

            this.setupGame(game);

            // create()
            this.objects.forEach(function (obj) {
                obj.create(game);
            });
        }
    }, {
        key: 'update',
        value: function update(game) {

            if (trConfig.debug) {
                this.stats.begin();
            }

            // player vs ground
            game.physics.arcade.collide(this.player.getColliders(), this.ground.getColliders());
            // player vs obstacles
            game.physics.arcade.collide(this.player.getColliders(), this.obstacles.getColliders(), this.obstacleCollisionHandler, null, this);

            // update all objects
            this.objects.forEach(function (obj) {
                obj.update(game);
            });

            if (trConfig.debug) {
                this.stats.end();
            }
        }
    }, {
        key: 'obstacleCollisionHandler',
        value: function obstacleCollisionHandler(player, obstacle) {
            console.log('collision detected!');
        }
    }, {
        key: 'setupGame',
        value: function setupGame(game) {
            game.physics.startSystem(Phaser.Physics.ARCADE);
            game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
            game.scale.pageAlignHorizontally = true;
            game.scale.pageAlignVertically = true;
            game.scale.setScreenSize(true);
            game.scale.refresh();
        }
    }]);

    return ScreenPlay;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var EnvBackground = (function () {
    function EnvBackground() {
        _classCallCheck(this, EnvBackground);
    }

    _createClass(EnvBackground, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            var h = game.world.height;
            this.spaceBg = game.add.tileSprite(0, 0, w, h, 'bg-space');
            this.starsLg = game.add.tileSprite(0, 0, w, h, 'bg-stars-large');
            this.spaceDs = game.add.tileSprite(0, 0, w, h, 'bg-stars-dense');
            this.starsSm = game.add.tileSprite(0, 0, w, h, 'bg-stars-small');

            this.horizon = game.add.tileSprite(0, 0, w, h, 'bg-horizon');

            this.mountains1 = game.add.tileSprite(0, 0, w, h, 'bg-mountains-01');
            this.mountains2 = game.add.tileSprite(0, 0, w, h, 'bg-mountains-02');
        }
    }, {
        key: 'update',
        value: function update(game) {
            this.spaceBg.tilePosition.x -= 0.075;
            this.starsLg.tilePosition.x -= 0.1;
            this.spaceDs.tilePosition.x -= 0.125;
            this.starsSm.tilePosition.x -= 0.15;

            this.mountains1.tilePosition.x -= 0.2;
            this.mountains2.tilePosition.x -= 0.25;
        }
    }]);

    return EnvBackground;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var EnvGround = (function () {
    function EnvGround() {
        _classCallCheck(this, EnvGround);
    }

    _createClass(EnvGround, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            var h = game.world.height;

            var yPos = h - 97;
            this.sprite = game.add.tileSprite(0, yPos, w, h, 'ground');

            game.physics.arcade.enable(this.sprite);
            this.sprite.body.immovable = true;

            // bug in phaser 2.3.0
            // see: http://www.html5gamedevs.com/topic/13856-problem-with-collide-method-from-physics-arcade-in-different-versions-of-phaser/?p=79032
            this.sprite.physicsType = Phaser.SPRITE;
        }
    }, {
        key: 'update',
        value: function update(game) {
            this.sprite.tilePosition.x -= 0.85;
        }
    }, {
        key: 'getColliders',
        value: function getColliders() {
            return this.sprite;
        }
    }]);

    return EnvGround;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var EnvVignette = (function () {
    function EnvVignette() {
        _classCallCheck(this, EnvVignette);
    }

    _createClass(EnvVignette, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            var h = game.world.height;
            this.v = game.add.sprite(0, 0, 'vignette');
        }
    }, {
        key: 'update',
        value: function update(game) {}
    }]);

    return EnvVignette;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Game = (function () {
    function Game() {
        _classCallCheck(this, Game);

        console.log('-- -- -- --   Toot Rippington - Blasts Off!   -- -- -- --');

        var pGame = new Phaser.Game(1334, 750, Phaser.AUTO, '');

        pGame.state.add('boot', new ScreenBoot());
        pGame.state.add('menu', new ScreenMenu());
        pGame.state.add('play', new ScreenPlay());

        this.pGame = pGame;
    }

    _createClass(Game, [{
        key: 'start',
        value: function start() {
            this.pGame.state.start('boot');
        }
    }]);

    return Game;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var UtilObstacleGenerator = (function () {
    function UtilObstacleGenerator() {
        _classCallCheck(this, UtilObstacleGenerator);

        this.playerPositionY = 0;
    }

    _createClass(UtilObstacleGenerator, [{
        key: 'create',
        value: function create(game) {
            var _this = this;

            this.obstaclePool = {
                'saucer': [new CharSaucer(), new CharSaucer(), new CharSaucer()],
                'probe': [new CharProbe(), new CharProbe(), new CharProbe()]
            };
            var generator = this;
            Object.keys(this.obstaclePool).forEach(function (obstacleType) {
                _this.obstaclePool[obstacleType].forEach(function (obstacle) {
                    obstacle.create(game);
                    generator.resetTo(obstacle, -200, -200);
                    obstacle.stop();
                });
            });

            this.activeObstacles = [];
            // this.reset(game, this.obstaclePool.saucer[0]);
            // this.activeObstacles.push(this.obstaclePool.saucer[0]);
        }
    }, {
        key: 'update',
        value: function update(game) {
            var inactive = [];
            var len = this.activeObstacles.length;
            var i, obstacle;
            for (i = 0; i < len; i++) {
                obstacle = this.activeObstacles[i];
                obstacle.update(game);

                if (!obstacle.inWorld()) {
                    obstacle.stop();
                    inactive.push(i);
                }
            }

            len = inactive.length;
            for (i = 0; i < len; i++) {
                this.activeObstacles.splice(inactive[i], 1);
            }

            this.addNewObstacles(game);
        }
    }, {
        key: 'addNewObstacles',
        value: function addNewObstacles(game) {
            if (this.activeObstacles.length > 1) {
                return;
            }
            obstacle = getObstacle();
            this.reset(game, obstacle);
            this.activeObstacles.push(obstacle);
        }
    }, {
        key: 'getRandomObstacle',
        value: function getRandomObstacle() {
            var keys = Object.keys(this.obstaclePool);
            var numTypes = keys.length - 1;
            var keyIdx = Math.floor(Math.random() * numTypes);
            var key = keys[keyIdx];
        }
    }, {
        key: 'reset',
        value: function reset(game, obstacle) {
            var x = game.world.width - 100;
            var miny = 65;
            var maxy = game.world.height - 165;

            var y = this.playerPositionY;
            console.log('playerPositionY: ' + this.playerPositionY);
            if (y < miny) {
                y = miny;
            } else if (y > maxy) {
                y = maxy;
            }

            this.resetTo(obstacle, x, y);
        }
    }, {
        key: 'resetTo',
        value: function resetTo(obstacle, x, y) {
            obstacle.reset(x, y);
        }
    }, {
        key: 'updatePlayerPosition',
        value: function updatePlayerPosition(pos) {
            this.playerPositionY = pos.y;
        }
    }, {
        key: 'getColliders',
        value: function getColliders() {
            var colliders = [];
            this.activeObstacles.forEach(function (obstacle) {
                colliders.push(obstacle.getColliders());
            });
            return colliders;
        }
    }]);

    return UtilObstacleGenerator;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var UtilPreloader = (function () {
    function UtilPreloader() {
        _classCallCheck(this, UtilPreloader);
    }

    _createClass(UtilPreloader, [{
        key: 'preload',
        value: function preload(game) {
            this.loadSprites(game);
            this.loadSpriteSheets(game);
            this.loadAudio(game);
        }
    }, {
        key: 'loadSprites',

        // Asset Loading...
        value: function loadSprites(game) {
            // background
            game.load.image('bg-space', 'images/bg-space.jpg');
            game.load.image('bg-stars-small', 'images/bg-stars-small.png');
            game.load.image('bg-stars-dense', 'images/bg-stars-small-dense.png');
            game.load.image('bg-stars-large', 'images/bg-stars-large.png');
            game.load.image('bg-horizon', 'images/bg-horizon-gradient.png');
            game.load.image('bg-mountains-01', 'images/bg-mountains-01.png');
            game.load.image('bg-mountains-02', 'images/bg-mountains-02.png');
            // ground
            game.load.image('ground', 'images/ground.jpg');
            game.load.image('vignette', 'images/vignette.png');
        }
    }, {
        key: 'loadSpriteSheets',
        value: function loadSpriteSheets(game) {
            // player
            game.load.spritesheet('player.toot', 'images/toot-spritesheet.png', 64, 96);
            game.load.spritesheet('player.blast', 'images/blast-spritesheet.png', 60, 63);
            // Obstacles
            game.load.spritesheet('obs.saucer', 'images/saucer-spritesheet.png', 276, 100);
            game.load.spritesheet('obs.probe', 'images/probe-spritesheet.png', 128, 107);
        }
    }, {
        key: 'loadAudio',
        value: function loadAudio(game) {
            game.load.audio('player.fart', 'sounds/fart-02.wav');
            game.load.audio('obs.saucer.ufo', 'sounds/ufo-01.wav');
        }
    }]);

    return UtilPreloader;
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy5qcyIsIm1haW4uanMiLCJjaGFyYWN0ZXIvcGxheWVyLmpzIiwiY2hhcmFjdGVyL3Byb2JlLmpzIiwiY2hhcmFjdGVyL3NhdWNlci5qcyIsInNjcmVlbi9ib290LmpzIiwic2NyZWVuL21lbnUuanMiLCJzY3JlZW4vcGxheS5qcyIsImVudmlyb25tZW50L2JhY2tncm91bmQuanMiLCJlbnZpcm9ubWVudC9ncm91bmQuanMiLCJlbnZpcm9ubWVudC92aWduZXR0ZS5qcyIsInV0aWwvZ2FtZS5qcyIsInV0aWwvb2JzdGFjbGVnZW5lcmF0b3IuanMiLCJ1dGlsL3ByZWxvYWRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksUUFBUSxHQUFHOztBQUVYLFNBQUssRUFBRSxJQUFJO0FBQ1gsV0FBTyxFQUFFLEdBQUc7O0FBRVosUUFBSSxFQUFFLElBQUk7O0FBRVYsVUFBTSxFQUFFO0FBQ0osYUFBSyxFQUFFLEtBQUs7QUFDWixvQkFBWSxFQUFFLEdBQUc7QUFDakIsWUFBSSxFQUFFLEtBQUs7S0FDZDs7QUFFRCxZQUFRLEVBQUU7QUFDTixhQUFLLEVBQUUsS0FBSztBQUNaLFlBQUksRUFBRSxLQUFLO0tBQ2Q7O0NBRUosQ0FBQzs7O0FDbEJGLElBQUksSUFBSSxHQUFHOztBQUVQLFdBQU8sRUFBRSxHQUFHO0FBQ1osZ0JBQVksRUFBRSxHQUFHO0FBQ2pCLG1CQUFlLEVBQUUsQ0FBQzs7QUFFbEIsaUJBQWEsRUFBRSxLQUFLOzs7QUFHcEIsYUFBUyxFQUFFLEVBQUU7QUFDYixlQUFXLEVBQUUsRUFBRTtBQUNmLFlBQVEsRUFBRSxFQUFFO0FBQ1osTUFBRSxFQUFFLEVBQUU7Q0FDVCxDQUFDOztBQUVGLElBQUksR0FBRyxHQUFHLFNBQU4sR0FBRyxHQUFjO0FBQ2pCLFFBQUksSUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7QUFDdEIsUUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0NBQ2hCLENBQUM7Ozs7Ozs7SUNqQkks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QUFDWixnQkFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLG9CQUFvQixDQUFDLENBQUM7QUFDckQsZ0JBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixFQUFFLG1CQUFtQixDQUFDLENBQUM7U0FDMUQ7OztXQXhDQyxhQUFhIiwiZmlsZSI6ImdhbWUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHRyQ29uZmlnID0ge1xuXG4gICAgZGVidWc6IHRydWUsXG4gICAgZ3Jhdml0eTogMzAwLFxuXG4gICAgbXV0ZTogdHJ1ZSxcblxuICAgIHBsYXllcjoge1xuICAgICAgICBkZWJ1ZzogZmFsc2UsXG4gICAgICAgIGZhcnRTdHJlbmd0aDogMjUwLFxuICAgICAgICBtdXRlOiBmYWxzZVxuICAgIH0sXG5cbiAgICBvYnN0YWNsZToge1xuICAgICAgICBkZWJ1ZzogZmFsc2UsXG4gICAgICAgIG11dGU6IGZhbHNlXG4gICAgfVxuXG59O1xuIiwidmFyIHRvb3QgPSB7XG4gICAgLy9ncmF2aXR5OiAoMzAwICogMC4yNyksXG4gICAgZ3Jhdml0eTogMzAwLFxuICAgIGZhcnRTdHJlbmd0aDogMjUwLFxuICAgIGN1cnJlbnREaXN0YW5jZTogMCxcblxuICAgIHNvdW5kc0VuYWJsZWQ6IGZhbHNlLFxuXG4gICAgLy8gbmFtZXNwYWNpbmdcbiAgICBjaGFyYWN0ZXI6IHt9LFxuICAgIGVudmlyb25tZW50OiB7fSxcbiAgICBvYnN0YWNsZToge30sXG4gICAgdWk6IHt9XG59O1xuXG52YXIgcnVuID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGdhbWUgPSBuZXcgR2FtZSgpO1xuICAgIGdhbWUuc3RhcnQoKTtcbn07XG4iLCJcbmNsYXNzIENoYXJQbGF5ZXIge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0ge307XG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcbiAgICAgICAgdmFyIHN0YXJ0WCA9IGdhbWUud29ybGQud2lkdGggKiAwLjE1O1xuICAgICAgICB2YXIgc3RhcnRZID0gZ2FtZS53b3JsZC5oZWlnaHQgLSAyNTY7XG5cbiAgICAgICAgdGhpcy5zcHJpdGVUb290ID0gZ2FtZS5hZGQuc3ByaXRlKHN0YXJ0WCwgc3RhcnRZLCAncGxheWVyLnRvb3QnKTtcbiAgICAgICAgZ2FtZS5waHlzaWNzLmFyY2FkZS5lbmFibGUodGhpcy5zcHJpdGVUb290KTtcblxuICAgICAgICB0aGlzLnNwcml0ZVRvb3QuYm9keS5ncmF2aXR5LnkgPSB0ckNvbmZpZy5ncmF2aXR5O1xuICAgICAgICB0aGlzLnNwcml0ZVRvb3QuYm9keS5jb2xsaWRlV29ybGRCb3VuZHMgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuc3ByaXRlVG9vdC5hbmltYXRpb25zLmFkZCgncnVuJywgWzUsIDYsIDcsIDhdLCA2LCB0cnVlKTtcbiAgICAgICAgdGhpcy5zcHJpdGVUb290LmFuaW1hdGlvbnMuYWRkKCdsYW5kJywgWzUsIDYsIDcsIDhdLCAyLCB0cnVlKTtcblxuICAgICAgICAvLyBibGFzdFxuICAgICAgICB0aGlzLnNwcml0ZUJsYXN0ID0gZ2FtZS5hZGQuc3ByaXRlKHN0YXJ0WCAtIDYwLCBzdGFydFkgKyA2MCwgJ3BsYXllci5ibGFzdCcpO1xuICAgICAgICB0aGlzLnNwcml0ZUJsYXN0LmFuaW1hdGlvbnMuYWRkKCdmYXJ0JywgWzEsIDMsIDQsIDQsIDBdLCAxMCwgZmFsc2UpO1xuXG4gICAgICAgIHRoaXMuc291bmRGYXJ0ID0gZ2FtZS5hZGQuYXVkaW8oJ3BsYXllci5mYXJ0Jyk7XG4gICAgICAgIHRoaXMuc291bmRGYXJ0LmFsbG93TXVsdGlwbGUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB1cGRhdGUoZ2FtZSkge1xuICAgICAgICAvLyAgUmVzZXQgdGhlIHBsYXllcnMgdmVsb2NpdHkgKG1vdmVtZW50KVxuICAgICAgICB0aGlzLnNwcml0ZVRvb3QuYm9keS52ZWxvY2l0eS54ID0gMDtcblxuICAgICAgICBpZiAoZ2FtZS5pbnB1dC5hY3RpdmVQb2ludGVyLmlzRG93bikge1xuXG4gICAgICAgICAgICB0aGlzLnNwcml0ZVRvb3QuYm9keS52ZWxvY2l0eS55ID0gdHJDb25maWcucGxheWVyLmZhcnRTdHJlbmd0aCAqIC0xO1xuICAgICAgICAgICAgdGhpcy5zcHJpdGVCbGFzdC5hbmltYXRpb25zLnBsYXkoJ2ZhcnQnKTtcblxuICAgICAgICAgICAgaWYgKCF0ckNvbmZpZy5tdXRlICYmICF0ckNvbmZpZy5wbGF5ZXIubXV0ZSkge1xuICAgICAgICAgICAgICAgIC8vdGhpcy5zb3VuZEZhcnQucGxheSgnJywgMC4zNSwgMSwgZmFsc2UsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNvdW5kRmFydC5wbGF5KCcnLCAwLCAxLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3ByaXRlVG9vdC5ib2R5LnRvdWNoaW5nLmRvd24pIHtcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlVG9vdC5hbmltYXRpb25zLnBsYXkoJ3J1bicpO1xuICAgICAgICAgICAgdGhpcy5zcHJpdGVCbGFzdC5mcmFtZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5zcHJpdGVUb290LmJvZHkudmVsb2NpdHkueSA+IDAgJiZcbiAgICAgICAgICAgICAgICAgdGhpcy5zcHJpdGVUb290LmJvZHkudmVsb2NpdHkueSA+ICh0b290LmZhcnRTdHJlbmd0aCAqIDAuNjYpKSB7XG4gICAgICAgICAgICB0aGlzLnNwcml0ZVRvb3QuYW5pbWF0aW9ucy5wbGF5KCdsYW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNwcml0ZVRvb3QuZnJhbWUgPSA0O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zcHJpdGVCbGFzdC5wb3NpdGlvbi54ID0gdGhpcy5zcHJpdGVUb290LnBvc2l0aW9uLnggLSAzODtcbiAgICAgICAgdGhpcy5zcHJpdGVCbGFzdC5wb3NpdGlvbi55ID0gdGhpcy5zcHJpdGVUb290LnBvc2l0aW9uLnkgKyA4MDtcblxuICAgICAgICAvLyB1cGRhdGUgdG9vdC5zdGF0ZSB2YXJpYWJsZVxuICAgICAgICB0aGlzLm5vdGlmeSgncG9zaXRpb24nLCB7XG4gICAgICAgICAgICB4OiB0aGlzLnNwcml0ZVRvb3QucG9zaXRpb24ueCxcbiAgICAgICAgICAgIHk6IHRoaXMuc3ByaXRlVG9vdC5wb3NpdGlvbi55ICsgNDBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRyQ29uZmlnLmRlYnVnICYmIHRyQ29uZmlnLnBsYXllci5kZWJ1Zykge1xuICAgICAgICAgICAgZ2FtZS5kZWJ1Zy5ib2R5KHRoaXMuc3ByaXRlVG9vdCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRDb2xsaWRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZVRvb3Q7XG4gICAgfVxuXG4gICAgbm90aWZ5KGV2ZW50LCBhcmcpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrcyA9IHRoaXMub2JzZXJ2ZXJzW2V2ZW50XTtcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFja3MgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2tzLmZvckVhY2goY2FsbGJhY2sgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2soYXJnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVnaXN0ZXJPYnNlcnZlcihldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9ic2VydmVyc1tldmVudF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyc1tldmVudF0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9ic2VydmVyc1tldmVudF0ucHVzaChjYWxsYmFjayk7XG4gICAgfVxufVxuIiwiXG5jbGFzcyBDaGFyUHJvYmUge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudmVsb2NpdHkgPSAyMDA7XG4gICAgICAgIHRoaXMucm90TWF4ID0gMC4wNTtcbiAgICAgICAgdGhpcy5yb3RJbmMgPSAwLjAwNTtcbiAgICB9XG5cbiAgICBjcmVhdGUoZ2FtZSkge1xuICAgICAgICB2YXIgdyA9IGdhbWUud29ybGQud2lkdGg7XG4gICAgICAgIHZhciBoID0gZ2FtZS53b3JsZC5oZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5jb2xsaXNpb25Hcm91cCA9IGdhbWUuYWRkLmdyb3VwKCk7XG4gICAgICAgIGdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKHRoaXMuY29sbGlzaW9uR3JvdXApO1xuICAgICAgICB0aGlzLmNvbGxpc2lvbkdyb3VwLmNoZWNrV29ybGRCb3VuZHMgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuc3ByaXRlUHJvYmUgPSB0aGlzLmNvbGxpc2lvbkdyb3VwLmNyZWF0ZSh3LCAxMjgsICdvYnMucHJvYmUnKTtcbiAgICAgICAgdGhpcy5zcHJpdGVQcm9iZS5zY2FsZS5zZXQoMC41LCAwLjUpO1xuICAgICAgICB0aGlzLnNwcml0ZVByb2JlLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgICAgIGdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKHRoaXMuc3ByaXRlUHJvYmUpO1xuICAgICAgICB0aGlzLnNwcml0ZVByb2JlLmJvZHkuYWxsb3dHcmF2aXR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3ByaXRlUHJvYmUuYm9keS5pbW1vdmFibGUgPSB0cnVlO1xuICAgIH1cblxuICAgIHVwZGF0ZShnYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLnNwcml0ZVByb2JlLnJvdGF0aW9uID49IHRoaXMucm90TWF4IHx8XG4gICAgICAgICAgICB0aGlzLnNwcml0ZVByb2JlLnJvdGF0aW9uIDw9ICh0aGlzLnJvdE1heCAqIC0xKSkge1xuICAgICAgICAgICAgdGhpcy5yb3RJbmMgPSB0aGlzLnJvdEluYyAqIC0xO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3ByaXRlUHJvYmUucm90YXRpb24gKz0gdGhpcy5yb3RJbmM7XG5cbiAgICAgICAgaWYgKHRyQ29uZmlnLm9ic3RhY2xlLmRlYnVnKSB7XG4gICAgICAgICAgICB0aGlzLmNvbGxpc2lvbkdyb3VwLmZvckVhY2goY2hpbGQgPT4ge1xuICAgICAgICAgICAgICAgIGdhbWUuZGVidWcuYm9keShjaGlsZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGluV29ybGQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZVByb2JlLmluV29ybGQ7XG4gICAgfVxuXG4gICAgc3RvcCgpIHtcbiAgICB9XG5cbiAgICByZXNldCh4LCB5KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdyZXNldHRpbmcgUHJvYmUgdG8gJyArIHggKyAnLCAnICsgeSk7XG4gICAgICAgIHRoaXMuY29sbGlzaW9uR3JvdXAuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIGl0ZW0ucmVzZXQoeCwgeSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbGxpc2lvbkdyb3VwLnNldEFsbCgnYm9keS52ZWxvY2l0eS54JywgdGhpcy52ZWxvY2l0eSAqIC0xKTtcbiAgICB9XG5cbiAgICBnZXRDb2xsaWRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbGxpc2lvbkdyb3VwO1xuICAgIH1cbn1cbiIsImNsYXNzIENoYXJTYXVjZXIge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudmVsb2NpdHkgPSAzMDA7XG4gICAgICAgIHRoaXMucm90TWF4ID0gMC4wMjU7XG4gICAgICAgIHRoaXMucm90SW5jID0gMC4wMDI1O1xuICAgIH1cblxuICAgIGNyZWF0ZShnYW1lKSB7XG4gICAgICAgIHZhciB3ID0gZ2FtZS53b3JsZC53aWR0aDtcbiAgICAgICAgdmFyIGggPSBnYW1lLndvcmxkLmhlaWdodDtcblxuICAgICAgICB0aGlzLnNvdW5kVWZvID0gZ2FtZS5hZGQuYXVkaW8oJ29icy5zYXVjZXIudWZvJyk7XG4gICAgICAgIHRoaXMuc291bmRVZm8uYWxsb3dNdWx0aXBsZSA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuY29sbGlzaW9uR3JvdXAgPSBnYW1lLmFkZC5ncm91cCgpO1xuICAgICAgICBnYW1lLnBoeXNpY3MuYXJjYWRlLmVuYWJsZSh0aGlzLmNvbGxpc2lvbkdyb3VwKTtcbiAgICAgICAgLy90aGlzLmNvbGxpc2lvbkdyb3VwLmJvZHkuYWxsb3dHcmF2aXR5ID0gZmFsc2U7XG4gICAgICAgIC8vdGhpcy5jb2xsaXNpb25Hcm91cC5ib2R5LmltbW92YWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuY29sbGlzaW9uR3JvdXAuY2hlY2tXb3JsZEJvdW5kcyA9IHRydWU7XG5cbiAgICAgICAgLy90aGlzLnNwcml0ZVNhdWNlciA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKHcsIDEyOCwgJ3NhdWNlcicpO1xuICAgICAgICB0aGlzLnNwcml0ZVNhdWNlciA9IHRoaXMuY29sbGlzaW9uR3JvdXAuY3JlYXRlKHcsIDEyOCwgJ29icy5zYXVjZXInKTtcbiAgICAgICAgdGhpcy5zcHJpdGVTYXVjZXIuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcbiAgICAgICAgZ2FtZS5waHlzaWNzLmFyY2FkZS5lbmFibGUodGhpcy5zcHJpdGVTYXVjZXIpO1xuICAgICAgICB0aGlzLnNwcml0ZVNhdWNlci5ib2R5LmFsbG93R3Jhdml0eSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNwcml0ZVNhdWNlci5ib2R5LmltbW92YWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuc3ByaXRlU2F1Y2VyLmJvZHkuc2V0U2l6ZSg2NCwgMjAsIC0xMCwgLTM3KTtcblxuICAgICAgICAvLyBBZGRpdGlvbmFsIGNvbGxpZGVyIGJveGVzIHRvIG1hdGNoIHRoZSBzaGFwZSBvZiB0aGUgc2F1Y2VyIG1vcmUgY2xvc2VseVxuICAgICAgICB2YXIgYzEgPSB0aGlzLmNvbGxpc2lvbkdyb3VwLmNyZWF0ZSh3LCAxMjgsICcnKTtcbiAgICAgICAgYzEuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcbiAgICAgICAgZ2FtZS5waHlzaWNzLmFyY2FkZS5lbmFibGUoYzEpO1xuICAgICAgICBjMS5ib2R5LmFsbG93R3Jhdml0eSA9IGZhbHNlO1xuICAgICAgICBjMS5ib2R5LmltbW92YWJsZSA9IHRydWU7XG4gICAgICAgIGMxLmJvZHkuc2V0U2l6ZSgyMDAsIDIyLCAtNCwgLTE2KTtcblxuICAgICAgICB2YXIgYzIgPSB0aGlzLmNvbGxpc2lvbkdyb3VwLmNyZWF0ZSh3LCAxMjgsICcnKTtcbiAgICAgICAgYzIuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcbiAgICAgICAgZ2FtZS5waHlzaWNzLmFyY2FkZS5lbmFibGUoYzIpO1xuICAgICAgICBjMi5ib2R5LmFsbG93R3Jhdml0eSA9IGZhbHNlO1xuICAgICAgICBjMi5ib2R5LmltbW92YWJsZSA9IHRydWU7XG4gICAgICAgIGMyLmJvZHkuc2V0U2l6ZSgyNzAsIDMyLCAtNCwgMTEpO1xuXG4gICAgICAgIHZhciBjMyA9IHRoaXMuY29sbGlzaW9uR3JvdXAuY3JlYXRlKHcsIDEyOCwgJycpO1xuICAgICAgICBjMy5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICAgICAgICBnYW1lLnBoeXNpY3MuYXJjYWRlLmVuYWJsZShjMyk7XG4gICAgICAgIGMzLmFsbG93R3Jhdml0eSA9IGZhbHNlO1xuICAgICAgICBjMy5ib2R5LmltbW92YWJsZSA9IHRydWU7XG4gICAgICAgIGMzLmJvZHkuc2V0U2l6ZSgyMDAsIDE2LCAtNCwgMzUpO1xuICAgIH1cblxuICAgIHVwZGF0ZShnYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLnNwcml0ZVNhdWNlci5yb3RhdGlvbiA+PSB0aGlzLnJvdE1heCB8fFxuICAgICAgICAgICAgdGhpcy5zcHJpdGVTYXVjZXIucm90YXRpb24gPD0gKHRoaXMucm90TWF4ICogLTEpKSB7XG4gICAgICAgICAgICB0aGlzLnJvdEluYyA9IHRoaXMucm90SW5jICogLTE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zcHJpdGVTYXVjZXIucm90YXRpb24gKz0gdGhpcy5yb3RJbmM7XG5cbiAgICAgICAgaWYgKHRoaXMuZGVidWcpIHtcbiAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uR3JvdXAuZm9yRWFjaChmdW5jdGlvbihjaGlsZCkge1xuICAgICAgICAgICAgICAgIGdhbWUuZGVidWcuYm9keShjaGlsZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuc291bmRVZm8uc3RvcCgpO1xuICAgIH1cblxuICAgIHJlc2V0KHgsIHkpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3Jlc2V0dGluZyBzYXVjZXIgdG8gJyArIHggKyAnLCAnICsgeSk7XG4gICAgICAgIHRoaXMuY29sbGlzaW9uR3JvdXAuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIGl0ZW0ucmVzZXQoeCwgeSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbGxpc2lvbkdyb3VwLnNldEFsbCgnYm9keS52ZWxvY2l0eS54JywgdGhpcy52ZWxvY2l0eSAqIC0xKTtcblxuICAgICAgICBpZiAoIXRyQ29uZmlnLm11dGUgJiYgIXRyQ29uZmlnLm9ic3RhY2xlLm11dGUpIHtcbiAgICAgICAgICAgIHRoaXMuc291bmRVZm8ucGxheSgnJywgMCwgMSwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0Q29sbGlkZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xsaXNpb25Hcm91cDtcbiAgICB9XG5cbiAgICBpbldvcmxkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGVTYXVjZXIuaW5Xb3JsZDtcbiAgICB9XG59XG4iLCIvKipcbiAqIFNjcmVlbkJvb3RcbiAqXG4gKiBUaGlzIGlzIHRoZSBsb2dvL2xvYWRpbmcgc2NyZWVuIHRoYXQgc2hvd3Mgd2hlbiB0aGUgZ2FtZSBzdGFydHMgdXAuXG4gKiAgICAgIC0gU2hvdyBjb21wYW55IGxvZ29cbiAqICAgICAgLSBMb2FkIGdhbWUgYXNzZXRzIChncmFwaGljcywgc291bmRzLCBldGMuLi4pXG4gKiAgICAgIC0gU2hvdyBsb2FkaW5nIHByb2dyZXNzXG4gKiAgICAgIC0gU2V0IG1vb2QgZm9yIGdhbWVcbiAqXG4gKi9cbmNsYXNzIFNjcmVlbkJvb3Qge1xuXG4gICAgcHJlbG9hZChnYW1lKSB7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gbW9tZW50KCk7XG4gICAgICAgIHRoaXMuaXNMb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5taW5UaW1lID0gbW9tZW50KCkuYWRkKFNjcmVlbkJvb3QuTUlOX0JPT1RfVElNRSwgJ3NlY29uZHMnKTtcblxuICAgICAgICBjb25zb2xlLmxvZygnU2NyZWVuQm9vdC5wcmVsb2FkJyk7XG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcbiAgICAgICAgdmFyIGxvYWRUaW1lID0gbW9tZW50KCk7XG4gICAgICAgIHZhciBkdXJhdGlvbiA9IG1vbWVudC51dGMobG9hZFRpbWUuZGlmZih0aGlzLnN0YXJ0VGltZSkpO1xuICAgICAgICBjb25zb2xlLmxvZygnU2NyZWVuQm9vdCBhc3NldHMgbG9hZGVkIGluICcgKyBkdXJhdGlvbi5mb3JtYXQoJ0hIOm1tOnNzOlNTUycpKTtcbiAgICAgICAgdGhpcy5pc0xvYWRlZCA9IHRydWU7XG5cbiAgICAgICAgdmFyIHggPSBnYW1lLndvcmxkLmNlbnRlclg7XG4gICAgICAgIHZhciB5ID0gZ2FtZS53b3JsZC5jZW50ZXJZO1xuICAgICAgICB2YXIgbXNnID0gXCJNb3JwaFplcm8gcHJlc2VudHNcIjtcbiAgICAgICAgdmFyIHRleHQgPSBnYW1lLmFkZC50ZXh0KHgsIHksIG1zZywge1xuICAgICAgICAgICAgZm9udDogXCIzMnB4IEFyaWFsXCIsXG4gICAgICAgICAgICBmaWxsOiBcIiNkZGRkZDlcIixcbiAgICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiXG4gICAgICAgIH0pO1xuICAgICAgICB0ZXh0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgfVxuXG4gICAgdXBkYXRlKGdhbWUpIHtcbiAgICAgICAgdmFyIG5vdyA9IG1vbWVudCgpO1xuICAgICAgICBpZiAodGhpcy5pc0xvYWRlZCAmJiBub3cuaXNBZnRlcih0aGlzLm1pblRpbWUpKSB7XG4gICAgICAgICAgICBnYW1lLnN0YXRlLnN0YXJ0KCdtZW51Jyk7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuU2NyZWVuQm9vdC5NSU5fQk9PVF9USU1FID0gMS41OyAvLyBzZWNvbmRzXG4iLCIvKipcbiAqIFNjcmVlbk1lbnVcbiAqXG4gKiBUaGlzIGlzIHRoZSBtZW51IHNjcmVlbi4gT3B0aW9ucyBmb3I6XG4gKiAgICAgIC0gU3RhcnRpbmcgYSBnYW1lXG4gKiAgICAgIC0gQWJvdXQvQ3JlZGl0cyBwYWdlXG4gKiAgICAgIC0gU2V0dGluZ3MgcGFnZT9cbiAqXG4gKi9cbmNsYXNzIFNjcmVlbk1lbnUge1xuXG4gICAgcHJlbG9hZChnYW1lKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTY3JlZW5NZW51LnByZWxvYWQgc3RhcnQuLi4nKTtcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBtb21lbnQoKTtcbiAgICAgICAgdGhpcy5pc0xvYWRlZCA9IGZhbHNlO1xuXG4gICAgICAgIHZhciBwcmVsb2FkZXIgPSBuZXcgVXRpbFByZWxvYWRlcigpO1xuICAgICAgICBwcmVsb2FkZXIucHJlbG9hZChnYW1lKTtcbiAgICB9XG5cbiAgICBjcmVhdGUoZ2FtZSkge1xuICAgICAgICB2YXIgbG9hZFRpbWUgPSBtb21lbnQoKTtcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gbW9tZW50LnV0Yyhsb2FkVGltZS5kaWZmKHRoaXMuc3RhcnRUaW1lKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTY3JlZW5NZW51IGFzc2V0cyBsb2FkZWQgaW4gJyArIGR1cmF0aW9uLmZvcm1hdCgnSEg6bW06c3M6U1NTJykpO1xuICAgICAgICB0aGlzLmlzTG9hZGVkID0gdHJ1ZTtcblxuICAgICAgICB2YXIgeCA9IGdhbWUud29ybGQuY2VudGVyWDtcbiAgICAgICAgdmFyIHkgPSBnYW1lLndvcmxkLmNlbnRlclk7XG4gICAgICAgIHZhciBtc2cgPSBcInBsYXlcIlxuICAgICAgICB2YXIgdGV4dCA9IGdhbWUuYWRkLnRleHQoeCwgeSwgbXNnLCB7XG4gICAgICAgICAgICBmb250OiBcIjMycHggQXJpYWxcIixcbiAgICAgICAgICAgIGZpbGw6IFwiI2RkZGRkOVwiLFxuICAgICAgICAgICAgYWxpZ246IFwiY2VudGVyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRleHQuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcblxuICAgICAgICBnYW1lLmlucHV0Lm9uRG93bi5hZGRPbmNlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZ2FtZS5zdGF0ZS5zdGFydCgncGxheScpO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICB9XG5cbiAgICB1cGRhdGUoZ2FtZSkge1xuXG4gICAgfVxuXG59XG4iLCIvKipcbiAqIFNjcmVlblBsYXlcbiAqXG4gKiBUaGlzIGlzIHRoZSBtYWluIHBsYXkvZ2FtZSBzY3JlZW4uXG4gKlxuICovXG5jbGFzcyBTY3JlZW5QbGF5IHtcblxuICAgIHByZWxvYWQoZ2FtZSkge1xuICAgICAgICAvLyBDcmVhdGUgZ2FtZSBvYmplY3RzLiBPcmRlciBoZXJlIG1hdHRlcnMhIExheWVyZWQgQmFjayAtPiBGcm9udFxuICAgICAgICB0aGlzLm9iamVjdHMgPSBbXTtcbiAgICAgICAgdGhpcy5vYmplY3RzLnB1c2gobmV3IEVudkJhY2tncm91bmQoKSk7XG5cbiAgICAgICAgdGhpcy5ncm91bmQgPSBuZXcgRW52R3JvdW5kKCk7XG4gICAgICAgIHRoaXMub2JqZWN0cy5wdXNoKHRoaXMuZ3JvdW5kKTtcblxuICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBDaGFyUGxheWVyKCk7XG4gICAgICAgIHRoaXMub2JqZWN0cy5wdXNoKHRoaXMucGxheWVyKTtcblxuICAgICAgICB2YXIgb2JzdGFjbGVzID0gbmV3IFV0aWxPYnN0YWNsZUdlbmVyYXRvcigpO1xuICAgICAgICB0aGlzLm9iamVjdHMucHVzaChvYnN0YWNsZXMpO1xuICAgICAgICB0aGlzLnBsYXllci5yZWdpc3Rlck9ic2VydmVyKFxuICAgICAgICAgICAgJ3Bvc2l0aW9uJyxcbiAgICAgICAgICAgIGZ1bmN0aW9uKHBvcykge1xuICAgICAgICAgICAgICAgIG9ic3RhY2xlcy51cGRhdGVQbGF5ZXJQb3NpdGlvbihwb3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICB0aGlzLm9ic3RhY2xlcyA9IG9ic3RhY2xlcztcblxuICAgICAgICB0aGlzLm9iamVjdHMucHVzaChuZXcgRW52VmlnbmV0dGUoKSk7XG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcbiAgICAgICAgaWYgKHRyQ29uZmlnLmRlYnVnKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRzID0gbmV3IFN0YXRzKCk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuc3RhdHMuZG9tRWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnN0YXRzLmRvbUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgdGhpcy5zdGF0cy5kb21FbGVtZW50LnN0eWxlLnRvcCA9ICcwcHgnO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXR1cEdhbWUoZ2FtZSk7XG5cbiAgICAgICAgLy8gY3JlYXRlKClcbiAgICAgICAgdGhpcy5vYmplY3RzLmZvckVhY2gob2JqID0+IHtcbiAgICAgICAgICAgIG9iai5jcmVhdGUoZ2FtZSk7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgdXBkYXRlKGdhbWUpIHtcblxuICAgICAgICBpZiAodHJDb25maWcuZGVidWcpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHMuYmVnaW4oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHBsYXllciB2cyBncm91bmRcbiAgICAgICAgZ2FtZS5waHlzaWNzLmFyY2FkZS5jb2xsaWRlKFxuICAgICAgICAgICAgdGhpcy5wbGF5ZXIuZ2V0Q29sbGlkZXJzKCksXG4gICAgICAgICAgICB0aGlzLmdyb3VuZC5nZXRDb2xsaWRlcnMoKVxuICAgICAgICApO1xuICAgICAgICAvLyBwbGF5ZXIgdnMgb2JzdGFjbGVzXG4gICAgICAgIGdhbWUucGh5c2ljcy5hcmNhZGUuY29sbGlkZShcbiAgICAgICAgICAgIHRoaXMucGxheWVyLmdldENvbGxpZGVycygpLFxuICAgICAgICAgICAgdGhpcy5vYnN0YWNsZXMuZ2V0Q29sbGlkZXJzKCksXG4gICAgICAgICAgICB0aGlzLm9ic3RhY2xlQ29sbGlzaW9uSGFuZGxlcixcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICB0aGlzXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gdXBkYXRlIGFsbCBvYmplY3RzXG4gICAgICAgIHRoaXMub2JqZWN0cy5mb3JFYWNoKG9iaiA9PiB7XG4gICAgICAgICAgICBvYmoudXBkYXRlKGdhbWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodHJDb25maWcuZGVidWcpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHMuZW5kKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvYnN0YWNsZUNvbGxpc2lvbkhhbmRsZXIocGxheWVyLCBvYnN0YWNsZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnY29sbGlzaW9uIGRldGVjdGVkIScpO1xuICAgIH1cblxuICAgIHNldHVwR2FtZShnYW1lKSB7XG4gICAgICAgIGdhbWUucGh5c2ljcy5zdGFydFN5c3RlbShQaGFzZXIuUGh5c2ljcy5BUkNBREUpO1xuICAgICAgICBnYW1lLnNjYWxlLnNjYWxlTW9kZSA9IFBoYXNlci5TY2FsZU1hbmFnZXIuU0hPV19BTEw7XG4gICAgICAgIGdhbWUuc2NhbGUucGFnZUFsaWduSG9yaXpvbnRhbGx5ID0gdHJ1ZTtcbiAgICAgICAgZ2FtZS5zY2FsZS5wYWdlQWxpZ25WZXJ0aWNhbGx5ID0gdHJ1ZTtcbiAgICAgICAgZ2FtZS5zY2FsZS5zZXRTY3JlZW5TaXplKHRydWUpO1xuICAgICAgICBnYW1lLnNjYWxlLnJlZnJlc2goKTtcbiAgICB9XG59XG4iLCJcbmNsYXNzIEVudkJhY2tncm91bmQge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcbiAgICAgICAgdmFyIHcgPSBnYW1lLndvcmxkLndpZHRoO1xuICAgICAgICB2YXIgaCA9IGdhbWUud29ybGQuaGVpZ2h0O1xuICAgICAgICB0aGlzLnNwYWNlQmcgPSBnYW1lLmFkZC50aWxlU3ByaXRlKDAsIDAsIHcsIGgsICdiZy1zcGFjZScpO1xuICAgICAgICB0aGlzLnN0YXJzTGcgPSBnYW1lLmFkZC50aWxlU3ByaXRlKDAsIDAsIHcsIGgsICdiZy1zdGFycy1sYXJnZScpO1xuICAgICAgICB0aGlzLnNwYWNlRHMgPSBnYW1lLmFkZC50aWxlU3ByaXRlKDAsIDAsIHcsIGgsICdiZy1zdGFycy1kZW5zZScpO1xuICAgICAgICB0aGlzLnN0YXJzU20gPSBnYW1lLmFkZC50aWxlU3ByaXRlKDAsIDAsIHcsIGgsICdiZy1zdGFycy1zbWFsbCcpO1xuXG4gICAgICAgIHRoaXMuaG9yaXpvbiA9IGdhbWUuYWRkLnRpbGVTcHJpdGUoMCwgMCwgdywgaCwgJ2JnLWhvcml6b24nKTtcblxuICAgICAgICB0aGlzLm1vdW50YWluczEgPSBnYW1lLmFkZC50aWxlU3ByaXRlKDAsIDAsIHcsIGgsICdiZy1tb3VudGFpbnMtMDEnKTtcbiAgICAgICAgdGhpcy5tb3VudGFpbnMyID0gZ2FtZS5hZGQudGlsZVNwcml0ZSgwLCAwLCB3LCBoLCAnYmctbW91bnRhaW5zLTAyJyk7XG4gICAgfVxuXG4gICAgdXBkYXRlKGdhbWUpIHtcbiAgICAgICAgdGhpcy5zcGFjZUJnLnRpbGVQb3NpdGlvbi54IC09IDAuMDc1O1xuICAgICAgICB0aGlzLnN0YXJzTGcudGlsZVBvc2l0aW9uLnggLT0gMC4xMDA7XG4gICAgICAgIHRoaXMuc3BhY2VEcy50aWxlUG9zaXRpb24ueCAtPSAwLjEyNTtcbiAgICAgICAgdGhpcy5zdGFyc1NtLnRpbGVQb3NpdGlvbi54IC09IDAuMTUwO1xuXG4gICAgICAgIHRoaXMubW91bnRhaW5zMS50aWxlUG9zaXRpb24ueCAtPSAwLjIwO1xuICAgICAgICB0aGlzLm1vdW50YWluczIudGlsZVBvc2l0aW9uLnggLT0gMC4yNTtcbiAgICB9XG59XG4iLCJjbGFzcyBFbnZHcm91bmQge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcbiAgICAgICAgdmFyIHcgPSBnYW1lLndvcmxkLndpZHRoO1xuICAgICAgICB2YXIgaCA9IGdhbWUud29ybGQuaGVpZ2h0O1xuXG4gICAgICAgIHZhciB5UG9zID0gaCAtIDk3O1xuICAgICAgICB0aGlzLnNwcml0ZSA9IGdhbWUuYWRkLnRpbGVTcHJpdGUoMCwgeVBvcywgdywgaCwgJ2dyb3VuZCcpO1xuXG4gICAgICAgIGdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKHRoaXMuc3ByaXRlKTtcbiAgICAgICAgdGhpcy5zcHJpdGUuYm9keS5pbW1vdmFibGUgPSB0cnVlO1xuXG4gICAgICAgIC8vIGJ1ZyBpbiBwaGFzZXIgMi4zLjBcbiAgICAgICAgLy8gc2VlOiBodHRwOi8vd3d3Lmh0bWw1Z2FtZWRldnMuY29tL3RvcGljLzEzODU2LXByb2JsZW0td2l0aC1jb2xsaWRlLW1ldGhvZC1mcm9tLXBoeXNpY3MtYXJjYWRlLWluLWRpZmZlcmVudC12ZXJzaW9ucy1vZi1waGFzZXIvP3A9NzkwMzJcbiAgICAgICAgdGhpcy5zcHJpdGUucGh5c2ljc1R5cGUgPSBQaGFzZXIuU1BSSVRFO1xuICAgIH1cblxuICAgIHVwZGF0ZShnYW1lKSB7XG4gICAgICAgIHRoaXMuc3ByaXRlLnRpbGVQb3NpdGlvbi54IC09IDAuODU7XG4gICAgfVxuXG4gICAgZ2V0Q29sbGlkZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGU7XG4gICAgfVxufVxuIiwiY2xhc3MgRW52VmlnbmV0dGUge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcbiAgICAgICAgdmFyIHcgPSBnYW1lLndvcmxkLndpZHRoO1xuICAgICAgICB2YXIgaCA9IGdhbWUud29ybGQuaGVpZ2h0O1xuICAgICAgICB0aGlzLnYgPSBnYW1lLmFkZC5zcHJpdGUoMCwgMCwgJ3ZpZ25ldHRlJyk7XG4gICAgfVxuXG4gICAgdXBkYXRlKGdhbWUpIHtcbiAgICB9XG5cbn1cbiIsIlxuY2xhc3MgR2FtZSB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcblxuICAgICAgICBjb25zb2xlLmxvZygnLS0gLS0gLS0gLS0gICBUb290IFJpcHBpbmd0b24gLSBCbGFzdHMgT2ZmISAgIC0tIC0tIC0tIC0tJyk7XG5cbiAgICAgICAgdmFyIHBHYW1lID0gbmV3IFBoYXNlci5HYW1lKFxuICAgICAgICAgICAgMTMzNCwgNzUwLFxuICAgICAgICAgICAgUGhhc2VyLkFVVE8sXG4gICAgICAgICAgICAnJ1xuICAgICAgICApO1xuXG4gICAgICAgIHBHYW1lLnN0YXRlLmFkZCgnYm9vdCcsIG5ldyBTY3JlZW5Cb290KCkpO1xuICAgICAgICBwR2FtZS5zdGF0ZS5hZGQoJ21lbnUnLCBuZXcgU2NyZWVuTWVudSgpKTtcbiAgICAgICAgcEdhbWUuc3RhdGUuYWRkKCdwbGF5JywgbmV3IFNjcmVlblBsYXkoKSk7XG5cbiAgICAgICAgdGhpcy5wR2FtZSA9IHBHYW1lO1xuICAgIH1cblxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnBHYW1lLnN0YXRlLnN0YXJ0KCdib290Jyk7XG4gICAgfVxufVxuIiwiY2xhc3MgVXRpbE9ic3RhY2xlR2VuZXJhdG9yIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnBsYXllclBvc2l0aW9uWSA9IDA7XG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcblxuICAgICAgICB0aGlzLm9ic3RhY2xlUG9vbCA9IHtcbiAgICAgICAgICAgICdzYXVjZXInOiBbXG4gICAgICAgICAgICAgICAgbmV3IENoYXJTYXVjZXIoKSxcbiAgICAgICAgICAgICAgICBuZXcgQ2hhclNhdWNlcigpLFxuICAgICAgICAgICAgICAgIG5ldyBDaGFyU2F1Y2VyKClcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAncHJvYmUnOiBbXG4gICAgICAgICAgICAgICAgbmV3IENoYXJQcm9iZSgpLFxuICAgICAgICAgICAgICAgIG5ldyBDaGFyUHJvYmUoKSxcbiAgICAgICAgICAgICAgICBuZXcgQ2hhclByb2JlKClcbiAgICAgICAgICAgIF1cbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGdlbmVyYXRvciA9IHRoaXM7XG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMub2JzdGFjbGVQb29sKS5mb3JFYWNoKG9ic3RhY2xlVHlwZSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9ic3RhY2xlUG9vbFtvYnN0YWNsZVR5cGVdLmZvckVhY2gob2JzdGFjbGUgPT4ge1xuICAgICAgICAgICAgICAgIG9ic3RhY2xlLmNyZWF0ZShnYW1lKTtcbiAgICAgICAgICAgICAgICBnZW5lcmF0b3IucmVzZXRUbyhvYnN0YWNsZSwgLTIwMCwgLTIwMCk7XG4gICAgICAgICAgICAgICAgb2JzdGFjbGUuc3RvcCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWN0aXZlT2JzdGFjbGVzID0gW107XG4gICAgICAgIC8vIHRoaXMucmVzZXQoZ2FtZSwgdGhpcy5vYnN0YWNsZVBvb2wuc2F1Y2VyWzBdKTtcbiAgICAgICAgLy8gdGhpcy5hY3RpdmVPYnN0YWNsZXMucHVzaCh0aGlzLm9ic3RhY2xlUG9vbC5zYXVjZXJbMF0pO1xuICAgIH1cblxuICAgIHVwZGF0ZShnYW1lKSB7XG4gICAgICAgIHZhciBpbmFjdGl2ZSA9IFtdO1xuICAgICAgICB2YXIgbGVuID0gdGhpcy5hY3RpdmVPYnN0YWNsZXMubGVuZ3RoO1xuICAgICAgICB2YXIgaSwgb2JzdGFjbGU7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgb2JzdGFjbGUgPSB0aGlzLmFjdGl2ZU9ic3RhY2xlc1tpXTtcbiAgICAgICAgICAgIG9ic3RhY2xlLnVwZGF0ZShnYW1lKTtcblxuICAgICAgICAgICAgaWYgKCFvYnN0YWNsZS5pbldvcmxkKCkpIHtcbiAgICAgICAgICAgICAgICBvYnN0YWNsZS5zdG9wKCk7XG4gICAgICAgICAgICAgICAgaW5hY3RpdmUucHVzaChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxlbiA9IGluYWN0aXZlLmxlbmd0aDtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZU9ic3RhY2xlcy5zcGxpY2UoaW5hY3RpdmVbaV0sIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hZGROZXdPYnN0YWNsZXMoZ2FtZSk7XG4gICAgfVxuXG4gICAgYWRkTmV3T2JzdGFjbGVzKGdhbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlT2JzdGFjbGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBvYnN0YWNsZSA9IGdldE9ic3RhY2xlKCk7XG4gICAgICAgIHRoaXMucmVzZXQoZ2FtZSwgb2JzdGFjbGUpO1xuICAgICAgICB0aGlzLmFjdGl2ZU9ic3RhY2xlcy5wdXNoKG9ic3RhY2xlKTtcbiAgICB9XG5cbiAgICBnZXRSYW5kb21PYnN0YWNsZSgpIHtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLm9ic3RhY2xlUG9vbCk7XG4gICAgICAgIHZhciBudW1UeXBlcyA9IGtleXMubGVuZ3RoIC0gMTtcbiAgICAgICAgdmFyIGtleUlkeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG51bVR5cGVzKTtcbiAgICAgICAgdmFyIGtleSA9IGtleXNba2V5SWR4XTtcblxuICAgIH1cblxuICAgIHJlc2V0KGdhbWUsIG9ic3RhY2xlKSB7XG4gICAgICAgIHZhciB4ID0gZ2FtZS53b3JsZC53aWR0aCAtIDEwMDtcbiAgICAgICAgdmFyIG1pbnkgPSA2NTtcbiAgICAgICAgdmFyIG1heHkgPSBnYW1lLndvcmxkLmhlaWdodCAtIDE2NTtcblxuICAgICAgICB2YXIgeSA9IHRoaXMucGxheWVyUG9zaXRpb25ZO1xuICAgICAgICBjb25zb2xlLmxvZygncGxheWVyUG9zaXRpb25ZOiAnICsgdGhpcy5wbGF5ZXJQb3NpdGlvblkpO1xuICAgICAgICBpZiAoeSA8IG1pbnkpIHtcbiAgICAgICAgICAgIHkgPSBtaW55O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHkgPiBtYXh5KSB7XG4gICAgICAgICAgICB5ID0gbWF4eTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVzZXRUbyhvYnN0YWNsZSwgeCwgeSk7XG4gICAgfVxuXG4gICAgcmVzZXRUbyhvYnN0YWNsZSwgeCwgeSkge1xuICAgICAgICBvYnN0YWNsZS5yZXNldCh4LCB5KTtcbiAgICB9XG5cbiAgICB1cGRhdGVQbGF5ZXJQb3NpdGlvbihwb3MpIHtcbiAgICAgICAgdGhpcy5wbGF5ZXJQb3NpdGlvblkgPSBwb3MueTtcbiAgICB9XG5cbiAgICBnZXRDb2xsaWRlcnMoKSB7XG4gICAgICAgIHZhciBjb2xsaWRlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5hY3RpdmVPYnN0YWNsZXMuZm9yRWFjaChvYnN0YWNsZSA9PiB7XG4gICAgICAgICAgICBjb2xsaWRlcnMucHVzaChvYnN0YWNsZS5nZXRDb2xsaWRlcnMoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY29sbGlkZXJzO1xuICAgIH1cbn1cbiIsImNsYXNzIFV0aWxQcmVsb2FkZXIge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG5cbiAgICB9XG5cbiAgICBwcmVsb2FkKGdhbWUpIHtcbiAgICAgICAgdGhpcy5sb2FkU3ByaXRlcyhnYW1lKTtcbiAgICAgICAgdGhpcy5sb2FkU3ByaXRlU2hlZXRzKGdhbWUpO1xuICAgICAgICB0aGlzLmxvYWRBdWRpbyhnYW1lKTtcbiAgICB9XG5cbiAgICAvLyBBc3NldCBMb2FkaW5nLi4uXG4gICAgbG9hZFNwcml0ZXMoZ2FtZSkge1xuICAgICAgICAvLyBiYWNrZ3JvdW5kXG4gICAgICAgIGdhbWUubG9hZC5pbWFnZSgnYmctc3BhY2UnLCAnaW1hZ2VzL2JnLXNwYWNlLmpwZycpO1xuICAgICAgICBnYW1lLmxvYWQuaW1hZ2UoJ2JnLXN0YXJzLXNtYWxsJywgJ2ltYWdlcy9iZy1zdGFycy1zbWFsbC5wbmcnKTtcbiAgICAgICAgZ2FtZS5sb2FkLmltYWdlKCdiZy1zdGFycy1kZW5zZScsICdpbWFnZXMvYmctc3RhcnMtc21hbGwtZGVuc2UucG5nJyk7XG4gICAgICAgIGdhbWUubG9hZC5pbWFnZSgnYmctc3RhcnMtbGFyZ2UnLCAnaW1hZ2VzL2JnLXN0YXJzLWxhcmdlLnBuZycpO1xuICAgICAgICBnYW1lLmxvYWQuaW1hZ2UoJ2JnLWhvcml6b24nLCAnaW1hZ2VzL2JnLWhvcml6b24tZ3JhZGllbnQucG5nJyk7XG4gICAgICAgIGdhbWUubG9hZC5pbWFnZSgnYmctbW91bnRhaW5zLTAxJywgJ2ltYWdlcy9iZy1tb3VudGFpbnMtMDEucG5nJyk7XG4gICAgICAgIGdhbWUubG9hZC5pbWFnZSgnYmctbW91bnRhaW5zLTAyJywgJ2ltYWdlcy9iZy1tb3VudGFpbnMtMDIucG5nJyk7XG4gICAgICAgIC8vIGdyb3VuZFxuICAgICAgICBnYW1lLmxvYWQuaW1hZ2UoJ2dyb3VuZCcsICdpbWFnZXMvZ3JvdW5kLmpwZycpO1xuICAgICAgICBnYW1lLmxvYWQuaW1hZ2UoJ3ZpZ25ldHRlJywgJ2ltYWdlcy92aWduZXR0ZS5wbmcnKTtcbiAgICB9XG5cbiAgICBsb2FkU3ByaXRlU2hlZXRzKGdhbWUpIHtcbiAgICAgICAgLy8gcGxheWVyXG4gICAgICAgIGdhbWUubG9hZC5zcHJpdGVzaGVldCgncGxheWVyLnRvb3QnLCAnaW1hZ2VzL3Rvb3Qtc3ByaXRlc2hlZXQucG5nJywgNjQsIDk2KTtcbiAgICAgICAgZ2FtZS5sb2FkLnNwcml0ZXNoZWV0KCdwbGF5ZXIuYmxhc3QnLCAnaW1hZ2VzL2JsYXN0LXNwcml0ZXNoZWV0LnBuZycsIDYwLCA2Myk7XG4gICAgICAgIC8vIE9ic3RhY2xlc1xuICAgICAgICBnYW1lLmxvYWQuc3ByaXRlc2hlZXQoJ29icy5zYXVjZXInLCAnaW1hZ2VzL3NhdWNlci1zcHJpdGVzaGVldC5wbmcnLCAyNzYsIDEwMCk7XG4gICAgICAgIGdhbWUubG9hZC5zcHJpdGVzaGVldCgnb2JzLnByb2JlJywgJ2ltYWdlcy9wcm9iZS1zcHJpdGVzaGVldC5wbmcnLCAxMjgsIDEwNyk7XG5cbiAgICB9XG5cbiAgICBsb2FkQXVkaW8oZ2FtZSkge1xuICAgICAgICBnYW1lLmxvYWQuYXVkaW8oJ3BsYXllci5mYXJ0JywgJ3NvdW5kcy9mYXJ0LTAyLndhdicpO1xuICAgICAgICBnYW1lLmxvYWQuYXVkaW8oJ29icy5zYXVjZXIudWZvJywgJ3NvdW5kcy91Zm8tMDEud2F2Jyk7XG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9