"use strict";

var trConfig = {

    debug: true,
    gravity: 300,
    shakeMagnitude: 10,

    mute: false,

    player: {
        debug: false,
        fartStrength: 250,
        mute: false
    },

    obstacle: {
        debug: false,
        mute: false
    },

    setupGame: function setupGame(game, enablePhysics) {
        if (enablePhysics) {
            game.physics.startSystem(Phaser.Physics.ARCADE);
        }
        game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
        game.scale.pageAlignHorizontally = true;
        game.scale.pageAlignVertically = true;
        game.scale.setScreenSize(true);
        game.scale.refresh();
    }
};
"use strict";

var toot = {
    //gravity: (300 * 0.27),
    gravity: 300,
    fartStrength: 250,
    currentDistance: 0,

    soundsEnabled: false,

    // namespacing
    character: {},
    environment: {},
    obstacle: {},
    ui: {}
};

var run = function run() {
    var game = new Game();
    game.start();
};
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var CharPlayer = (function () {
    function CharPlayer() {
        _classCallCheck(this, CharPlayer);

        this.observers = {};
        this.distance = 0;
    }

    _createClass(CharPlayer, [{
        key: 'create',
        value: function create(game) {
            var startX = game.world.width * 0.15;
            var startY = game.world.height - 256;

            this.spriteToot = game.add.sprite(startX, startY, 'player.toot');
            game.physics.arcade.enable(this.spriteToot);

            this.spriteToot.body.gravity.y = trConfig.gravity;
            this.spriteToot.body.collideWorldBounds = true;

            this.spriteToot.animations.add('run', [5, 6, 7, 8], 6, true);
            this.spriteToot.animations.add('land', [5, 6, 7, 8], 2, true);

            // blast
            this.spriteBlast = game.add.sprite(startX - 60, startY + 60, 'player.blast');
            this.spriteBlast.animations.add('fart', [1, 3, 4, 4, 0], 10, false);

            this.soundFart = game.add.audio('player.fart');
            this.soundFart.allowMultiple = false;
        }
    }, {
        key: 'update',
        value: function update(game) {
            //  Reset the players velocity (movement)
            this.spriteToot.body.velocity.x = 0;

            if (game.input.activePointer.isDown) {

                this.spriteToot.body.velocity.y = trConfig.player.fartStrength * -1;
                this.spriteBlast.animations.play('fart');

                this.notify('fart', {});

                if (!trConfig.mute && !trConfig.player.mute) {
                    //this.soundFart.play('', 0.35, 1, false, false);
                    this.soundFart.play('', 0, 1, false, false);
                }
            }

            if (this.spriteToot.body.touching.down) {
                this.spriteToot.animations.play('run');
                this.spriteBlast.frame = 0;
            } else if (this.spriteToot.body.velocity.y > 0 && this.spriteToot.body.velocity.y > toot.fartStrength * 0.66) {
                this.spriteToot.animations.play('land');
            } else {
                this.spriteToot.frame = 4;
            }

            this.spriteBlast.position.x = this.spriteToot.position.x - 38;
            this.spriteBlast.position.y = this.spriteToot.position.y + 80;

            // notify observers...
            this.notify('position', {
                x: this.spriteToot.position.x,
                y: this.spriteToot.position.y + 40
            });
            this.distance++;
            this.notify('distance', this.distance);

            if (trConfig.debug && trConfig.player.debug) {
                game.debug.body(this.spriteToot);
            }
        }
    }, {
        key: 'getColliders',
        value: function getColliders() {
            return this.spriteToot;
        }
    }, {
        key: 'notify',
        value: function notify(event, arg) {
            var callbacks = this.observers[event];
            if (typeof callbacks === 'undefined') {
                return;
            }
            callbacks.forEach(function (callback) {
                callback(arg);
            });
        }
    }, {
        key: 'registerObserver',
        value: function registerObserver(event, callback) {
            if (typeof this.observers[event] === 'undefined') {
                this.observers[event] = [];
            }
            this.observers[event].push(callback);
        }
    }]);

    return CharPlayer;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var CharProbe = (function () {
    function CharProbe() {
        _classCallCheck(this, CharProbe);

        this.velocity = 200;

        this.rotMax = 0.05;
        this.rotInc = 0.005;

        this.centerY = 0;
        this.yDeltaMax = 125;
        this.yDeltaInc = 2;
    }

    _createClass(CharProbe, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            var h = game.world.height;

            this.collisionGroup = game.add.group();
            game.physics.arcade.enable(this.collisionGroup);
            this.collisionGroup.checkWorldBounds = true;

            this.spriteProbe = this.collisionGroup.create(w, 128, 'obs.probe');
            this.spriteProbe.scale.set(0.5, 0.5);
            this.spriteProbe.anchor.setTo(0.5, 0.5);
            game.physics.arcade.enable(this.spriteProbe);
            this.spriteProbe.body.allowGravity = false;
            this.spriteProbe.body.immovable = true;
        }
    }, {
        key: 'update',
        value: function update(game) {
            if (this.spriteProbe.rotation >= this.rotMax || this.spriteProbe.rotation <= this.rotMax * -1) {
                this.rotInc = this.rotInc * -1;
            }
            this.spriteProbe.rotation += this.rotInc;

            if (this.spriteProbe.position.y >= this.centerY + this.yDeltaMax || this.spriteProbe.position.y <= this.centerY - this.yDeltaMax) {
                this.yDeltaInc = this.yDeltaInc * -1;
            }
            this.spriteProbe.position.y += this.yDeltaInc;

            if (trConfig.obstacle.debug) {
                this.collisionGroup.forEach(function (child) {
                    game.debug.body(child);
                });
            }
        }
    }, {
        key: 'inWorld',
        value: function inWorld() {
            return this.spriteProbe.inWorld;
        }
    }, {
        key: 'stop',
        value: function stop() {}
    }, {
        key: 'reset',
        value: function reset(x, y) {
            console.log('resetting Probe to ' + x + ', ' + y);
            this.centerY = y;
            this.collisionGroup.forEach(function (item) {
                item.reset(x, y);
            });
            this.collisionGroup.setAll('body.velocity.x', this.velocity * -1);
        }
    }, {
        key: 'getColliders',
        value: function getColliders() {
            return this.collisionGroup;
        }
    }]);

    return CharProbe;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var CharSaucer = (function () {
    function CharSaucer() {
        _classCallCheck(this, CharSaucer);

        this.velocity = 300;
        this.rotMax = 0.025;
        this.rotInc = 0.0025;
    }

    _createClass(CharSaucer, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            var h = game.world.height;

            this.soundUfo = game.add.audio('obs.saucer.ufo');
            this.soundUfo.allowMultiple = false;

            this.collisionGroup = game.add.group();
            game.physics.arcade.enable(this.collisionGroup);
            //this.collisionGroup.body.allowGravity = false;
            //this.collisionGroup.body.immovable = true;
            this.collisionGroup.checkWorldBounds = true;

            //this.spriteSaucer = this.game.add.sprite(w, 128, 'saucer');
            this.spriteSaucer = this.collisionGroup.create(w, 128, 'obs.saucer');
            this.spriteSaucer.anchor.setTo(0.5, 0.5);
            game.physics.arcade.enable(this.spriteSaucer);
            this.spriteSaucer.body.allowGravity = false;
            this.spriteSaucer.body.immovable = true;
            this.spriteSaucer.body.setSize(64, 20, -10, -37);

            // Additional collider boxes to match the shape of the saucer more closely
            var c1 = this.collisionGroup.create(w, 128, '');
            c1.anchor.setTo(0.5, 0.5);
            game.physics.arcade.enable(c1);
            c1.body.allowGravity = false;
            c1.body.immovable = true;
            c1.body.setSize(200, 22, -4, -16);

            var c2 = this.collisionGroup.create(w, 128, '');
            c2.anchor.setTo(0.5, 0.5);
            game.physics.arcade.enable(c2);
            c2.body.allowGravity = false;
            c2.body.immovable = true;
            c2.body.setSize(270, 32, -4, 11);

            var c3 = this.collisionGroup.create(w, 128, '');
            c3.anchor.setTo(0.5, 0.5);
            game.physics.arcade.enable(c3);
            c3.allowGravity = false;
            c3.body.immovable = true;
            c3.body.setSize(200, 16, -4, 35);
        }
    }, {
        key: 'update',
        value: function update(game) {
            if (this.spriteSaucer.rotation >= this.rotMax || this.spriteSaucer.rotation <= this.rotMax * -1) {
                this.rotInc = this.rotInc * -1;
            }
            this.spriteSaucer.rotation += this.rotInc;

            if (this.debug) {
                this.collisionGroup.forEach(function (child) {
                    game.debug.body(child);
                });
            }
        }
    }, {
        key: 'stop',
        value: function stop() {
            this.soundUfo.stop();
        }
    }, {
        key: 'reset',
        value: function reset(x, y) {
            console.log('resetting saucer to ' + x + ', ' + y);
            this.collisionGroup.forEach(function (item) {
                item.reset(x, y);
            });
            this.collisionGroup.setAll('body.velocity.x', this.velocity * -1);

            if (!trConfig.mute && !trConfig.obstacle.mute) {
                this.soundUfo.play('', 0, 1, true, false);
            }
        }
    }, {
        key: 'getColliders',
        value: function getColliders() {
            return this.collisionGroup;
        }
    }, {
        key: 'inWorld',
        value: function inWorld() {
            return this.spriteSaucer.inWorld;
        }
    }]);

    return CharSaucer;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var CharWorm = (function () {
    function CharWorm() {
        _classCallCheck(this, CharWorm);

        this.velocity = 100;
        this.yPos = 0;
    }

    _createClass(CharWorm, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            var h = game.world.height;
            this.yPos = h - (97 + 47);

            this.collisionGroup = game.add.group();
            game.physics.arcade.enable(this.collisionGroup);
            this.collisionGroup.checkWorldBounds = true;

            this.spriteWorm = this.collisionGroup.create(w, 50, 'obs.worm');
            game.physics.arcade.enable(this.spriteWorm);
            this.spriteWorm.body.allowGravity = false;
            this.spriteWorm.body.immovable = true;
        }
    }, {
        key: 'update',
        value: function update(game) {}
    }, {
        key: 'inWorld',
        value: function inWorld() {
            return this.spriteWorm.inWorld;
        }
    }, {
        key: 'stop',
        value: function stop() {}
    }, {
        key: 'reset',
        value: function reset(x, y) {
            console.log('resetting worm to ' + x);
            var worm = this;
            this.collisionGroup.forEach(function (item) {
                item.reset(x, worm.yPos);
            });
            this.collisionGroup.setAll('body.velocity.x', this.velocity * -1);
        }
    }, {
        key: 'getColliders',
        value: function getColliders() {
            return this.collisionGroup;
        }
    }]);

    return CharWorm;
})();
/**
 * ScreenBoot
 *
 * This is the logo/loading screen that shows when the game starts up.
 *      - Show company logo
 *      - Load game assets (graphics, sounds, etc...)
 *      - Show loading progress
 *      - Set mood for game
 *
 */
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var ScreenBoot = (function () {
    function ScreenBoot() {
        _classCallCheck(this, ScreenBoot);
    }

    _createClass(ScreenBoot, [{
        key: 'preload',
        value: function preload(game) {
            this.startTime = moment();
            this.isLoaded = false;
            this.minTime = moment().add(ScreenBoot.MIN_BOOT_TIME, 'seconds');

            console.log('ScreenBoot.preload');
        }
    }, {
        key: 'create',
        value: function create(game) {
            var loadTime = moment();
            var duration = moment.utc(loadTime.diff(this.startTime));
            console.log('ScreenBoot assets loaded in ' + duration.format('HH:mm:ss:SSS'));
            this.isLoaded = true;

            trConfig.setupGame(game);

            var x = game.world.centerX;
            var y = game.world.centerY;
            var msg = 'MorphZero presents';
            var text = game.add.text(x, y, msg, {
                font: '32px Arial',
                fill: '#ddddd9',
                align: 'center'
            });
            text.anchor.setTo(0.5, 0.5);
        }
    }, {
        key: 'update',
        value: function update(game) {
            var now = moment();
            if (this.isLoaded && now.isAfter(this.minTime)) {
                game.state.start('menu');
            }
        }
    }]);

    return ScreenBoot;
})();

ScreenBoot.MIN_BOOT_TIME = 1.5; // seconds
/**
 * ScreenMenu
 *
 * This is the menu screen. Options for:
 *      - Starting a game
 *      - About/Credits page
 *      - Settings page?
 *
 */
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var ScreenMenu = (function () {
    function ScreenMenu() {
        _classCallCheck(this, ScreenMenu);
    }

    _createClass(ScreenMenu, [{
        key: 'preload',
        value: function preload(game) {
            console.log('ScreenMenu.preload start...');
            this.startTime = moment();
            this.isLoaded = false;

            var preloader = new UtilPreloader();
            preloader.preload(game);
        }
    }, {
        key: 'create',
        value: function create(game) {
            var loadTime = moment();
            var duration = moment.utc(loadTime.diff(this.startTime));
            console.log('ScreenMenu assets loaded in ' + duration.format('HH:mm:ss:SSS'));
            this.isLoaded = true;

            trConfig.setupGame(game);

            var x = game.world.centerX;
            var y = game.world.centerY;
            var msg = 'play';
            var text = game.add.text(x, y, msg, {
                font: '32px Arial',
                fill: '#ddddd9',
                align: 'center'
            });
            text.anchor.setTo(0.5, 0.5);

            game.input.onDown.addOnce(function () {
                game.state.start('play');
            }, this);
        }
    }, {
        key: 'update',
        value: function update(game) {}
    }]);

    return ScreenMenu;
})();
/**
 * ScreenPlay
 *
 * This is the main play/game screen.
 *
 */
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var ScreenPlay = (function () {
    function ScreenPlay() {
        _classCallCheck(this, ScreenPlay);
    }

    _createClass(ScreenPlay, [{
        key: 'preload',
        value: function preload(game) {
            // Create game objects. Order here matters! Layered Back -> Front
            this.objects = [];
            this.objects.push(new EnvBackground());

            this.ground = new EnvGround();
            this.objects.push(this.ground);

            this.player = new CharPlayer();
            this.objects.push(this.player);

            var obstacles = new UtilObstacleGenerator();
            var uiDistance = new UiDistance();
            this.objects.push(obstacles);
            this.objects.push(uiDistance);
            this.player.registerObserver('position', function (pos) {
                obstacles.updatePlayerPosition(pos);
            });
            this.player.registerObserver('distance', function (distance) {
                obstacles.updatePlayerDistance(distance);
                uiDistance.updatePlayerDistance(distance);
            });
            this.obstacles = obstacles;
            this.uiDistance = uiDistance;

            var playScreen = this;
            this.player.registerObserver('fart', function () {
                playScreen.shakeMagnitude = trConfig.shakeMagnitude;
                if (window.navigator && window.navigator.vibrate) {
                    navigator.vibrate(trConfig.shakeMagnitude * 10);
                }
            });

            this.objects.push(new EnvVignette());
        }
    }, {
        key: 'create',
        value: function create(game) {
            if (trConfig.debug) {
                this.stats = new Stats();
                document.body.appendChild(this.stats.domElement);
                this.stats.domElement.style.position = 'absolute';
                this.stats.domElement.style.top = '0px';
            }

            trConfig.setupGame(game);

            // create()
            this.objects.forEach(function (obj) {
                obj.create(game);
            });
        }
    }, {
        key: 'update',
        value: function update(game) {

            if (trConfig.debug) {
                this.stats.begin();
            }

            // player vs ground
            game.physics.arcade.collide(this.player.getColliders(), this.ground.getColliders());
            // player vs obstacles
            game.physics.arcade.collide(this.player.getColliders(), this.obstacles.getColliders(), this.obstacleCollisionHandler, null, this);

            // update all objects
            this.objects.forEach(function (obj) {
                obj.update(game);
            });

            this.shake(game);

            if (trConfig.debug) {
                this.stats.end();
            }
        }
    }, {
        key: 'shake',
        value: function shake(game) {
            if (this.shakeMagnitude > 0) {
                var rand1 = game.rnd.integerInRange(this.shakeMagnitude * -1, this.shakeMagnitude);
                var rand2 = game.rnd.integerInRange(this.shakeMagnitude * -1, this.shakeMagnitude);
                game.world.setBounds(rand1, rand2, game.width + rand1, game.height + rand2);
                this.shakeMagnitude--;

                if (this.shakeMagnitude <= 0) {
                    game.world.setBounds(0, 0, game.width, game.height); // normalize after shake?
                }
            }
        }
    }, {
        key: 'obstacleCollisionHandler',
        value: function obstacleCollisionHandler(player, obstacle) {
            console.log('collision detected!');
        }
    }]);

    return ScreenPlay;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var UiDistance = (function () {
    function UiDistance() {
        _classCallCheck(this, UiDistance);

        this.playerDistance = 0;
    }

    _createClass(UiDistance, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            this.display = game.add.text(16, 16, 'Distance: 0', {
                fontSize: '24px',
                fill: '#ffffee'
            });
        }
    }, {
        key: 'update',
        value: function update(game) {
            this.display.text = 'Distance: ' + Math.round(this.playerDistance / 10);
        }
    }, {
        key: 'updatePlayerDistance',
        value: function updatePlayerDistance(distance) {
            this.playerDistance = distance;
        }
    }]);

    return UiDistance;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Game = (function () {
    function Game() {
        _classCallCheck(this, Game);

        console.log('-- -- -- --   Toot Rippington - Blasts Off!   -- -- -- --');

        var pGame = new Phaser.Game(1334, 750, Phaser.AUTO, '');

        pGame.state.add('boot', new ScreenBoot());
        pGame.state.add('menu', new ScreenMenu());
        pGame.state.add('play', new ScreenPlay());

        this.pGame = pGame;
    }

    _createClass(Game, [{
        key: 'start',
        value: function start() {
            this.pGame.state.start('boot');
        }
    }]);

    return Game;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var UtilObstacleGenerator = (function () {
    function UtilObstacleGenerator() {
        _classCallCheck(this, UtilObstacleGenerator);

        this.playerPositionY = 0;
        this.playerDistance = 0;

        this.obstaclePool = {
            'saucer': [new CharSaucer(), new CharSaucer(), new CharSaucer()],
            'probe': [new CharProbe(), new CharProbe(), new CharProbe()],
            'worm': [new CharWorm(), new CharWorm(), new CharWorm()]
        };
    }

    _createClass(UtilObstacleGenerator, [{
        key: 'create',
        value: function create(game) {
            var _this = this;

            var generator = this;
            Object.keys(this.obstaclePool).forEach(function (obstacleType) {
                _this.obstaclePool[obstacleType].forEach(function (obstacle) {
                    obstacle.create(game);
                    generator.resetTo(obstacle, -200, -200);
                    obstacle.stop();
                });
            });

            this.activeObstacles = [];
        }
    }, {
        key: 'update',
        value: function update(game) {
            var inactive = [];
            var len = this.activeObstacles.length;
            var i, obstacle;
            for (i = 0; i < len; i++) {
                obstacle = this.activeObstacles[i];
                obstacle.update(game);

                if (!obstacle.inWorld()) {
                    obstacle.stop();
                    inactive.push(i);
                }
            }

            len = inactive.length;
            for (i = 0; i < len; i++) {
                // take it out of activeObstacles
                this.activeObstacles.splice(inactive[i], 1);
            }

            this.addNewObstacles(game);
        }
    }, {
        key: 'addNewObstacles',
        value: function addNewObstacles(game) {
            if (this.activeObstacles.length >= 1) {
                return;
            }

            var obstacle = this.getRandomObstacle();
            this.reset(game, obstacle);
            this.activeObstacles.push(obstacle);
        }
    }, {
        key: 'getRandomObstacle',
        value: function getRandomObstacle() {
            var keys = Object.keys(this.obstaclePool);
            var numTypes = keys.length;
            var keyIdx = Math.floor(Math.random() * numTypes);
            var key = keys[keyIdx];
            var pool = this.obstaclePool[key];
            return pool[0];
        }
    }, {
        key: 'reset',
        value: function reset(game, obstacle) {
            var x = game.world.width - 100;
            var miny = 65;
            var maxy = game.world.height - 165;

            var y = this.playerPositionY;
            console.log('playerPositionY: ' + this.playerPositionY);
            if (y < miny) {
                y = miny;
            } else if (y > maxy) {
                y = maxy;
            }

            this.resetTo(obstacle, x, y);
        }
    }, {
        key: 'resetTo',
        value: function resetTo(obstacle, x, y) {
            obstacle.reset(x, y);
        }
    }, {
        key: 'updatePlayerPosition',
        value: function updatePlayerPosition(pos) {
            this.playerPositionY = pos.y;
        }
    }, {
        key: 'updatePlayerDistance',
        value: function updatePlayerDistance(distance) {
            this.playerDistance = distance;
        }
    }, {
        key: 'getColliders',
        value: function getColliders() {
            var colliders = [];
            this.activeObstacles.forEach(function (obstacle) {
                colliders.push(obstacle.getColliders());
            });
            return colliders;
        }
    }]);

    return UtilObstacleGenerator;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var UtilPreloader = (function () {
    function UtilPreloader() {
        _classCallCheck(this, UtilPreloader);
    }

    _createClass(UtilPreloader, [{
        key: 'preload',
        value: function preload(game) {
            this.loadSprites(game);
            this.loadSpriteSheets(game);
            this.loadAudio(game);
        }
    }, {
        key: 'loadSprites',

        // Asset Loading...
        value: function loadSprites(game) {
            // background
            game.load.image('bg-space', 'images/bg-space.jpg');
            game.load.image('bg-stars-small', 'images/bg-stars-small.png');
            game.load.image('bg-stars-dense', 'images/bg-stars-small-dense.png');
            game.load.image('bg-stars-large', 'images/bg-stars-large.png');
            game.load.image('bg-horizon', 'images/bg-horizon-gradient.png');
            game.load.image('bg-mountains-01', 'images/bg-mountains-01.png');
            game.load.image('bg-mountains-02', 'images/bg-mountains-02.png');
            // ground
            game.load.image('ground', 'images/ground.jpg');
            game.load.image('vignette', 'images/vignette.png');
        }
    }, {
        key: 'loadSpriteSheets',
        value: function loadSpriteSheets(game) {
            // player
            game.load.spritesheet('player.toot', 'images/toot-spritesheet.png', 64, 96);
            game.load.spritesheet('player.blast', 'images/blast-spritesheet.png', 60, 63);
            // Obstacles
            game.load.spritesheet('obs.saucer', 'images/saucer-spritesheet.png', 276, 100);
            game.load.spritesheet('obs.probe', 'images/probe-spritesheet.png', 128, 107);
            game.load.spritesheet('obs.worm', 'images/moonworm-spritesheet.png', 133, 50);
        }
    }, {
        key: 'loadAudio',
        value: function loadAudio(game) {
            game.load.audio('player.fart', 'sounds/fart-02.wav');
            game.load.audio('obs.saucer.ufo', 'sounds/ufo-01.wav');
        }
    }]);

    return UtilPreloader;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var EnvBackground = (function () {
    function EnvBackground() {
        _classCallCheck(this, EnvBackground);
    }

    _createClass(EnvBackground, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            var h = game.world.height;
            this.spaceBg = game.add.tileSprite(0, 0, w, h, 'bg-space');
            this.starsLg = game.add.tileSprite(0, 0, w, h, 'bg-stars-large');
            this.spaceDs = game.add.tileSprite(0, 0, w, h, 'bg-stars-dense');
            this.starsSm = game.add.tileSprite(0, 0, w, h, 'bg-stars-small');

            this.horizon = game.add.tileSprite(0, 0, w, h, 'bg-horizon');

            this.mountains1 = game.add.tileSprite(0, 0, w, h, 'bg-mountains-01');
            this.mountains2 = game.add.tileSprite(0, 0, w, h, 'bg-mountains-02');
        }
    }, {
        key: 'update',
        value: function update(game) {
            this.spaceBg.tilePosition.x -= 0.075;
            this.starsLg.tilePosition.x -= 0.1;
            this.spaceDs.tilePosition.x -= 0.125;
            this.starsSm.tilePosition.x -= 0.15;

            this.mountains1.tilePosition.x -= 0.2;
            this.mountains2.tilePosition.x -= 0.25;
        }
    }]);

    return EnvBackground;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var EnvGround = (function () {
    function EnvGround() {
        _classCallCheck(this, EnvGround);
    }

    _createClass(EnvGround, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            var h = game.world.height;

            var yPos = h - 97;
            this.sprite = game.add.tileSprite(0, yPos, w, h, 'ground');

            game.physics.arcade.enable(this.sprite);
            this.sprite.body.immovable = true;

            // bug in phaser 2.3.0
            // see: http://www.html5gamedevs.com/topic/13856-problem-with-collide-method-from-physics-arcade-in-different-versions-of-phaser/?p=79032
            this.sprite.physicsType = Phaser.SPRITE;
        }
    }, {
        key: 'update',
        value: function update(game) {
            this.sprite.tilePosition.x -= 0.85;
        }
    }, {
        key: 'getColliders',
        value: function getColliders() {
            return this.sprite;
        }
    }]);

    return EnvGround;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var EnvVignette = (function () {
    function EnvVignette() {
        _classCallCheck(this, EnvVignette);
    }

    _createClass(EnvVignette, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            var h = game.world.height;
            this.v = game.add.sprite(0, 0, 'vignette');
        }
    }, {
        key: 'update',
        value: function update(game) {}
    }]);

    return EnvVignette;
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy5qcyIsIm1haW4uanMiLCJjaGFyYWN0ZXIvcGxheWVyLmpzIiwiY2hhcmFjdGVyL3Byb2JlLmpzIiwiY2hhcmFjdGVyL3NhdWNlci5qcyIsImNoYXJhY3Rlci93b3JtLmpzIiwic2NyZWVuL2Jvb3QuanMiLCJzY3JlZW4vbWVudS5qcyIsInNjcmVlbi9wbGF5LmpzIiwidWkvZGlzdGFuY2UuanMiLCJ1dGlsL2dhbWUuanMiLCJ1dGlsL29ic3RhY2xlZ2VuZXJhdG9yLmpzIiwidXRpbC9wcmVsb2FkZXIuanMiLCJlbnZpcm9ubWVudC9iYWNrZ3JvdW5kLmpzIiwiZW52aXJvbm1lbnQvZ3JvdW5kLmpzIiwiZW52aXJvbm1lbnQvdmlnbmV0dGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLFFBQVEsR0FBRzs7QUFFWCxTQUFLLEVBQUUsSUFBSTtBQUNYLFdBQU8sRUFBRSxHQUFHO0FBQ1osa0JBQWMsRUFBRSxFQUFFOztBQUVsQixRQUFJLEVBQUUsS0FBSzs7QUFFWCxVQUFNLEVBQUU7QUFDSixhQUFLLEVBQUUsS0FBSztBQUNaLG9CQUFZLEVBQUUsR0FBRztBQUNqQixZQUFJLEVBQUUsS0FBSztLQUNkOztBQUVELFlBQVEsRUFBRTtBQUNOLGFBQUssRUFBRSxLQUFLO0FBQ1osWUFBSSxFQUFFLEtBQUs7S0FDZDs7QUFFRCxhQUFTLEVBQUUsbUJBQVMsSUFBSSxFQUFFLGFBQWEsRUFBRTtBQUNyQyxZQUFJLGFBQWEsRUFBRTtBQUNmLGdCQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQ25EO0FBQ0QsWUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUM7QUFDcEQsWUFBSSxDQUFDLEtBQUssQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLENBQUM7QUFDeEMsWUFBSSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIs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QUFFMUIsZ0JBQUksSUFBSSxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDbEIsZ0JBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDOztBQUUzRCxnQkFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN4QyxnQkFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQzs7OztBQUlsQyxnQkFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztTQUMzQzs7O2VBRUssZ0JBQUMsSUFBSSxFQUFFO0FBQ1QsZ0JBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUM7U0FDdEM7OztlQUVXLHdCQUFHO0FBQ1gsbUJBQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztTQUN0Qjs7O1dBMUJDLFNBQVM7Ozs7Ozs7O0lDQVQsV0FBVztBQUVGLGFBRlQsV0FBVyxHQUVDOzhCQUZaLFdBQVc7S0FHWjs7aUJBSEMsV0FBVzs7ZUFLUCxnQkFBQyxJQUFJLEVBQUU7QUFDVCxnQkFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFDekIsZ0JBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO0FBQzFCLGdCQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUM7U0FDOUM7OztlQUVLLGdCQUFDLElBQUksRUFBRSxFQUNaOzs7V0FaQyxXQUFXIiwiZmlsZSI6ImdhbWUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHRyQ29uZmlnID0ge1xuXG4gICAgZGVidWc6IHRydWUsXG4gICAgZ3Jhdml0eTogMzAwLFxuICAgIHNoYWtlTWFnbml0dWRlOiAxMCxcblxuICAgIG11dGU6IGZhbHNlLFxuXG4gICAgcGxheWVyOiB7XG4gICAgICAgIGRlYnVnOiBmYWxzZSxcbiAgICAgICAgZmFydFN0cmVuZ3RoOiAyNTAsXG4gICAgICAgIG11dGU6IGZhbHNlXG4gICAgfSxcblxuICAgIG9ic3RhY2xlOiB7XG4gICAgICAgIGRlYnVnOiBmYWxzZSxcbiAgICAgICAgbXV0ZTogZmFsc2VcbiAgICB9LFxuXG4gICAgc2V0dXBHYW1lOiBmdW5jdGlvbihnYW1lLCBlbmFibGVQaHlzaWNzKSB7XG4gICAgICAgIGlmIChlbmFibGVQaHlzaWNzKSB7XG4gICAgICAgICAgICBnYW1lLnBoeXNpY3Muc3RhcnRTeXN0ZW0oUGhhc2VyLlBoeXNpY3MuQVJDQURFKTtcbiAgICAgICAgfVxuICAgICAgICBnYW1lLnNjYWxlLnNjYWxlTW9kZSA9IFBoYXNlci5TY2FsZU1hbmFnZXIuU0hPV19BTEw7XG4gICAgICAgIGdhbWUuc2NhbGUucGFnZUFsaWduSG9yaXpvbnRhbGx5ID0gdHJ1ZTtcbiAgICAgICAgZ2FtZS5zY2FsZS5wYWdlQWxpZ25WZXJ0aWNhbGx5ID0gdHJ1ZTtcbiAgICAgICAgZ2FtZS5zY2FsZS5zZXRTY3JlZW5TaXplKHRydWUpO1xuICAgICAgICBnYW1lLnNjYWxlLnJlZnJlc2goKTtcbiAgICB9XG59O1xuIiwidmFyIHRvb3QgPSB7XG4gICAgLy9ncmF2aXR5OiAoMzAwICogMC4yNyksXG4gICAgZ3Jhdml0eTogMzAwLFxuICAgIGZhcnRTdHJlbmd0aDogMjUwLFxuICAgIGN1cnJlbnREaXN0YW5jZTogMCxcblxuICAgIHNvdW5kc0VuYWJsZWQ6IGZhbHNlLFxuXG4gICAgLy8gbmFtZXNwYWNpbmdcbiAgICBjaGFyYWN0ZXI6IHt9LFxuICAgIGVudmlyb25tZW50OiB7fSxcbiAgICBvYnN0YWNsZToge30sXG4gICAgdWk6IHt9XG59O1xuXG52YXIgcnVuID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGdhbWUgPSBuZXcgR2FtZSgpO1xuICAgIGdhbWUuc3RhcnQoKTtcbn07XG4iLCJcbmNsYXNzIENoYXJQbGF5ZXIge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0ge307XG4gICAgICAgIHRoaXMuZGlzdGFuY2UgPSAwO1xuICAgIH1cblxuICAgIGNyZWF0ZShnYW1lKSB7XG4gICAgICAgIHZhciBzdGFydFggPSBnYW1lLndvcmxkLndpZHRoICogMC4xNTtcbiAgICAgICAgdmFyIHN0YXJ0WSA9IGdhbWUud29ybGQuaGVpZ2h0IC0gMjU2O1xuXG4gICAgICAgIHRoaXMuc3ByaXRlVG9vdCA9IGdhbWUuYWRkLnNwcml0ZShzdGFydFgsIHN0YXJ0WSwgJ3BsYXllci50b290Jyk7XG4gICAgICAgIGdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKHRoaXMuc3ByaXRlVG9vdCk7XG5cbiAgICAgICAgdGhpcy5zcHJpdGVUb290LmJvZHkuZ3Jhdml0eS55ID0gdHJDb25maWcuZ3Jhdml0eTtcbiAgICAgICAgdGhpcy5zcHJpdGVUb290LmJvZHkuY29sbGlkZVdvcmxkQm91bmRzID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLnNwcml0ZVRvb3QuYW5pbWF0aW9ucy5hZGQoJ3J1bicsIFs1LCA2LCA3LCA4XSwgNiwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuc3ByaXRlVG9vdC5hbmltYXRpb25zLmFkZCgnbGFuZCcsIFs1LCA2LCA3LCA4XSwgMiwgdHJ1ZSk7XG5cbiAgICAgICAgLy8gYmxhc3RcbiAgICAgICAgdGhpcy5zcHJpdGVCbGFzdCA9IGdhbWUuYWRkLnNwcml0ZShzdGFydFggLSA2MCwgc3RhcnRZICsgNjAsICdwbGF5ZXIuYmxhc3QnKTtcbiAgICAgICAgdGhpcy5zcHJpdGVCbGFzdC5hbmltYXRpb25zLmFkZCgnZmFydCcsIFsxLCAzLCA0LCA0LCAwXSwgMTAsIGZhbHNlKTtcblxuICAgICAgICB0aGlzLnNvdW5kRmFydCA9IGdhbWUuYWRkLmF1ZGlvKCdwbGF5ZXIuZmFydCcpO1xuICAgICAgICB0aGlzLnNvdW5kRmFydC5hbGxvd011bHRpcGxlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdXBkYXRlKGdhbWUpIHtcbiAgICAgICAgLy8gIFJlc2V0IHRoZSBwbGF5ZXJzIHZlbG9jaXR5IChtb3ZlbWVudClcbiAgICAgICAgdGhpcy5zcHJpdGVUb290LmJvZHkudmVsb2NpdHkueCA9IDA7XG5cbiAgICAgICAgaWYgKGdhbWUuaW5wdXQuYWN0aXZlUG9pbnRlci5pc0Rvd24pIHtcblxuICAgICAgICAgICAgdGhpcy5zcHJpdGVUb290LmJvZHkudmVsb2NpdHkueSA9IHRyQ29uZmlnLnBsYXllci5mYXJ0U3RyZW5ndGggKiAtMTtcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlQmxhc3QuYW5pbWF0aW9ucy5wbGF5KCdmYXJ0Jyk7XG5cbiAgICAgICAgICAgIHRoaXMubm90aWZ5KCdmYXJ0Jywge30pO1xuXG4gICAgICAgICAgICBpZiAoIXRyQ29uZmlnLm11dGUgJiYgIXRyQ29uZmlnLnBsYXllci5tdXRlKSB7XG4gICAgICAgICAgICAgICAgLy90aGlzLnNvdW5kRmFydC5wbGF5KCcnLCAwLjM1LCAxLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuc291bmRGYXJ0LnBsYXkoJycsIDAsIDEsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zcHJpdGVUb290LmJvZHkudG91Y2hpbmcuZG93bikge1xuICAgICAgICAgICAgdGhpcy5zcHJpdGVUb290LmFuaW1hdGlvbnMucGxheSgncnVuJyk7XG4gICAgICAgICAgICB0aGlzLnNwcml0ZUJsYXN0LmZyYW1lID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnNwcml0ZVRvb3QuYm9keS52ZWxvY2l0eS55ID4gMCAmJlxuICAgICAgICAgICAgICAgICB0aGlzLnNwcml0ZVRvb3QuYm9keS52ZWxvY2l0eS55ID4gKHRvb3QuZmFydFN0cmVuZ3RoICogMC42NikpIHtcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlVG9vdC5hbmltYXRpb25zLnBsYXkoJ2xhbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlVG9vdC5mcmFtZSA9IDQ7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNwcml0ZUJsYXN0LnBvc2l0aW9uLnggPSB0aGlzLnNwcml0ZVRvb3QucG9zaXRpb24ueCAtIDM4O1xuICAgICAgICB0aGlzLnNwcml0ZUJsYXN0LnBvc2l0aW9uLnkgPSB0aGlzLnNwcml0ZVRvb3QucG9zaXRpb24ueSArIDgwO1xuXG4gICAgICAgIC8vIG5vdGlmeSBvYnNlcnZlcnMuLi5cbiAgICAgICAgdGhpcy5ub3RpZnkoJ3Bvc2l0aW9uJywge1xuICAgICAgICAgICAgeDogdGhpcy5zcHJpdGVUb290LnBvc2l0aW9uLngsXG4gICAgICAgICAgICB5OiB0aGlzLnNwcml0ZVRvb3QucG9zaXRpb24ueSArIDQwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRpc3RhbmNlKys7XG4gICAgICAgIHRoaXMubm90aWZ5KCdkaXN0YW5jZScsIHRoaXMuZGlzdGFuY2UpO1xuXG4gICAgICAgIGlmICh0ckNvbmZpZy5kZWJ1ZyAmJiB0ckNvbmZpZy5wbGF5ZXIuZGVidWcpIHtcbiAgICAgICAgICAgIGdhbWUuZGVidWcuYm9keSh0aGlzLnNwcml0ZVRvb3QpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0Q29sbGlkZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGVUb290O1xuICAgIH1cblxuICAgIG5vdGlmeShldmVudCwgYXJnKSB7XG4gICAgICAgIHZhciBjYWxsYmFja3MgPSB0aGlzLm9ic2VydmVyc1tldmVudF07XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2tzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrcy5mb3JFYWNoKGNhbGxiYWNrID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlZ2lzdGVyT2JzZXJ2ZXIoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vYnNlcnZlcnNbZXZlbnRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnNbZXZlbnRdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYnNlcnZlcnNbZXZlbnRdLnB1c2goY2FsbGJhY2spO1xuICAgIH1cbn1cbiIsIlxuY2xhc3MgQ2hhclByb2JlIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnZlbG9jaXR5ID0gMjAwO1xuXG4gICAgICAgIHRoaXMucm90TWF4ID0gMC4wNTtcbiAgICAgICAgdGhpcy5yb3RJbmMgPSAwLjAwNTtcblxuICAgICAgICB0aGlzLmNlbnRlclkgPSAwO1xuICAgICAgICB0aGlzLnlEZWx0YU1heCA9IDEyNTtcbiAgICAgICAgdGhpcy55RGVsdGFJbmMgPSAyO1xuICAgIH1cblxuICAgIGNyZWF0ZShnYW1lKSB7XG4gICAgICAgIHZhciB3ID0gZ2FtZS53b3JsZC53aWR0aDtcbiAgICAgICAgdmFyIGggPSBnYW1lLndvcmxkLmhlaWdodDtcblxuICAgICAgICB0aGlzLmNvbGxpc2lvbkdyb3VwID0gZ2FtZS5hZGQuZ3JvdXAoKTtcbiAgICAgICAgZ2FtZS5waHlzaWNzLmFyY2FkZS5lbmFibGUodGhpcy5jb2xsaXNpb25Hcm91cCk7XG4gICAgICAgIHRoaXMuY29sbGlzaW9uR3JvdXAuY2hlY2tXb3JsZEJvdW5kcyA9IHRydWU7XG5cbiAgICAgICAgdGhpcy5zcHJpdGVQcm9iZSA9IHRoaXMuY29sbGlzaW9uR3JvdXAuY3JlYXRlKHcsIDEyOCwgJ29icy5wcm9iZScpO1xuICAgICAgICB0aGlzLnNwcml0ZVByb2JlLnNjYWxlLnNldCgwLjUsIDAuNSk7XG4gICAgICAgIHRoaXMuc3ByaXRlUHJvYmUuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcbiAgICAgICAgZ2FtZS5waHlzaWNzLmFyY2FkZS5lbmFibGUodGhpcy5zcHJpdGVQcm9iZSk7XG4gICAgICAgIHRoaXMuc3ByaXRlUHJvYmUuYm9keS5hbGxvd0dyYXZpdHkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zcHJpdGVQcm9iZS5ib2R5LmltbW92YWJsZSA9IHRydWU7XG4gICAgfVxuXG4gICAgdXBkYXRlKGdhbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3ByaXRlUHJvYmUucm90YXRpb24gPj0gdGhpcy5yb3RNYXggfHxcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlUHJvYmUucm90YXRpb24gPD0gKHRoaXMucm90TWF4ICogLTEpKSB7XG4gICAgICAgICAgICB0aGlzLnJvdEluYyA9IHRoaXMucm90SW5jICogLTE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zcHJpdGVQcm9iZS5yb3RhdGlvbiArPSB0aGlzLnJvdEluYztcblxuICAgICAgICBpZiAodGhpcy5zcHJpdGVQcm9iZS5wb3NpdGlvbi55ID49ICh0aGlzLmNlbnRlclkgKyB0aGlzLnlEZWx0YU1heCkgfHxcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlUHJvYmUucG9zaXRpb24ueSA8PSAodGhpcy5jZW50ZXJZIC0gdGhpcy55RGVsdGFNYXgpKSB7XG4gICAgICAgICAgICB0aGlzLnlEZWx0YUluYyA9IHRoaXMueURlbHRhSW5jICogLTE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zcHJpdGVQcm9iZS5wb3NpdGlvbi55ICs9IHRoaXMueURlbHRhSW5jO1xuXG4gICAgICAgIGlmICh0ckNvbmZpZy5vYnN0YWNsZS5kZWJ1Zykge1xuICAgICAgICAgICAgdGhpcy5jb2xsaXNpb25Hcm91cC5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgICAgICAgICAgICBnYW1lLmRlYnVnLmJvZHkoY2hpbGQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbldvcmxkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGVQcm9iZS5pbldvcmxkO1xuICAgIH1cblxuICAgIHN0b3AoKSB7XG4gICAgfVxuXG4gICAgcmVzZXQoeCwgeSkge1xuICAgICAgICBjb25zb2xlLmxvZygncmVzZXR0aW5nIFByb2JlIHRvICcgKyB4ICsgJywgJyArIHkpO1xuICAgICAgICB0aGlzLmNlbnRlclkgPSB5O1xuICAgICAgICB0aGlzLmNvbGxpc2lvbkdyb3VwLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICBpdGVtLnJlc2V0KHgsIHkpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb2xsaXNpb25Hcm91cC5zZXRBbGwoJ2JvZHkudmVsb2NpdHkueCcsIHRoaXMudmVsb2NpdHkgKiAtMSk7XG4gICAgfVxuXG4gICAgZ2V0Q29sbGlkZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xsaXNpb25Hcm91cDtcbiAgICB9XG59XG4iLCJjbGFzcyBDaGFyU2F1Y2VyIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnZlbG9jaXR5ID0gMzAwO1xuICAgICAgICB0aGlzLnJvdE1heCA9IDAuMDI1O1xuICAgICAgICB0aGlzLnJvdEluYyA9IDAuMDAyNTtcbiAgICB9XG5cbiAgICBjcmVhdGUoZ2FtZSkge1xuICAgICAgICB2YXIgdyA9IGdhbWUud29ybGQud2lkdGg7XG4gICAgICAgIHZhciBoID0gZ2FtZS53b3JsZC5oZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5zb3VuZFVmbyA9IGdhbWUuYWRkLmF1ZGlvKCdvYnMuc2F1Y2VyLnVmbycpO1xuICAgICAgICB0aGlzLnNvdW5kVWZvLmFsbG93TXVsdGlwbGUgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLmNvbGxpc2lvbkdyb3VwID0gZ2FtZS5hZGQuZ3JvdXAoKTtcbiAgICAgICAgZ2FtZS5waHlzaWNzLmFyY2FkZS5lbmFibGUodGhpcy5jb2xsaXNpb25Hcm91cCk7XG4gICAgICAgIC8vdGhpcy5jb2xsaXNpb25Hcm91cC5ib2R5LmFsbG93R3Jhdml0eSA9IGZhbHNlO1xuICAgICAgICAvL3RoaXMuY29sbGlzaW9uR3JvdXAuYm9keS5pbW1vdmFibGUgPSB0cnVlO1xuICAgICAgICB0aGlzLmNvbGxpc2lvbkdyb3VwLmNoZWNrV29ybGRCb3VuZHMgPSB0cnVlO1xuXG4gICAgICAgIC8vdGhpcy5zcHJpdGVTYXVjZXIgPSB0aGlzLmdhbWUuYWRkLnNwcml0ZSh3LCAxMjgsICdzYXVjZXInKTtcbiAgICAgICAgdGhpcy5zcHJpdGVTYXVjZXIgPSB0aGlzLmNvbGxpc2lvbkdyb3VwLmNyZWF0ZSh3LCAxMjgsICdvYnMuc2F1Y2VyJyk7XG4gICAgICAgIHRoaXMuc3ByaXRlU2F1Y2VyLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgICAgIGdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKHRoaXMuc3ByaXRlU2F1Y2VyKTtcbiAgICAgICAgdGhpcy5zcHJpdGVTYXVjZXIuYm9keS5hbGxvd0dyYXZpdHkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zcHJpdGVTYXVjZXIuYm9keS5pbW1vdmFibGUgPSB0cnVlO1xuICAgICAgICB0aGlzLnNwcml0ZVNhdWNlci5ib2R5LnNldFNpemUoNjQsIDIwLCAtMTAsIC0zNyk7XG5cbiAgICAgICAgLy8gQWRkaXRpb25hbCBjb2xsaWRlciBib3hlcyB0byBtYXRjaCB0aGUgc2hhcGUgb2YgdGhlIHNhdWNlciBtb3JlIGNsb3NlbHlcbiAgICAgICAgdmFyIGMxID0gdGhpcy5jb2xsaXNpb25Hcm91cC5jcmVhdGUodywgMTI4LCAnJyk7XG4gICAgICAgIGMxLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgICAgIGdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKGMxKTtcbiAgICAgICAgYzEuYm9keS5hbGxvd0dyYXZpdHkgPSBmYWxzZTtcbiAgICAgICAgYzEuYm9keS5pbW1vdmFibGUgPSB0cnVlO1xuICAgICAgICBjMS5ib2R5LnNldFNpemUoMjAwLCAyMiwgLTQsIC0xNik7XG5cbiAgICAgICAgdmFyIGMyID0gdGhpcy5jb2xsaXNpb25Hcm91cC5jcmVhdGUodywgMTI4LCAnJyk7XG4gICAgICAgIGMyLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgICAgIGdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKGMyKTtcbiAgICAgICAgYzIuYm9keS5hbGxvd0dyYXZpdHkgPSBmYWxzZTtcbiAgICAgICAgYzIuYm9keS5pbW1vdmFibGUgPSB0cnVlO1xuICAgICAgICBjMi5ib2R5LnNldFNpemUoMjcwLCAzMiwgLTQsIDExKTtcblxuICAgICAgICB2YXIgYzMgPSB0aGlzLmNvbGxpc2lvbkdyb3VwLmNyZWF0ZSh3LCAxMjgsICcnKTtcbiAgICAgICAgYzMuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcbiAgICAgICAgZ2FtZS5waHlzaWNzLmFyY2FkZS5lbmFibGUoYzMpO1xuICAgICAgICBjMy5hbGxvd0dyYXZpdHkgPSBmYWxzZTtcbiAgICAgICAgYzMuYm9keS5pbW1vdmFibGUgPSB0cnVlO1xuICAgICAgICBjMy5ib2R5LnNldFNpemUoMjAwLCAxNiwgLTQsIDM1KTtcbiAgICB9XG5cbiAgICB1cGRhdGUoZ2FtZSkge1xuICAgICAgICBpZiAodGhpcy5zcHJpdGVTYXVjZXIucm90YXRpb24gPj0gdGhpcy5yb3RNYXggfHxcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlU2F1Y2VyLnJvdGF0aW9uIDw9ICh0aGlzLnJvdE1heCAqIC0xKSkge1xuICAgICAgICAgICAgdGhpcy5yb3RJbmMgPSB0aGlzLnJvdEluYyAqIC0xO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3ByaXRlU2F1Y2VyLnJvdGF0aW9uICs9IHRoaXMucm90SW5jO1xuXG4gICAgICAgIGlmICh0aGlzLmRlYnVnKSB7XG4gICAgICAgICAgICB0aGlzLmNvbGxpc2lvbkdyb3VwLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBnYW1lLmRlYnVnLmJvZHkoY2hpbGQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLnNvdW5kVWZvLnN0b3AoKTtcbiAgICB9XG5cbiAgICByZXNldCh4LCB5KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdyZXNldHRpbmcgc2F1Y2VyIHRvICcgKyB4ICsgJywgJyArIHkpO1xuICAgICAgICB0aGlzLmNvbGxpc2lvbkdyb3VwLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICBpdGVtLnJlc2V0KHgsIHkpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb2xsaXNpb25Hcm91cC5zZXRBbGwoJ2JvZHkudmVsb2NpdHkueCcsIHRoaXMudmVsb2NpdHkgKiAtMSk7XG5cbiAgICAgICAgaWYgKCF0ckNvbmZpZy5tdXRlICYmICF0ckNvbmZpZy5vYnN0YWNsZS5tdXRlKSB7XG4gICAgICAgICAgICB0aGlzLnNvdW5kVWZvLnBsYXkoJycsIDAsIDEsIHRydWUsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldENvbGxpZGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sbGlzaW9uR3JvdXA7XG4gICAgfVxuXG4gICAgaW5Xb3JsZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlU2F1Y2VyLmluV29ybGQ7XG4gICAgfVxufVxuIiwiXG5jbGFzcyBDaGFyV29ybSB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy52ZWxvY2l0eSA9IDEwMDtcbiAgICAgICAgdGhpcy55UG9zID0gMDtcbiAgICB9XG5cbiAgICBjcmVhdGUoZ2FtZSkge1xuICAgICAgICB2YXIgdyA9IGdhbWUud29ybGQud2lkdGg7XG4gICAgICAgIHZhciBoID0gZ2FtZS53b3JsZC5oZWlnaHQ7XG4gICAgICAgIHRoaXMueVBvcyA9IGggLSAoOTcgKyA0Nyk7XG5cbiAgICAgICAgdGhpcy5jb2xsaXNpb25Hcm91cCA9IGdhbWUuYWRkLmdyb3VwKCk7XG4gICAgICAgIGdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKHRoaXMuY29sbGlzaW9uR3JvdXApO1xuICAgICAgICB0aGlzLmNvbGxpc2lvbkdyb3VwLmNoZWNrV29ybGRCb3VuZHMgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuc3ByaXRlV29ybSA9IHRoaXMuY29sbGlzaW9uR3JvdXAuY3JlYXRlKHcsIDUwLCAnb2JzLndvcm0nKTtcbiAgICAgICAgZ2FtZS5waHlzaWNzLmFyY2FkZS5lbmFibGUodGhpcy5zcHJpdGVXb3JtKTtcbiAgICAgICAgdGhpcy5zcHJpdGVXb3JtLmJvZHkuYWxsb3dHcmF2aXR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3ByaXRlV29ybS5ib2R5LmltbW92YWJsZSA9IHRydWU7XG4gICAgfVxuXG4gICAgdXBkYXRlKGdhbWUpIHtcbiAgICB9XG5cbiAgICBpbldvcmxkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGVXb3JtLmluV29ybGQ7XG4gICAgfVxuXG4gICAgc3RvcCgpIHtcbiAgICB9XG5cbiAgICByZXNldCh4LCB5KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdyZXNldHRpbmcgd29ybSB0byAnICsgeCk7XG4gICAgICAgIHZhciB3b3JtID0gdGhpcztcbiAgICAgICAgdGhpcy5jb2xsaXNpb25Hcm91cC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaXRlbS5yZXNldCh4LCB3b3JtLnlQb3MpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb2xsaXNpb25Hcm91cC5zZXRBbGwoJ2JvZHkudmVsb2NpdHkueCcsIHRoaXMudmVsb2NpdHkgKiAtMSk7XG4gICAgfVxuXG4gICAgZ2V0Q29sbGlkZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xsaXNpb25Hcm91cDtcbiAgICB9XG59XG4iLCIvKipcbiAqIFNjcmVlbkJvb3RcbiAqXG4gKiBUaGlzIGlzIHRoZSBsb2dvL2xvYWRpbmcgc2NyZWVuIHRoYXQgc2hvd3Mgd2hlbiB0aGUgZ2FtZSBzdGFydHMgdXAuXG4gKiAgICAgIC0gU2hvdyBjb21wYW55IGxvZ29cbiAqICAgICAgLSBMb2FkIGdhbWUgYXNzZXRzIChncmFwaGljcywgc291bmRzLCBldGMuLi4pXG4gKiAgICAgIC0gU2hvdyBsb2FkaW5nIHByb2dyZXNzXG4gKiAgICAgIC0gU2V0IG1vb2QgZm9yIGdhbWVcbiAqXG4gKi9cbmNsYXNzIFNjcmVlbkJvb3Qge1xuXG4gICAgcHJlbG9hZChnYW1lKSB7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gbW9tZW50KCk7XG4gICAgICAgIHRoaXMuaXNMb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5taW5UaW1lID0gbW9tZW50KCkuYWRkKFNjcmVlbkJvb3QuTUlOX0JPT1RfVElNRSwgJ3NlY29uZHMnKTtcblxuICAgICAgICBjb25zb2xlLmxvZygnU2NyZWVuQm9vdC5wcmVsb2FkJyk7XG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcbiAgICAgICAgdmFyIGxvYWRUaW1lID0gbW9tZW50KCk7XG4gICAgICAgIHZhciBkdXJhdGlvbiA9IG1vbWVudC51dGMobG9hZFRpbWUuZGlmZih0aGlzLnN0YXJ0VGltZSkpO1xuICAgICAgICBjb25zb2xlLmxvZygnU2NyZWVuQm9vdCBhc3NldHMgbG9hZGVkIGluICcgKyBkdXJhdGlvbi5mb3JtYXQoJ0hIOm1tOnNzOlNTUycpKTtcbiAgICAgICAgdGhpcy5pc0xvYWRlZCA9IHRydWU7XG5cbiAgICAgICAgdHJDb25maWcuc2V0dXBHYW1lKGdhbWUpO1xuXG4gICAgICAgIHZhciB4ID0gZ2FtZS53b3JsZC5jZW50ZXJYO1xuICAgICAgICB2YXIgeSA9IGdhbWUud29ybGQuY2VudGVyWTtcbiAgICAgICAgdmFyIG1zZyA9IFwiTW9ycGhaZXJvIHByZXNlbnRzXCI7XG4gICAgICAgIHZhciB0ZXh0ID0gZ2FtZS5hZGQudGV4dCh4LCB5LCBtc2csIHtcbiAgICAgICAgICAgIGZvbnQ6IFwiMzJweCBBcmlhbFwiLFxuICAgICAgICAgICAgZmlsbDogXCIjZGRkZGQ5XCIsXG4gICAgICAgICAgICBhbGlnbjogXCJjZW50ZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgdGV4dC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICAgIH1cblxuICAgIHVwZGF0ZShnYW1lKSB7XG4gICAgICAgIHZhciBub3cgPSBtb21lbnQoKTtcbiAgICAgICAgaWYgKHRoaXMuaXNMb2FkZWQgJiYgbm93LmlzQWZ0ZXIodGhpcy5taW5UaW1lKSkge1xuICAgICAgICAgICAgZ2FtZS5zdGF0ZS5zdGFydCgnbWVudScpO1xuICAgICAgICB9XG4gICAgfVxuXG59XG5cblNjcmVlbkJvb3QuTUlOX0JPT1RfVElNRSA9IDEuNTsgLy8gc2Vjb25kc1xuIiwiLyoqXG4gKiBTY3JlZW5NZW51XG4gKlxuICogVGhpcyBpcyB0aGUgbWVudSBzY3JlZW4uIE9wdGlvbnMgZm9yOlxuICogICAgICAtIFN0YXJ0aW5nIGEgZ2FtZVxuICogICAgICAtIEFib3V0L0NyZWRpdHMgcGFnZVxuICogICAgICAtIFNldHRpbmdzIHBhZ2U/XG4gKlxuICovXG5jbGFzcyBTY3JlZW5NZW51IHtcblxuICAgIHByZWxvYWQoZ2FtZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnU2NyZWVuTWVudS5wcmVsb2FkIHN0YXJ0Li4uJyk7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gbW9tZW50KCk7XG4gICAgICAgIHRoaXMuaXNMb2FkZWQgPSBmYWxzZTtcblxuICAgICAgICB2YXIgcHJlbG9hZGVyID0gbmV3IFV0aWxQcmVsb2FkZXIoKTtcbiAgICAgICAgcHJlbG9hZGVyLnByZWxvYWQoZ2FtZSk7XG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcbiAgICAgICAgdmFyIGxvYWRUaW1lID0gbW9tZW50KCk7XG4gICAgICAgIHZhciBkdXJhdGlvbiA9IG1vbWVudC51dGMobG9hZFRpbWUuZGlmZih0aGlzLnN0YXJ0VGltZSkpO1xuICAgICAgICBjb25zb2xlLmxvZygnU2NyZWVuTWVudSBhc3NldHMgbG9hZGVkIGluICcgKyBkdXJhdGlvbi5mb3JtYXQoJ0hIOm1tOnNzOlNTUycpKTtcbiAgICAgICAgdGhpcy5pc0xvYWRlZCA9IHRydWU7XG5cbiAgICAgICAgdHJDb25maWcuc2V0dXBHYW1lKGdhbWUpO1xuXG4gICAgICAgIHZhciB4ID0gZ2FtZS53b3JsZC5jZW50ZXJYO1xuICAgICAgICB2YXIgeSA9IGdhbWUud29ybGQuY2VudGVyWTtcbiAgICAgICAgdmFyIG1zZyA9IFwicGxheVwiO1xuICAgICAgICB2YXIgdGV4dCA9IGdhbWUuYWRkLnRleHQoeCwgeSwgbXNnLCB7XG4gICAgICAgICAgICBmb250OiBcIjMycHggQXJpYWxcIixcbiAgICAgICAgICAgIGZpbGw6IFwiI2RkZGRkOVwiLFxuICAgICAgICAgICAgYWxpZ246IFwiY2VudGVyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRleHQuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcblxuICAgICAgICBnYW1lLmlucHV0Lm9uRG93bi5hZGRPbmNlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZ2FtZS5zdGF0ZS5zdGFydCgncGxheScpO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICB9XG5cbiAgICB1cGRhdGUoZ2FtZSkge1xuXG4gICAgfVxuXG59XG4iLCIvKipcbiAqIFNjcmVlblBsYXlcbiAqXG4gKiBUaGlzIGlzIHRoZSBtYWluIHBsYXkvZ2FtZSBzY3JlZW4uXG4gKlxuICovXG5jbGFzcyBTY3JlZW5QbGF5IHtcblxuICAgIHByZWxvYWQoZ2FtZSkge1xuICAgICAgICAvLyBDcmVhdGUgZ2FtZSBvYmplY3RzLiBPcmRlciBoZXJlIG1hdHRlcnMhIExheWVyZWQgQmFjayAtPiBGcm9udFxuICAgICAgICB0aGlzLm9iamVjdHMgPSBbXTtcbiAgICAgICAgdGhpcy5vYmplY3RzLnB1c2gobmV3IEVudkJhY2tncm91bmQoKSk7XG5cbiAgICAgICAgdGhpcy5ncm91bmQgPSBuZXcgRW52R3JvdW5kKCk7XG4gICAgICAgIHRoaXMub2JqZWN0cy5wdXNoKHRoaXMuZ3JvdW5kKTtcblxuICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBDaGFyUGxheWVyKCk7XG4gICAgICAgIHRoaXMub2JqZWN0cy5wdXNoKHRoaXMucGxheWVyKTtcblxuICAgICAgICB2YXIgb2JzdGFjbGVzID0gbmV3IFV0aWxPYnN0YWNsZUdlbmVyYXRvcigpO1xuICAgICAgICB2YXIgdWlEaXN0YW5jZSA9IG5ldyBVaURpc3RhbmNlKCk7XG4gICAgICAgIHRoaXMub2JqZWN0cy5wdXNoKG9ic3RhY2xlcyk7XG4gICAgICAgIHRoaXMub2JqZWN0cy5wdXNoKHVpRGlzdGFuY2UpO1xuICAgICAgICB0aGlzLnBsYXllci5yZWdpc3Rlck9ic2VydmVyKFxuICAgICAgICAgICAgJ3Bvc2l0aW9uJyxcbiAgICAgICAgICAgIGZ1bmN0aW9uKHBvcykge1xuICAgICAgICAgICAgICAgIG9ic3RhY2xlcy51cGRhdGVQbGF5ZXJQb3NpdGlvbihwb3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICB0aGlzLnBsYXllci5yZWdpc3Rlck9ic2VydmVyKFxuICAgICAgICAgICAgJ2Rpc3RhbmNlJyxcbiAgICAgICAgICAgIGZ1bmN0aW9uKGRpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgb2JzdGFjbGVzLnVwZGF0ZVBsYXllckRpc3RhbmNlKGRpc3RhbmNlKTtcbiAgICAgICAgICAgICAgICB1aURpc3RhbmNlLnVwZGF0ZVBsYXllckRpc3RhbmNlKGRpc3RhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5vYnN0YWNsZXMgPSBvYnN0YWNsZXM7XG4gICAgICAgIHRoaXMudWlEaXN0YW5jZSA9IHVpRGlzdGFuY2U7XG5cbiAgICAgICAgdmFyIHBsYXlTY3JlZW4gPSB0aGlzO1xuICAgICAgICB0aGlzLnBsYXllci5yZWdpc3Rlck9ic2VydmVyKFxuICAgICAgICAgICAgJ2ZhcnQnLFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcGxheVNjcmVlbi5zaGFrZU1hZ25pdHVkZSA9IHRyQ29uZmlnLnNoYWtlTWFnbml0dWRlO1xuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubmF2aWdhdG9yICYmIHdpbmRvdy5uYXZpZ2F0b3IudmlicmF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IudmlicmF0ZSh0ckNvbmZpZy5zaGFrZU1hZ25pdHVkZSAqIDEwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5vYmplY3RzLnB1c2gobmV3IEVudlZpZ25ldHRlKCkpO1xuICAgIH1cblxuICAgIGNyZWF0ZShnYW1lKSB7XG4gICAgICAgIGlmICh0ckNvbmZpZy5kZWJ1Zykge1xuICAgICAgICAgICAgdGhpcy5zdGF0cyA9IG5ldyBTdGF0cygpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnN0YXRzLmRvbUVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5zdGF0cy5kb21FbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgIHRoaXMuc3RhdHMuZG9tRWxlbWVudC5zdHlsZS50b3AgPSAnMHB4JztcbiAgICAgICAgfVxuXG4gICAgICAgIHRyQ29uZmlnLnNldHVwR2FtZShnYW1lKTtcblxuICAgICAgICAvLyBjcmVhdGUoKVxuICAgICAgICB0aGlzLm9iamVjdHMuZm9yRWFjaChvYmogPT4ge1xuICAgICAgICAgICAgb2JqLmNyZWF0ZShnYW1lKTtcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICB1cGRhdGUoZ2FtZSkge1xuXG4gICAgICAgIGlmICh0ckNvbmZpZy5kZWJ1Zykge1xuICAgICAgICAgICAgdGhpcy5zdGF0cy5iZWdpbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcGxheWVyIHZzIGdyb3VuZFxuICAgICAgICBnYW1lLnBoeXNpY3MuYXJjYWRlLmNvbGxpZGUoXG4gICAgICAgICAgICB0aGlzLnBsYXllci5nZXRDb2xsaWRlcnMoKSxcbiAgICAgICAgICAgIHRoaXMuZ3JvdW5kLmdldENvbGxpZGVycygpXG4gICAgICAgICk7XG4gICAgICAgIC8vIHBsYXllciB2cyBvYnN0YWNsZXNcbiAgICAgICAgZ2FtZS5waHlzaWNzLmFyY2FkZS5jb2xsaWRlKFxuICAgICAgICAgICAgdGhpcy5wbGF5ZXIuZ2V0Q29sbGlkZXJzKCksXG4gICAgICAgICAgICB0aGlzLm9ic3RhY2xlcy5nZXRDb2xsaWRlcnMoKSxcbiAgICAgICAgICAgIHRoaXMub2JzdGFjbGVDb2xsaXNpb25IYW5kbGVyLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHRoaXNcbiAgICAgICAgKTtcblxuICAgICAgICAvLyB1cGRhdGUgYWxsIG9iamVjdHNcbiAgICAgICAgdGhpcy5vYmplY3RzLmZvckVhY2gob2JqID0+IHtcbiAgICAgICAgICAgIG9iai51cGRhdGUoZ2FtZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc2hha2UoZ2FtZSk7XG5cbiAgICAgICAgaWYgKHRyQ29uZmlnLmRlYnVnKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRzLmVuZCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2hha2UoZ2FtZSkge1xuICAgICAgICBpZiAodGhpcy5zaGFrZU1hZ25pdHVkZSA+IDApIHtcbiAgICAgICAgICAgIHZhciByYW5kMSA9IGdhbWUucm5kLmludGVnZXJJblJhbmdlKFxuICAgICAgICAgICAgICAgIHRoaXMuc2hha2VNYWduaXR1ZGUgKiAtMSxcbiAgICAgICAgICAgICAgICB0aGlzLnNoYWtlTWFnbml0dWRlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdmFyIHJhbmQyID0gZ2FtZS5ybmQuaW50ZWdlckluUmFuZ2UoXG4gICAgICAgICAgICAgICAgdGhpcy5zaGFrZU1hZ25pdHVkZSAqIC0xLFxuICAgICAgICAgICAgICAgIHRoaXMuc2hha2VNYWduaXR1ZGVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBnYW1lLndvcmxkLnNldEJvdW5kcyhcbiAgICAgICAgICAgICAgICByYW5kMSwgcmFuZDIsXG4gICAgICAgICAgICAgICAgZ2FtZS53aWR0aCArIHJhbmQxLCBnYW1lLmhlaWdodCArIHJhbmQyXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5zaGFrZU1hZ25pdHVkZS0tO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zaGFrZU1hZ25pdHVkZSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgZ2FtZS53b3JsZC5zZXRCb3VuZHMoMCwgMCwgZ2FtZS53aWR0aCxnYW1lLmhlaWdodCk7IC8vIG5vcm1hbGl6ZSBhZnRlciBzaGFrZT9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9ic3RhY2xlQ29sbGlzaW9uSGFuZGxlcihwbGF5ZXIsIG9ic3RhY2xlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjb2xsaXNpb24gZGV0ZWN0ZWQhJyk7XG4gICAgfVxuXG59XG4iLCJjbGFzcyBVaURpc3RhbmNlIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnBsYXllckRpc3RhbmNlID0gMDtcbiAgICB9XG5cbiAgICBjcmVhdGUoZ2FtZSkge1xuICAgICAgICB2YXIgdyA9IGdhbWUud29ybGQud2lkdGg7XG4gICAgICAgIHRoaXMuZGlzcGxheSA9IGdhbWUuYWRkLnRleHQoMTYsIDE2LCAnRGlzdGFuY2U6IDAnLCB7XG4gICAgICAgICAgICBmb250U2l6ZTogJzI0cHgnLFxuICAgICAgICAgICAgZmlsbDogJyNmZmZmZWUnXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHVwZGF0ZShnYW1lKSB7XG4gICAgICAgIHRoaXMuZGlzcGxheS50ZXh0ID0gJ0Rpc3RhbmNlOiAnICsgTWF0aC5yb3VuZCh0aGlzLnBsYXllckRpc3RhbmNlIC8gMTApO1xuICAgIH1cblxuICAgIHVwZGF0ZVBsYXllckRpc3RhbmNlKGRpc3RhbmNlKSB7XG4gICAgICAgIHRoaXMucGxheWVyRGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICB9XG59XG4iLCJcbmNsYXNzIEdhbWUge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG5cbiAgICAgICAgY29uc29sZS5sb2coJy0tIC0tIC0tIC0tICAgVG9vdCBSaXBwaW5ndG9uIC0gQmxhc3RzIE9mZiEgICAtLSAtLSAtLSAtLScpO1xuXG4gICAgICAgIHZhciBwR2FtZSA9IG5ldyBQaGFzZXIuR2FtZShcbiAgICAgICAgICAgIDEzMzQsIDc1MCxcbiAgICAgICAgICAgIFBoYXNlci5BVVRPLFxuICAgICAgICAgICAgJydcbiAgICAgICAgKTtcblxuICAgICAgICBwR2FtZS5zdGF0ZS5hZGQoJ2Jvb3QnLCBuZXcgU2NyZWVuQm9vdCgpKTtcbiAgICAgICAgcEdhbWUuc3RhdGUuYWRkKCdtZW51JywgbmV3IFNjcmVlbk1lbnUoKSk7XG4gICAgICAgIHBHYW1lLnN0YXRlLmFkZCgncGxheScsIG5ldyBTY3JlZW5QbGF5KCkpO1xuXG4gICAgICAgIHRoaXMucEdhbWUgPSBwR2FtZTtcbiAgICB9XG5cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5wR2FtZS5zdGF0ZS5zdGFydCgnYm9vdCcpO1xuICAgIH1cbn1cbiIsImNsYXNzIFV0aWxPYnN0YWNsZUdlbmVyYXRvciB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wbGF5ZXJQb3NpdGlvblkgPSAwO1xuICAgICAgICB0aGlzLnBsYXllckRpc3RhbmNlID0gMDtcblxuICAgICAgICB0aGlzLm9ic3RhY2xlUG9vbCA9IHtcbiAgICAgICAgICAgICdzYXVjZXInOiBbXG4gICAgICAgICAgICAgICAgbmV3IENoYXJTYXVjZXIoKSxcbiAgICAgICAgICAgICAgICBuZXcgQ2hhclNhdWNlcigpLFxuICAgICAgICAgICAgICAgIG5ldyBDaGFyU2F1Y2VyKClcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAncHJvYmUnOiBbXG4gICAgICAgICAgICAgICAgbmV3IENoYXJQcm9iZSgpLFxuICAgICAgICAgICAgICAgIG5ldyBDaGFyUHJvYmUoKSxcbiAgICAgICAgICAgICAgICBuZXcgQ2hhclByb2JlKClcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAnd29ybSc6IFtcbiAgICAgICAgICAgICAgICBuZXcgQ2hhcldvcm0oKSxcbiAgICAgICAgICAgICAgICBuZXcgQ2hhcldvcm0oKSxcbiAgICAgICAgICAgICAgICBuZXcgQ2hhcldvcm0oKVxuICAgICAgICAgICAgXVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNyZWF0ZShnYW1lKSB7XG4gICAgICAgIHZhciBnZW5lcmF0b3IgPSB0aGlzO1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLm9ic3RhY2xlUG9vbCkuZm9yRWFjaChvYnN0YWNsZVR5cGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5vYnN0YWNsZVBvb2xbb2JzdGFjbGVUeXBlXS5mb3JFYWNoKG9ic3RhY2xlID0+IHtcbiAgICAgICAgICAgICAgICBvYnN0YWNsZS5jcmVhdGUoZ2FtZSk7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdG9yLnJlc2V0VG8ob2JzdGFjbGUsIC0yMDAsIC0yMDApO1xuICAgICAgICAgICAgICAgIG9ic3RhY2xlLnN0b3AoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFjdGl2ZU9ic3RhY2xlcyA9IFtdO1xuICAgIH1cblxuICAgIHVwZGF0ZShnYW1lKSB7XG4gICAgICAgIHZhciBpbmFjdGl2ZSA9IFtdO1xuICAgICAgICB2YXIgbGVuID0gdGhpcy5hY3RpdmVPYnN0YWNsZXMubGVuZ3RoO1xuICAgICAgICB2YXIgaSwgb2JzdGFjbGU7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgb2JzdGFjbGUgPSB0aGlzLmFjdGl2ZU9ic3RhY2xlc1tpXTtcbiAgICAgICAgICAgIG9ic3RhY2xlLnVwZGF0ZShnYW1lKTtcblxuICAgICAgICAgICAgaWYgKCFvYnN0YWNsZS5pbldvcmxkKCkpIHtcbiAgICAgICAgICAgICAgICBvYnN0YWNsZS5zdG9wKCk7XG4gICAgICAgICAgICAgICAgaW5hY3RpdmUucHVzaChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxlbiA9IGluYWN0aXZlLmxlbmd0aDtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAvLyB0YWtlIGl0IG91dCBvZiBhY3RpdmVPYnN0YWNsZXNcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlT2JzdGFjbGVzLnNwbGljZShpbmFjdGl2ZVtpXSwgMSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYWRkTmV3T2JzdGFjbGVzKGdhbWUpO1xuICAgIH1cblxuICAgIGFkZE5ld09ic3RhY2xlcyhnYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZU9ic3RhY2xlcy5sZW5ndGggPj0gMSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG9ic3RhY2xlID0gdGhpcy5nZXRSYW5kb21PYnN0YWNsZSgpO1xuICAgICAgICB0aGlzLnJlc2V0KGdhbWUsIG9ic3RhY2xlKTtcbiAgICAgICAgdGhpcy5hY3RpdmVPYnN0YWNsZXMucHVzaChvYnN0YWNsZSk7XG4gICAgfVxuXG4gICAgZ2V0UmFuZG9tT2JzdGFjbGUoKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModGhpcy5vYnN0YWNsZVBvb2wpO1xuICAgICAgICB2YXIgbnVtVHlwZXMgPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgdmFyIGtleUlkeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG51bVR5cGVzKTtcbiAgICAgICAgdmFyIGtleSA9IGtleXNba2V5SWR4XTtcbiAgICAgICAgdmFyIHBvb2wgPSB0aGlzLm9ic3RhY2xlUG9vbFtrZXldO1xuICAgICAgICByZXR1cm4gcG9vbFswXTtcbiAgICB9XG5cbiAgICByZXNldChnYW1lLCBvYnN0YWNsZSkge1xuICAgICAgICB2YXIgeCA9IGdhbWUud29ybGQud2lkdGggLSAxMDA7XG4gICAgICAgIHZhciBtaW55ID0gNjU7XG4gICAgICAgIHZhciBtYXh5ID0gZ2FtZS53b3JsZC5oZWlnaHQgLSAxNjU7XG5cbiAgICAgICAgdmFyIHkgPSB0aGlzLnBsYXllclBvc2l0aW9uWTtcbiAgICAgICAgY29uc29sZS5sb2coJ3BsYXllclBvc2l0aW9uWTogJyArIHRoaXMucGxheWVyUG9zaXRpb25ZKTtcbiAgICAgICAgaWYgKHkgPCBtaW55KSB7XG4gICAgICAgICAgICB5ID0gbWlueTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh5ID4gbWF4eSkge1xuICAgICAgICAgICAgeSA9IG1heHk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlc2V0VG8ob2JzdGFjbGUsIHgsIHkpO1xuICAgIH1cblxuICAgIHJlc2V0VG8ob2JzdGFjbGUsIHgsIHkpIHtcbiAgICAgICAgb2JzdGFjbGUucmVzZXQoeCwgeSk7XG4gICAgfVxuXG4gICAgdXBkYXRlUGxheWVyUG9zaXRpb24ocG9zKSB7XG4gICAgICAgIHRoaXMucGxheWVyUG9zaXRpb25ZID0gcG9zLnk7XG4gICAgfVxuXG4gICAgdXBkYXRlUGxheWVyRGlzdGFuY2UoZGlzdGFuY2UpIHtcbiAgICAgICAgdGhpcy5wbGF5ZXJEaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgIH1cblxuICAgIGdldENvbGxpZGVycygpIHtcbiAgICAgICAgdmFyIGNvbGxpZGVycyA9IFtdO1xuICAgICAgICB0aGlzLmFjdGl2ZU9ic3RhY2xlcy5mb3JFYWNoKG9ic3RhY2xlID0+IHtcbiAgICAgICAgICAgIGNvbGxpZGVycy5wdXNoKG9ic3RhY2xlLmdldENvbGxpZGVycygpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjb2xsaWRlcnM7XG4gICAgfVxufVxuIiwiY2xhc3MgVXRpbFByZWxvYWRlciB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcblxuICAgIH1cblxuICAgIHByZWxvYWQoZ2FtZSkge1xuICAgICAgICB0aGlzLmxvYWRTcHJpdGVzKGdhbWUpO1xuICAgICAgICB0aGlzLmxvYWRTcHJpdGVTaGVldHMoZ2FtZSk7XG4gICAgICAgIHRoaXMubG9hZEF1ZGlvKGdhbWUpO1xuICAgIH1cblxuICAgIC8vIEFzc2V0IExvYWRpbmcuLi5cbiAgICBsb2FkU3ByaXRlcyhnYW1lKSB7XG4gICAgICAgIC8vIGJhY2tncm91bmRcbiAgICAgICAgZ2FtZS5sb2FkLmltYWdlKCdiZy1zcGFjZScsICdpbWFnZXMvYmctc3BhY2UuanBnJyk7XG4gICAgICAgIGdhbWUubG9hZC5pbWFnZSgnYmctc3RhcnMtc21hbGwnLCAnaW1hZ2VzL2JnLXN0YXJzLXNtYWxsLnBuZycpO1xuICAgICAgICBnYW1lLmxvYWQuaW1hZ2UoJ2JnLXN0YXJzLWRlbnNlJywgJ2ltYWdlcy9iZy1zdGFycy1zbWFsbC1kZW5zZS5wbmcnKTtcbiAgICAgICAgZ2FtZS5sb2FkLmltYWdlKCdiZy1zdGFycy1sYXJnZScsICdpbWFnZXMvYmctc3RhcnMtbGFyZ2UucG5nJyk7XG4gICAgICAgIGdhbWUubG9hZC5pbWFnZSgnYmctaG9yaXpvbicsICdpbWFnZXMvYmctaG9yaXpvbi1ncmFkaWVudC5wbmcnKTtcbiAgICAgICAgZ2FtZS5sb2FkLmltYWdlKCdiZy1tb3VudGFpbnMtMDEnLCAnaW1hZ2VzL2JnLW1vdW50YWlucy0wMS5wbmcnKTtcbiAgICAgICAgZ2FtZS5sb2FkLmltYWdlKCdiZy1tb3VudGFpbnMtMDInLCAnaW1hZ2VzL2JnLW1vdW50YWlucy0wMi5wbmcnKTtcbiAgICAgICAgLy8gZ3JvdW5kXG4gICAgICAgIGdhbWUubG9hZC5pbWFnZSgnZ3JvdW5kJywgJ2ltYWdlcy9ncm91bmQuanBnJyk7XG4gICAgICAgIGdhbWUubG9hZC5pbWFnZSgndmlnbmV0dGUnLCAnaW1hZ2VzL3ZpZ25ldHRlLnBuZycpO1xuICAgIH1cblxuICAgIGxvYWRTcHJpdGVTaGVldHMoZ2FtZSkge1xuICAgICAgICAvLyBwbGF5ZXJcbiAgICAgICAgZ2FtZS5sb2FkLnNwcml0ZXNoZWV0KCdwbGF5ZXIudG9vdCcsICdpbWFnZXMvdG9vdC1zcHJpdGVzaGVldC5wbmcnLCA2NCwgOTYpO1xuICAgICAgICBnYW1lLmxvYWQuc3ByaXRlc2hlZXQoJ3BsYXllci5ibGFzdCcsICdpbWFnZXMvYmxhc3Qtc3ByaXRlc2hlZXQucG5nJywgNjAsIDYzKTtcbiAgICAgICAgLy8gT2JzdGFjbGVzXG4gICAgICAgIGdhbWUubG9hZC5zcHJpdGVzaGVldCgnb2JzLnNhdWNlcicsICdpbWFnZXMvc2F1Y2VyLXNwcml0ZXNoZWV0LnBuZycsIDI3NiwgMTAwKTtcbiAgICAgICAgZ2FtZS5sb2FkLnNwcml0ZXNoZWV0KCdvYnMucHJvYmUnLCAnaW1hZ2VzL3Byb2JlLXNwcml0ZXNoZWV0LnBuZycsIDEyOCwgMTA3KTtcbiAgICAgICAgZ2FtZS5sb2FkLnNwcml0ZXNoZWV0KCdvYnMud29ybScsICdpbWFnZXMvbW9vbndvcm0tc3ByaXRlc2hlZXQucG5nJywgMTMzLCA1MCk7XG5cbiAgICB9XG5cbiAgICBsb2FkQXVkaW8oZ2FtZSkge1xuICAgICAgICBnYW1lLmxvYWQuYXVkaW8oJ3BsYXllci5mYXJ0JywgJ3NvdW5kcy9mYXJ0LTAyLndhdicpO1xuICAgICAgICBnYW1lLmxvYWQuYXVkaW8oJ29icy5zYXVjZXIudWZvJywgJ3NvdW5kcy91Zm8tMDEud2F2Jyk7XG4gICAgfVxufVxuIiwiXG5jbGFzcyBFbnZCYWNrZ3JvdW5kIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgIH1cblxuICAgIGNyZWF0ZShnYW1lKSB7XG4gICAgICAgIHZhciB3ID0gZ2FtZS53b3JsZC53aWR0aDtcbiAgICAgICAgdmFyIGggPSBnYW1lLndvcmxkLmhlaWdodDtcbiAgICAgICAgdGhpcy5zcGFjZUJnID0gZ2FtZS5hZGQudGlsZVNwcml0ZSgwLCAwLCB3LCBoLCAnYmctc3BhY2UnKTtcbiAgICAgICAgdGhpcy5zdGFyc0xnID0gZ2FtZS5hZGQudGlsZVNwcml0ZSgwLCAwLCB3LCBoLCAnYmctc3RhcnMtbGFyZ2UnKTtcbiAgICAgICAgdGhpcy5zcGFjZURzID0gZ2FtZS5hZGQudGlsZVNwcml0ZSgwLCAwLCB3LCBoLCAnYmctc3RhcnMtZGVuc2UnKTtcbiAgICAgICAgdGhpcy5zdGFyc1NtID0gZ2FtZS5hZGQudGlsZVNwcml0ZSgwLCAwLCB3LCBoLCAnYmctc3RhcnMtc21hbGwnKTtcblxuICAgICAgICB0aGlzLmhvcml6b24gPSBnYW1lLmFkZC50aWxlU3ByaXRlKDAsIDAsIHcsIGgsICdiZy1ob3Jpem9uJyk7XG5cbiAgICAgICAgdGhpcy5tb3VudGFpbnMxID0gZ2FtZS5hZGQudGlsZVNwcml0ZSgwLCAwLCB3LCBoLCAnYmctbW91bnRhaW5zLTAxJyk7XG4gICAgICAgIHRoaXMubW91bnRhaW5zMiA9IGdhbWUuYWRkLnRpbGVTcHJpdGUoMCwgMCwgdywgaCwgJ2JnLW1vdW50YWlucy0wMicpO1xuICAgIH1cblxuICAgIHVwZGF0ZShnYW1lKSB7XG4gICAgICAgIHRoaXMuc3BhY2VCZy50aWxlUG9zaXRpb24ueCAtPSAwLjA3NTtcbiAgICAgICAgdGhpcy5zdGFyc0xnLnRpbGVQb3NpdGlvbi54IC09IDAuMTAwO1xuICAgICAgICB0aGlzLnNwYWNlRHMudGlsZVBvc2l0aW9uLnggLT0gMC4xMjU7XG4gICAgICAgIHRoaXMuc3RhcnNTbS50aWxlUG9zaXRpb24ueCAtPSAwLjE1MDtcblxuICAgICAgICB0aGlzLm1vdW50YWluczEudGlsZVBvc2l0aW9uLnggLT0gMC4yMDtcbiAgICAgICAgdGhpcy5tb3VudGFpbnMyLnRpbGVQb3NpdGlvbi54IC09IDAuMjU7XG4gICAgfVxufVxuIiwiY2xhc3MgRW52R3JvdW5kIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgIH1cblxuICAgIGNyZWF0ZShnYW1lKSB7XG4gICAgICAgIHZhciB3ID0gZ2FtZS53b3JsZC53aWR0aDtcbiAgICAgICAgdmFyIGggPSBnYW1lLndvcmxkLmhlaWdodDtcblxuICAgICAgICB2YXIgeVBvcyA9IGggLSA5NztcbiAgICAgICAgdGhpcy5zcHJpdGUgPSBnYW1lLmFkZC50aWxlU3ByaXRlKDAsIHlQb3MsIHcsIGgsICdncm91bmQnKTtcblxuICAgICAgICBnYW1lLnBoeXNpY3MuYXJjYWRlLmVuYWJsZSh0aGlzLnNwcml0ZSk7XG4gICAgICAgIHRoaXMuc3ByaXRlLmJvZHkuaW1tb3ZhYmxlID0gdHJ1ZTtcblxuICAgICAgICAvLyBidWcgaW4gcGhhc2VyIDIuMy4wXG4gICAgICAgIC8vIHNlZTogaHR0cDovL3d3dy5odG1sNWdhbWVkZXZzLmNvbS90b3BpYy8xMzg1Ni1wcm9ibGVtLXdpdGgtY29sbGlkZS1tZXRob2QtZnJvbS1waHlzaWNzLWFyY2FkZS1pbi1kaWZmZXJlbnQtdmVyc2lvbnMtb2YtcGhhc2VyLz9wPTc5MDMyXG4gICAgICAgIHRoaXMuc3ByaXRlLnBoeXNpY3NUeXBlID0gUGhhc2VyLlNQUklURTtcbiAgICB9XG5cbiAgICB1cGRhdGUoZ2FtZSkge1xuICAgICAgICB0aGlzLnNwcml0ZS50aWxlUG9zaXRpb24ueCAtPSAwLjg1O1xuICAgIH1cblxuICAgIGdldENvbGxpZGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlO1xuICAgIH1cbn1cbiIsImNsYXNzIEVudlZpZ25ldHRlIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgIH1cblxuICAgIGNyZWF0ZShnYW1lKSB7XG4gICAgICAgIHZhciB3ID0gZ2FtZS53b3JsZC53aWR0aDtcbiAgICAgICAgdmFyIGggPSBnYW1lLndvcmxkLmhlaWdodDtcbiAgICAgICAgdGhpcy52ID0gZ2FtZS5hZGQuc3ByaXRlKDAsIDAsICd2aWduZXR0ZScpO1xuICAgIH1cblxuICAgIHVwZGF0ZShnYW1lKSB7XG4gICAgfVxuXG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=