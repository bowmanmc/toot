"use strict";

var trConfig = {

    debug: true,
    gravity: 300,
    shakeMagnitude: 2,

    mute: false,

    player: {
        debug: false,
        fartStrength: 250,
        mute: false
    },

    obstacle: {
        debug: false,
        mute: true
    },

    setupGame: function setupGame(game, enablePhysics) {
        if (enablePhysics) {
            game.physics.startSystem(Phaser.Physics.ARCADE);
        }
        game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
        game.scale.pageAlignHorizontally = true;
        game.scale.pageAlignVertically = true;
        game.scale.setScreenSize(true);
        game.scale.refresh();
    }
};
"use strict";

var toot = {
    //gravity: (300 * 0.27),
    gravity: 300,
    fartStrength: 250,
    currentDistance: 0,

    soundsEnabled: false,

    // namespacing
    character: {},
    environment: {},
    obstacle: {},
    ui: {}
};

var run = function run() {
    var game = new Game();
    game.start();
};
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var CharPlayer = (function () {
    function CharPlayer() {
        _classCallCheck(this, CharPlayer);

        this.observers = {};
        this.distance = 0;
        this.blastVelocity = 0;
    }

    _createClass(CharPlayer, [{
        key: 'create',
        value: function create(game) {
            var startX = game.world.width * 0.15;
            var startY = game.world.height - 256;
            this.homePosition = startX;

            this.collisionGroup = game.add.group();
            game.physics.arcade.enable(this.collisionGroup);
            this.collisionGroup.checkWorldBounds = true;

            // spriteToot collider box is the helmet
            this.spriteToot = this.collisionGroup.create(startX, startY, 'player.toot');
            this.spriteToot.anchor.setTo(0.5, 0.5);
            game.physics.arcade.enable(this.spriteToot);
            this.spriteToot.body.gravity.y = trConfig.gravity;
            this.spriteToot.body.setSize(40, 40, 0, -10);

            this.spriteToot.animations.add('fart', [1, 1, 0], 4, false);

            // collider for the body
            var c1 = this.collisionGroup.create(startX, startY, '');
            c1.anchor.setTo(0.5, 0.5);
            game.physics.arcade.enable(c1);
            c1.body.allowGravity = true;
            c1.body.gravity.y = trConfig.gravity;
            c1.body.setSize(28, 28, 8, 24);

            // blast
            this.spriteBlast = game.add.sprite(startX, startY, 'player.blast');
            this.spriteBlast.animations.add('fart', [0, 0, 1, 3, 4, 4, 4, 0], 15, false);

            this.soundFart = game.add.audio('player.fart');
            this.soundFart.allowMultiple = false;
        }
    }, {
        key: 'update',
        value: function update(game) {

            //  Reset the players velocity (movement)
            var player = this;
            this.collisionGroup.forEach(function (child) {
                child.body.velocity.x = player.blastVelocity;
            });

            // Update blastVelocity if needed
            if (this.spriteToot.position.x > this.homePosition) {
                var diff = (this.spriteToot.position.x - this.homePosition) / 2;
                if (diff > 40) {
                    this.blastVelocity -= 3;
                }
            } else {
                this.blastVelocity = 0;
            }

            if (game.input.activePointer.isDown) {

                this.blastVelocity = 25;

                this.collisionGroup.forEach(function (child) {
                    child.body.velocity.y = trConfig.player.fartStrength * -1;
                });

                this.spriteToot.animations.play('fart');
                this.spriteBlast.animations.play('fart');
                this.notify('fart', {});

                if (!trConfig.mute && !trConfig.player.mute) {
                    this.soundFart.play('', 0, 1, false, false);
                }
            }

            this.spriteBlast.position.x = this.spriteToot.position.x - 72;
            this.spriteBlast.position.y = this.spriteToot.position.y + 34;

            // notify observers...
            this.notify('position', {
                x: this.spriteToot.position.x,
                y: this.spriteToot.position.y + 40
            });
            this.distance++;
            this.notify('distance', this.distance);

            if (trConfig.debug && trConfig.player.debug) {
                this.collisionGroup.forEach(function (child) {
                    game.debug.body(child);
                });
            }
        }
    }, {
        key: 'getColliders',
        value: function getColliders() {
            return this.collisionGroup;
        }
    }, {
        key: 'inWorld',
        value: function inWorld() {
            return this.spriteToot.inWorld;
        }
    }, {
        key: 'notify',
        value: function notify(event, arg) {
            var callbacks = this.observers[event];
            if (typeof callbacks === 'undefined') {
                return;
            }
            callbacks.forEach(function (callback) {
                callback(arg);
            });
        }
    }, {
        key: 'registerObserver',
        value: function registerObserver(event, callback) {
            if (typeof this.observers[event] === 'undefined') {
                this.observers[event] = [];
            }
            this.observers[event].push(callback);
        }
    }]);

    return CharPlayer;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var CharProbe = (function () {
    function CharProbe() {
        _classCallCheck(this, CharProbe);

        this.velocity = 200;

        this.rotMax = 0.05;
        this.rotInc = 0.005;

        this.centerY = 0;
        this.yDeltaMax = 125;
        this.yDeltaInc = 2;
    }

    _createClass(CharProbe, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            var h = game.world.height;

            this.collisionGroup = game.add.group();
            game.physics.arcade.enable(this.collisionGroup);
            this.collisionGroup.checkWorldBounds = true;

            this.spriteProbe = this.collisionGroup.create(w, 128, 'obs.probe');
            this.spriteProbe.scale.set(0.5, 0.5);
            this.spriteProbe.anchor.setTo(0.5, 0.5);
            game.physics.arcade.enable(this.spriteProbe);
            this.spriteProbe.body.allowGravity = false;
            this.spriteProbe.body.immovable = true;
        }
    }, {
        key: 'update',
        value: function update(game) {
            if (this.spriteProbe.rotation >= this.rotMax || this.spriteProbe.rotation <= this.rotMax * -1) {
                this.rotInc = this.rotInc * -1;
            }
            this.spriteProbe.rotation += this.rotInc;

            if (this.spriteProbe.position.y >= this.centerY + this.yDeltaMax || this.spriteProbe.position.y <= this.centerY - this.yDeltaMax) {
                this.yDeltaInc = this.yDeltaInc * -1;
            }
            this.spriteProbe.position.y += this.yDeltaInc;

            if (trConfig.obstacle.debug) {
                this.collisionGroup.forEach(function (child) {
                    game.debug.body(child);
                });
            }
        }
    }, {
        key: 'inWorld',
        value: function inWorld() {
            return this.spriteProbe.inWorld;
        }
    }, {
        key: 'stop',
        value: function stop() {}
    }, {
        key: 'reset',
        value: function reset(x, y) {
            console.log('resetting Probe to ' + x + ', ' + y);
            this.centerY = y;
            this.collisionGroup.forEach(function (item) {
                item.reset(x, y);
            });
            this.collisionGroup.setAll('body.velocity.x', this.velocity * -1);
        }
    }, {
        key: 'getColliders',
        value: function getColliders() {
            return this.collisionGroup;
        }
    }]);

    return CharProbe;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var CharSaucer = (function () {
    function CharSaucer() {
        _classCallCheck(this, CharSaucer);

        this.velocity = 300;
        this.rotMax = 0.025;
        this.rotInc = 0.0025;
    }

    _createClass(CharSaucer, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            var h = game.world.height;

            this.soundUfo = game.add.audio('obs.saucer.ufo');
            this.soundUfo.allowMultiple = false;

            this.collisionGroup = game.add.group();
            game.physics.arcade.enable(this.collisionGroup);
            //this.collisionGroup.body.allowGravity = false;
            //this.collisionGroup.body.immovable = true;
            this.collisionGroup.checkWorldBounds = true;

            //this.spriteSaucer = this.game.add.sprite(w, 128, 'saucer');
            this.spriteSaucer = this.collisionGroup.create(w, 128, 'obs.saucer');
            this.spriteSaucer.anchor.setTo(0.5, 0.5);
            game.physics.arcade.enable(this.spriteSaucer);
            this.spriteSaucer.body.allowGravity = false;
            this.spriteSaucer.body.immovable = true;
            this.spriteSaucer.body.setSize(64, 20, -10, -37);

            // Additional collider boxes to match the shape of the saucer more closely
            var c1 = this.collisionGroup.create(w, 128, '');
            c1.anchor.setTo(0.5, 0.5);
            game.physics.arcade.enable(c1);
            c1.body.allowGravity = false;
            c1.body.immovable = true;
            c1.body.setSize(200, 22, -4, -16);

            var c2 = this.collisionGroup.create(w, 128, '');
            c2.anchor.setTo(0.5, 0.5);
            game.physics.arcade.enable(c2);
            c2.body.allowGravity = false;
            c2.body.immovable = true;
            c2.body.setSize(270, 32, -4, 11);

            var c3 = this.collisionGroup.create(w, 128, '');
            c3.anchor.setTo(0.5, 0.5);
            game.physics.arcade.enable(c3);
            c3.allowGravity = false;
            c3.body.immovable = true;
            c3.body.setSize(200, 16, -4, 35);
        }
    }, {
        key: 'update',
        value: function update(game) {
            if (this.spriteSaucer.rotation >= this.rotMax || this.spriteSaucer.rotation <= this.rotMax * -1) {
                this.rotInc = this.rotInc * -1;
            }
            this.spriteSaucer.rotation += this.rotInc;

            if (this.debug) {
                this.collisionGroup.forEach(function (child) {
                    game.debug.body(child);
                });
            }
        }
    }, {
        key: 'stop',
        value: function stop() {
            this.soundUfo.stop();
        }
    }, {
        key: 'reset',
        value: function reset(x, y) {
            console.log('resetting saucer to ' + x + ', ' + y);
            this.collisionGroup.forEach(function (item) {
                item.reset(x, y);
            });
            this.collisionGroup.setAll('body.velocity.x', this.velocity * -1);

            if (!trConfig.mute && !trConfig.obstacle.mute) {
                this.soundUfo.play('', 0, 1, true, false);
            }
        }
    }, {
        key: 'getColliders',
        value: function getColliders() {
            return this.collisionGroup;
        }
    }, {
        key: 'inWorld',
        value: function inWorld() {
            return this.spriteSaucer.inWorld;
        }
    }]);

    return CharSaucer;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var CharWorm = (function () {
    function CharWorm() {
        _classCallCheck(this, CharWorm);

        this.velocity = 100;
        this.yPos = 0;
    }

    _createClass(CharWorm, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            var h = game.world.height;
            this.yPos = h - (97 + 47);

            this.collisionGroup = game.add.group();
            game.physics.arcade.enable(this.collisionGroup);
            this.collisionGroup.checkWorldBounds = true;

            this.spriteWorm = this.collisionGroup.create(w, 50, 'obs.worm');
            game.physics.arcade.enable(this.spriteWorm);
            this.spriteWorm.body.allowGravity = false;
            this.spriteWorm.body.immovable = true;
        }
    }, {
        key: 'update',
        value: function update(game) {}
    }, {
        key: 'inWorld',
        value: function inWorld() {
            return this.spriteWorm.inWorld;
        }
    }, {
        key: 'stop',
        value: function stop() {}
    }, {
        key: 'reset',
        value: function reset(x, y) {
            console.log('resetting worm to ' + x);
            var worm = this;
            this.collisionGroup.forEach(function (item) {
                item.reset(x, worm.yPos);
            });
            this.collisionGroup.setAll('body.velocity.x', this.velocity * -1);
        }
    }, {
        key: 'getColliders',
        value: function getColliders() {
            return this.collisionGroup;
        }
    }]);

    return CharWorm;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var EnvBackground = (function () {
    function EnvBackground() {
        _classCallCheck(this, EnvBackground);
    }

    _createClass(EnvBackground, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            var h = game.world.height;
            this.spaceBg = game.add.tileSprite(0, 0, w, h, 'bg-space');
            this.starsLg = game.add.tileSprite(0, 0, w, h, 'bg-stars-large');
            this.spaceDs = game.add.tileSprite(0, 0, w, h, 'bg-stars-dense');
            this.starsSm = game.add.tileSprite(0, 0, w, h, 'bg-stars-small');

            this.horizon = game.add.tileSprite(0, 156, w, h, 'bg-horizon');
        }
    }, {
        key: 'update',
        value: function update(game) {
            this.spaceBg.tilePosition.x -= 0.075;
            this.starsLg.tilePosition.x -= 0.1;
            this.spaceDs.tilePosition.x -= 0.125;
            this.starsSm.tilePosition.x -= 0.15;
        }
    }]);

    return EnvBackground;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var EnvGround = (function () {
    function EnvGround() {
        _classCallCheck(this, EnvGround);
    }

    _createClass(EnvGround, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            var h = game.world.height;

            var yPos = h - 97;
            this.sprite = game.add.tileSprite(0, yPos, w, h, 'ground');

            game.physics.arcade.enable(this.sprite);
            this.sprite.body.immovable = true;

            // bug in phaser 2.3.0
            // see: http://www.html5gamedevs.com/topic/13856-problem-with-collide-method-from-physics-arcade-in-different-versions-of-phaser/?p=79032
            this.sprite.physicsType = Phaser.SPRITE;
        }
    }, {
        key: 'update',
        value: function update(game) {
            this.sprite.tilePosition.x -= 0.85;
        }
    }, {
        key: 'getColliders',
        value: function getColliders() {
            return this.sprite;
        }
    }]);

    return EnvGround;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var EnvVignette = (function () {
    function EnvVignette() {
        _classCallCheck(this, EnvVignette);
    }

    _createClass(EnvVignette, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            var h = game.world.height;
            this.v = game.add.sprite(0, 0, 'vignette');
        }
    }, {
        key: 'update',
        value: function update(game) {}
    }]);

    return EnvVignette;
})();
/**
 * ScreenBoot
 *
 * This is the logo/loading screen that shows when the game starts up.
 *      - Show company logo
 *      - Load game assets (graphics, sounds, etc...)
 *      - Show loading progress
 *      - Set mood for game
 *
 */
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var ScreenBoot = (function () {
    function ScreenBoot() {
        _classCallCheck(this, ScreenBoot);
    }

    _createClass(ScreenBoot, [{
        key: 'preload',
        value: function preload(game) {
            this.startTime = moment();
            this.isLoaded = false;
            this.minTime = moment().add(ScreenBoot.MIN_BOOT_TIME, 'seconds');

            console.log('ScreenBoot.preload');
        }
    }, {
        key: 'create',
        value: function create(game) {
            var loadTime = moment();
            var duration = moment.utc(loadTime.diff(this.startTime));
            console.log('ScreenBoot assets loaded in ' + duration.format('HH:mm:ss:SSS'));
            this.isLoaded = true;

            trConfig.setupGame(game);

            var x = game.world.centerX;
            var y = game.world.centerY;
            var msg = 'MorphZero presents';
            var text = game.add.text(x, y, msg, {
                font: '32px Arial',
                fill: '#ddddd9',
                align: 'center'
            });
            text.anchor.setTo(0.5, 0.5);
        }
    }, {
        key: 'update',
        value: function update(game) {
            var now = moment();
            if (this.isLoaded && now.isAfter(this.minTime)) {
                game.state.start('menu');
            }
        }
    }]);

    return ScreenBoot;
})();

ScreenBoot.MIN_BOOT_TIME = 1.5; // seconds
/**
 * ScreenLost
 *
 * Game Over Screen
 */
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var ScreenLost = (function () {
    function ScreenLost() {
        _classCallCheck(this, ScreenLost);
    }

    _createClass(ScreenLost, [{
        key: 'preload',
        value: function preload(game) {
            console.log('ScreenLost.preload start...');
            this.startTime = moment();
            this.isLoaded = false;
        }
    }, {
        key: 'create',
        value: function create(game) {
            var loadTime = moment();
            var duration = moment.utc(loadTime.diff(this.startTime));
            console.log('ScreenLost assets loaded in ' + duration.format('HH:mm:ss:SSS'));
            this.isLoaded = true;

            trConfig.setupGame(game);

            var x = game.world.centerX;
            var y = game.world.centerY;
            var msg = 'Try Again';
            var text = game.add.text(x, y, msg, {
                font: '32px Arial',
                fill: '#ddddd9',
                align: 'center'
            });
            text.anchor.setTo(0.5, 0.5);

            game.input.onDown.addOnce(function () {
                game.state.start('play');
            }, this);
        }
    }]);

    return ScreenLost;
})();
/**
 * ScreenMenu
 *
 * This is the menu screen. Options for:
 *      - Starting a game
 *      - About/Credits page
 *      - Settings page?
 *
 */
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var ScreenMenu = (function () {
    function ScreenMenu() {
        _classCallCheck(this, ScreenMenu);
    }

    _createClass(ScreenMenu, [{
        key: 'preload',
        value: function preload(game) {
            console.log('ScreenMenu.preload start...');
            this.startTime = moment();
            this.isLoaded = false;

            var preloader = new UtilPreloader();
            preloader.preload(game);
        }
    }, {
        key: 'create',
        value: function create(game) {
            var loadTime = moment();
            var duration = moment.utc(loadTime.diff(this.startTime));
            console.log('ScreenMenu assets loaded in ' + duration.format('HH:mm:ss:SSS'));
            this.isLoaded = true;

            trConfig.setupGame(game);

            var x = game.world.centerX;
            var y = game.world.centerY;
            var msg = 'play';
            var text = game.add.text(x, y, msg, {
                font: '32px Arial',
                fill: '#ddddd9',
                align: 'center'
            });
            text.anchor.setTo(0.5, 0.5);

            game.input.onDown.addOnce(function () {
                game.state.start('play');
            }, this);
        }
    }, {
        key: 'update',
        value: function update(game) {}
    }]);

    return ScreenMenu;
})();
/**
 * ScreenPlay
 *
 * This is the main play/game screen.
 *
 */
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var ScreenPlay = (function () {
    function ScreenPlay() {
        _classCallCheck(this, ScreenPlay);
    }

    _createClass(ScreenPlay, [{
        key: 'preload',
        value: function preload(game) {
            // Create game objects. Order here matters! Layered Back -> Front
            this.objects = [];
            this.objects.push(new EnvBackground());

            //this.ground = new EnvGround();
            //this.objects.push(this.ground);

            this.player = new CharPlayer();
            this.objects.push(this.player);

            var obstacles = new UtilObstacleGenerator();
            var uiDistance = new UiDistance();
            this.objects.push(obstacles);
            this.objects.push(uiDistance);
            this.player.registerObserver('position', function (pos) {
                obstacles.updatePlayerPosition(pos);
            });
            this.player.registerObserver('distance', function (distance) {
                obstacles.updatePlayerDistance(distance);
                uiDistance.updatePlayerDistance(distance);
            });
            this.obstacles = obstacles;
            this.uiDistance = uiDistance;

            var playScreen = this;
            this.player.registerObserver('fart', function () {
                playScreen.shakeMagnitude = trConfig.shakeMagnitude;
                if (window.navigator && window.navigator.vibrate) {
                    navigator.vibrate(trConfig.shakeMagnitude * 10);
                }
            });

            this.objects.push(new EnvVignette());
        }
    }, {
        key: 'create',
        value: function create(game) {
            if (trConfig.debug) {
                this.stats = new Stats();
                document.body.appendChild(this.stats.domElement);
                this.stats.domElement.style.position = 'absolute';
                this.stats.domElement.style.top = '0px';
            }

            trConfig.setupGame(game);

            // create()
            this.objects.forEach(function (obj) {
                obj.create(game);
            });
        }
    }, {
        key: 'update',
        value: function update(game) {

            if (trConfig.debug) {
                this.stats.begin();
            }

            // // player vs ground
            // game.physics.arcade.collide(
            //     this.player.getColliders(),
            //     this.ground.getColliders()
            // );
            // player vs obstacles
            game.physics.arcade.collide(this.player.getColliders(), this.obstacles.getColliders(), function () {
                console.log('Player collision detected!');
                this.gameLost(game);
            }, null, this);
            if (!this.player.inWorld()) {
                console.log('Player off world!');
                this.gameLost(game);
            }

            // update all objects
            this.objects.forEach(function (obj) {
                obj.update(game);
            });

            this.shake(game);

            if (trConfig.debug) {
                this.stats.end();
            }
        }
    }, {
        key: 'shake',
        value: function shake(game) {
            if (this.shakeMagnitude > 0) {
                var rand1 = game.rnd.integerInRange(this.shakeMagnitude * -1, this.shakeMagnitude);
                var rand2 = game.rnd.integerInRange(this.shakeMagnitude * -1, this.shakeMagnitude);
                game.world.setBounds(rand1, rand2, game.width + rand1, game.height + rand2);
                this.shakeMagnitude--;

                if (this.shakeMagnitude <= 0) {
                    game.world.setBounds(0, 0, game.width, game.height); // normalize after shake?
                }
            }
        }
    }, {
        key: 'gameLost',
        value: function gameLost(game) {
            this.objects.forEach(function (obj) {});
            game.state.start('lost');
        }
    }]);

    return ScreenPlay;
})();

//obj.stop(game);
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Game = (function () {
    function Game() {
        _classCallCheck(this, Game);

        console.log('-- -- -- --   Toot Rippington - Blasts Off!   -- -- -- --');

        var pGame = new Phaser.Game(1334, 750, Phaser.AUTO, '');

        pGame.state.add('boot', new ScreenBoot());
        pGame.state.add('menu', new ScreenMenu());
        pGame.state.add('play', new ScreenPlay());
        pGame.state.add('lost', new ScreenLost());

        this.pGame = pGame;
    }

    _createClass(Game, [{
        key: 'start',
        value: function start() {
            //this.pGame.state.start('boot');
            this.pGame.state.start('menu');
        }
    }]);

    return Game;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var UtilObstacleGenerator = (function () {
    function UtilObstacleGenerator() {
        _classCallCheck(this, UtilObstacleGenerator);

        this.playerPositionY = 0;
        this.playerDistance = 0;

        this.obstaclePool = {
            'saucer': [new CharSaucer(), new CharSaucer(), new CharSaucer()] /*,
                                                                             'probe': [
                                                                                new CharProbe(),
                                                                                new CharProbe(),
                                                                                new CharProbe()
                                                                             ]*/
        };
    }

    _createClass(UtilObstacleGenerator, [{
        key: 'create',
        value: function create(game) {
            var _this = this;

            var generator = this;
            Object.keys(this.obstaclePool).forEach(function (obstacleType) {
                _this.obstaclePool[obstacleType].forEach(function (obstacle) {
                    obstacle.create(game);
                    generator.resetTo(obstacle, -200, -200);
                    obstacle.stop();
                });
            });

            this.activeObstacles = [];
        }
    }, {
        key: 'update',
        value: function update(game) {
            var inactive = [];
            var len = this.activeObstacles.length;
            var i, obstacle;
            for (i = 0; i < len; i++) {
                obstacle = this.activeObstacles[i];
                obstacle.update(game);

                if (!obstacle.inWorld()) {
                    obstacle.stop();
                    inactive.push(i);
                }
            }

            len = inactive.length;
            for (i = 0; i < len; i++) {
                // take it out of activeObstacles
                this.activeObstacles.splice(inactive[i], 1);
            }

            this.addNewObstacles(game);
        }
    }, {
        key: 'addNewObstacles',
        value: function addNewObstacles(game) {
            if (this.activeObstacles.length >= 1) {
                return;
            }

            var obstacle = this.getRandomObstacle();
            this.reset(game, obstacle);
            this.activeObstacles.push(obstacle);
        }
    }, {
        key: 'getRandomObstacle',
        value: function getRandomObstacle() {
            var keys = Object.keys(this.obstaclePool);
            var numTypes = keys.length;
            var keyIdx = Math.floor(Math.random() * numTypes);
            var key = keys[keyIdx];
            var pool = this.obstaclePool[key];
            return pool[0];
        }
    }, {
        key: 'reset',
        value: function reset(game, obstacle) {
            var x = game.world.width - 100;
            var miny = 65;
            var maxy = game.world.height - 165;

            var y = this.playerPositionY;
            console.log('playerPositionY: ' + this.playerPositionY);
            if (y < miny) {
                y = miny;
            } else if (y > maxy) {
                y = maxy;
            }

            this.resetTo(obstacle, x, y);
        }
    }, {
        key: 'resetTo',
        value: function resetTo(obstacle, x, y) {
            obstacle.reset(x, y);
        }
    }, {
        key: 'updatePlayerPosition',
        value: function updatePlayerPosition(pos) {
            this.playerPositionY = pos.y;
        }
    }, {
        key: 'updatePlayerDistance',
        value: function updatePlayerDistance(distance) {
            this.playerDistance = distance;
        }
    }, {
        key: 'getColliders',
        value: function getColliders() {
            var colliders = [];
            this.activeObstacles.forEach(function (obstacle) {
                colliders.push(obstacle.getColliders());
            });
            return colliders;
        }
    }]);

    return UtilObstacleGenerator;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var UtilPreloader = (function () {
    function UtilPreloader() {
        _classCallCheck(this, UtilPreloader);
    }

    _createClass(UtilPreloader, [{
        key: 'preload',
        value: function preload(game) {
            this.loadSprites(game);
            this.loadSpriteSheets(game);
            this.loadAudio(game);
        }
    }, {
        key: 'loadSprites',

        // Asset Loading...
        value: function loadSprites(game) {
            // background
            game.load.image('bg-space', 'images/bg-space.jpg');
            game.load.image('bg-stars-small', 'images/bg-stars-small.png');
            game.load.image('bg-stars-dense', 'images/bg-stars-small-dense.png');
            game.load.image('bg-stars-large', 'images/bg-stars-large.png');
            game.load.image('bg-horizon', 'images/bg-horizon-gradient.png');
            game.load.image('bg-mountains-01', 'images/bg-mountains-01.png');
            game.load.image('bg-mountains-02', 'images/bg-mountains-02.png');
            // ground
            game.load.image('ground', 'images/ground.jpg');
            game.load.image('vignette', 'images/vignette.png');
        }
    }, {
        key: 'loadSpriteSheets',
        value: function loadSpriteSheets(game) {
            // player
            game.load.spritesheet('player.toot', 'images/toot-spritesheet.png', 64, 96);
            game.load.spritesheet('player.blast', 'images/blast-spritesheet.png', 60, 63);
            // Obstacles
            game.load.spritesheet('obs.saucer', 'images/saucer-spritesheet.png', 276, 100);
            game.load.spritesheet('obs.probe', 'images/probe-spritesheet.png', 128, 107);
            game.load.spritesheet('obs.worm', 'images/moonworm-spritesheet.png', 133, 50);
        }
    }, {
        key: 'loadAudio',
        value: function loadAudio(game) {
            game.load.audio('player.fart', 'sounds/fart-02.wav');
            game.load.audio('obs.saucer.ufo', 'sounds/ufo-01.wav');
        }
    }]);

    return UtilPreloader;
})();
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var UiDistance = (function () {
    function UiDistance() {
        _classCallCheck(this, UiDistance);

        this.playerDistance = 0;
    }

    _createClass(UiDistance, [{
        key: 'create',
        value: function create(game) {
            var w = game.world.width;
            this.display = game.add.text(16, 16, 'Distance: 0', {
                fontSize: '24px',
                fill: '#ffffee'
            });
        }
    }, {
        key: 'update',
        value: function update(game) {
            this.display.text = 'Distance: ' + Math.round(this.playerDistance / 10);
        }
    }, {
        key: 'updatePlayerDistance',
        value: function updatePlayerDistance(distance) {
            this.playerDistance = distance;
        }
    }]);

    return UiDistance;
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy5qcyIsIm1haW4uanMiLCJjaGFyYWN0ZXIvcGxheWVyLmpzIiwiY2hhcmFjdGVyL3Byb2JlLmpzIiwiY2hhcmFjdGVyL3NhdWNlci5qcyIsImNoYXJhY3Rlci93b3JtLmpzIiwiZW52aXJvbm1lbnQvYmFja2dyb3VuZC5qcyIsImVudmlyb25tZW50L2dyb3VuZC5qcyIsImVudmlyb25tZW50L3ZpZ25ldHRlLmpzIiwic2NyZWVuL2Jvb3QuanMiLCJzY3JlZW4vbG9zdC5qcyIsInNjcmVlbi9tZW51LmpzIiwic2NyZWVuL3BsYXkuanMiLCJ1dGlsL2dhbWUuanMiLCJ1dGlsL29ic3RhY2xlZ2VuZXJhdG9yLmpzIiwidXRpbC9wcmVsb2FkZXIuanMiLCJ1aS9kaXN0YW5jZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksUUFBUSxHQUFHOztBQUVYLFNBQUssRUFBRSxJQUFJO0FBQ1gsV0FBTyxFQUFFLEdBQUc7QUFDWixrQkFBYyxFQUFFLENBQUM7O0FBRWpCLFFBQUksRUFBRSxLQUFLOztBQUVYLFVBQU0sRUFBRTtBQUNKLGFBQUssRUFBRSxLQUFLO0FBQ1osb0JBQVksRUFBRSxHQUFHO0FBQ2pCLFlBQUksRUFBRSxLQUFLO0tBQ2Q7O0FBRUQsWUFBUSxFQUFFO0FBQ04sYUFBSyxFQUFFLEtBQUs7QUFDWixZQUFJLEVBQUUsSUFBSTtLQUNiOztBQUVELGFBQVMsRUFBRSxtQkFBUyxJQUFJLEVBQUUsYUFBYSxFQUFFO0FBQ3JDLFlBQUksYUFBYSxFQUFFO0FBQ2YsZ0JBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDbkQ7QUFDRCxZQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQztBQUNwRCxZQUFJLENBQUMsS0FBSyxDQUFDLHFCQUFxQixHQUFHLElBQUksQ0FBQztBQUN4QyxZQUFJLENBQUMs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Q0FBQztTQUMxRDs7O1dBekNDLGFBQWE7Ozs7Ozs7O0lDQWIsVUFBVTtBQUVELGFBRlQsVUFBVSxHQUVFOzhCQUZaLFVBQVU7O0FBR1IsWUFBSSxDQUFDLGNBQWMsR0FBRyxDQUFDLENBQUM7S0FDM0I7O2lCQUpDLFVBQVU7O2VBTU4sZ0JBQUMsSUFBSSxFQUFFO0FBQ1QsZ0JBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO0FBQ3pCLGdCQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsYUFBYSxFQUFFO0FBQ2hELHdCQUFRLEVBQUUsTUFBTTtBQUNoQixvQkFBSSxFQUFFLFNBQVM7YUFDbEIsQ0FBQyxDQUFDO1NBQ047OztlQUVLLGdCQUFDLElBQUksRUFBRTtBQUNULGdCQUFJLENBQUMsT0FBTyxDQUFDLElBQUksR0FBRyxZQUFZLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsY0FBYyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1NBQzNFOzs7ZUFFbUIsOEJBQUMsUUFBUSxFQUFFO0FBQzNCLGdCQUFJLENBQUMsY0FBYyxHQUFHLFFBQVEsQ0FBQztTQUNsQzs7O1dBcEJDLFVBQVUiLCJmaWxlIjoiZ2FtZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdHJDb25maWcgPSB7XG5cbiAgICBkZWJ1ZzogdHJ1ZSxcbiAgICBncmF2aXR5OiAzMDAsXG4gICAgc2hha2VNYWduaXR1ZGU6IDIsXG5cbiAgICBtdXRlOiBmYWxzZSxcblxuICAgIHBsYXllcjoge1xuICAgICAgICBkZWJ1ZzogZmFsc2UsXG4gICAgICAgIGZhcnRTdHJlbmd0aDogMjUwLFxuICAgICAgICBtdXRlOiBmYWxzZVxuICAgIH0sXG5cbiAgICBvYnN0YWNsZToge1xuICAgICAgICBkZWJ1ZzogZmFsc2UsXG4gICAgICAgIG11dGU6IHRydWVcbiAgICB9LFxuXG4gICAgc2V0dXBHYW1lOiBmdW5jdGlvbihnYW1lLCBlbmFibGVQaHlzaWNzKSB7XG4gICAgICAgIGlmIChlbmFibGVQaHlzaWNzKSB7XG4gICAgICAgICAgICBnYW1lLnBoeXNpY3Muc3RhcnRTeXN0ZW0oUGhhc2VyLlBoeXNpY3MuQVJDQURFKTtcbiAgICAgICAgfVxuICAgICAgICBnYW1lLnNjYWxlLnNjYWxlTW9kZSA9IFBoYXNlci5TY2FsZU1hbmFnZXIuU0hPV19BTEw7XG4gICAgICAgIGdhbWUuc2NhbGUucGFnZUFsaWduSG9yaXpvbnRhbGx5ID0gdHJ1ZTtcbiAgICAgICAgZ2FtZS5zY2FsZS5wYWdlQWxpZ25WZXJ0aWNhbGx5ID0gdHJ1ZTtcbiAgICAgICAgZ2FtZS5zY2FsZS5zZXRTY3JlZW5TaXplKHRydWUpO1xuICAgICAgICBnYW1lLnNjYWxlLnJlZnJlc2goKTtcbiAgICB9XG59O1xuIiwidmFyIHRvb3QgPSB7XG4gICAgLy9ncmF2aXR5OiAoMzAwICogMC4yNyksXG4gICAgZ3Jhdml0eTogMzAwLFxuICAgIGZhcnRTdHJlbmd0aDogMjUwLFxuICAgIGN1cnJlbnREaXN0YW5jZTogMCxcblxuICAgIHNvdW5kc0VuYWJsZWQ6IGZhbHNlLFxuXG4gICAgLy8gbmFtZXNwYWNpbmdcbiAgICBjaGFyYWN0ZXI6IHt9LFxuICAgIGVudmlyb25tZW50OiB7fSxcbiAgICBvYnN0YWNsZToge30sXG4gICAgdWk6IHt9XG59O1xuXG52YXIgcnVuID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGdhbWUgPSBuZXcgR2FtZSgpO1xuICAgIGdhbWUuc3RhcnQoKTtcbn07XG4iLCJcbmNsYXNzIENoYXJQbGF5ZXIge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0ge307XG4gICAgICAgIHRoaXMuZGlzdGFuY2UgPSAwO1xuICAgICAgICB0aGlzLmJsYXN0VmVsb2NpdHkgPSAwO1xuICAgIH1cblxuICAgIGNyZWF0ZShnYW1lKSB7XG4gICAgICAgIHZhciBzdGFydFggPSBnYW1lLndvcmxkLndpZHRoICogMC4xNTtcbiAgICAgICAgdmFyIHN0YXJ0WSA9IGdhbWUud29ybGQuaGVpZ2h0IC0gMjU2O1xuICAgICAgICB0aGlzLmhvbWVQb3NpdGlvbiA9IHN0YXJ0WDtcblxuICAgICAgICB0aGlzLmNvbGxpc2lvbkdyb3VwID0gZ2FtZS5hZGQuZ3JvdXAoKTtcbiAgICAgICAgZ2FtZS5waHlzaWNzLmFyY2FkZS5lbmFibGUodGhpcy5jb2xsaXNpb25Hcm91cCk7XG4gICAgICAgIHRoaXMuY29sbGlzaW9uR3JvdXAuY2hlY2tXb3JsZEJvdW5kcyA9IHRydWU7XG5cbiAgICAgICAgLy8gc3ByaXRlVG9vdCBjb2xsaWRlciBib3ggaXMgdGhlIGhlbG1ldFxuICAgICAgICB0aGlzLnNwcml0ZVRvb3QgPSB0aGlzLmNvbGxpc2lvbkdyb3VwLmNyZWF0ZShzdGFydFgsIHN0YXJ0WSwgJ3BsYXllci50b290Jyk7XG4gICAgICAgIHRoaXMuc3ByaXRlVG9vdC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICAgICAgICBnYW1lLnBoeXNpY3MuYXJjYWRlLmVuYWJsZSh0aGlzLnNwcml0ZVRvb3QpO1xuICAgICAgICB0aGlzLnNwcml0ZVRvb3QuYm9keS5ncmF2aXR5LnkgPSB0ckNvbmZpZy5ncmF2aXR5O1xuICAgICAgICB0aGlzLnNwcml0ZVRvb3QuYm9keS5zZXRTaXplKDQwLCA0MCwgMCwgLTEwKTtcblxuICAgICAgICB0aGlzLnNwcml0ZVRvb3QuYW5pbWF0aW9ucy5hZGQoJ2ZhcnQnLCBbMSwgMSwgMF0sIDQsIGZhbHNlKTtcblxuICAgICAgICAvLyBjb2xsaWRlciBmb3IgdGhlIGJvZHlcbiAgICAgICAgdmFyIGMxID0gdGhpcy5jb2xsaXNpb25Hcm91cC5jcmVhdGUoc3RhcnRYLCBzdGFydFksICcnKTtcbiAgICAgICAgYzEuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcbiAgICAgICAgZ2FtZS5waHlzaWNzLmFyY2FkZS5lbmFibGUoYzEpO1xuICAgICAgICBjMS5ib2R5LmFsbG93R3Jhdml0eSA9IHRydWU7XG4gICAgICAgIGMxLmJvZHkuZ3Jhdml0eS55ID0gdHJDb25maWcuZ3Jhdml0eTtcbiAgICAgICAgYzEuYm9keS5zZXRTaXplKDI4LCAyOCwgOCwgMjQpO1xuXG4gICAgICAgIC8vIGJsYXN0XG4gICAgICAgIHRoaXMuc3ByaXRlQmxhc3QgPSBnYW1lLmFkZC5zcHJpdGUoc3RhcnRYLCBzdGFydFksICdwbGF5ZXIuYmxhc3QnKTtcbiAgICAgICAgdGhpcy5zcHJpdGVCbGFzdC5hbmltYXRpb25zLmFkZCgnZmFydCcsIFswLCAwLCAxLCAzLCA0LCA0LCA0LCAwXSwgMTUsIGZhbHNlKTtcblxuICAgICAgICB0aGlzLnNvdW5kRmFydCA9IGdhbWUuYWRkLmF1ZGlvKCdwbGF5ZXIuZmFydCcpO1xuICAgICAgICB0aGlzLnNvdW5kRmFydC5hbGxvd011bHRpcGxlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdXBkYXRlKGdhbWUpIHtcblxuICAgICAgICAvLyAgUmVzZXQgdGhlIHBsYXllcnMgdmVsb2NpdHkgKG1vdmVtZW50KVxuICAgICAgICB2YXIgcGxheWVyID0gdGhpcztcbiAgICAgICAgdGhpcy5jb2xsaXNpb25Hcm91cC5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSB7XG4gICAgICAgICAgICBjaGlsZC5ib2R5LnZlbG9jaXR5LnggPSBwbGF5ZXIuYmxhc3RWZWxvY2l0eTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVXBkYXRlIGJsYXN0VmVsb2NpdHkgaWYgbmVlZGVkXG4gICAgICAgIGlmICh0aGlzLnNwcml0ZVRvb3QucG9zaXRpb24ueCA+IHRoaXMuaG9tZVBvc2l0aW9uKSB7XG4gICAgICAgICAgICB2YXIgZGlmZiA9ICh0aGlzLnNwcml0ZVRvb3QucG9zaXRpb24ueCAtIHRoaXMuaG9tZVBvc2l0aW9uKSAvIDI7XG4gICAgICAgICAgICBpZiAoZGlmZiA+IDQwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ibGFzdFZlbG9jaXR5IC09IDM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJsYXN0VmVsb2NpdHkgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGdhbWUuaW5wdXQuYWN0aXZlUG9pbnRlci5pc0Rvd24pIHtcblxuICAgICAgICAgICAgdGhpcy5ibGFzdFZlbG9jaXR5ID0gMjU7XG5cbiAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uR3JvdXAuZm9yRWFjaChmdW5jdGlvbihjaGlsZCkge1xuICAgICAgICAgICAgICAgIGNoaWxkLmJvZHkudmVsb2NpdHkueSA9IHRyQ29uZmlnLnBsYXllci5mYXJ0U3RyZW5ndGggKiAtMTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnNwcml0ZVRvb3QuYW5pbWF0aW9ucy5wbGF5KCdmYXJ0Jyk7XG4gICAgICAgICAgICB0aGlzLnNwcml0ZUJsYXN0LmFuaW1hdGlvbnMucGxheSgnZmFydCcpO1xuICAgICAgICAgICAgdGhpcy5ub3RpZnkoJ2ZhcnQnLCB7fSk7XG5cbiAgICAgICAgICAgIGlmICghdHJDb25maWcubXV0ZSAmJiAhdHJDb25maWcucGxheWVyLm11dGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNvdW5kRmFydC5wbGF5KCcnLCAwLCAxLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zcHJpdGVCbGFzdC5wb3NpdGlvbi54ID0gdGhpcy5zcHJpdGVUb290LnBvc2l0aW9uLnggLSA3MjtcbiAgICAgICAgdGhpcy5zcHJpdGVCbGFzdC5wb3NpdGlvbi55ID0gdGhpcy5zcHJpdGVUb290LnBvc2l0aW9uLnkgKyAzNDtcblxuICAgICAgICAvLyBub3RpZnkgb2JzZXJ2ZXJzLi4uXG4gICAgICAgIHRoaXMubm90aWZ5KCdwb3NpdGlvbicsIHtcbiAgICAgICAgICAgIHg6IHRoaXMuc3ByaXRlVG9vdC5wb3NpdGlvbi54LFxuICAgICAgICAgICAgeTogdGhpcy5zcHJpdGVUb290LnBvc2l0aW9uLnkgKyA0MFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kaXN0YW5jZSsrO1xuICAgICAgICB0aGlzLm5vdGlmeSgnZGlzdGFuY2UnLCB0aGlzLmRpc3RhbmNlKTtcblxuICAgICAgICBpZiAodHJDb25maWcuZGVidWcgJiYgdHJDb25maWcucGxheWVyLmRlYnVnKSB7XG4gICAgICAgICAgICB0aGlzLmNvbGxpc2lvbkdyb3VwLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBnYW1lLmRlYnVnLmJvZHkoY2hpbGQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRDb2xsaWRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbGxpc2lvbkdyb3VwO1xuICAgIH1cblxuICAgIGluV29ybGQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZVRvb3QuaW5Xb3JsZDtcbiAgICB9XG5cbiAgICBub3RpZnkoZXZlbnQsIGFyZykge1xuICAgICAgICB2YXIgY2FsbGJhY2tzID0gdGhpcy5vYnNlcnZlcnNbZXZlbnRdO1xuICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjYWxsYmFja3MuZm9yRWFjaChjYWxsYmFjayA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayhhcmcpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZWdpc3Rlck9ic2VydmVyKGV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub2JzZXJ2ZXJzW2V2ZW50XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzW2V2ZW50XSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzW2V2ZW50XS5wdXNoKGNhbGxiYWNrKTtcbiAgICB9XG59XG4iLCJcbmNsYXNzIENoYXJQcm9iZSB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy52ZWxvY2l0eSA9IDIwMDtcblxuICAgICAgICB0aGlzLnJvdE1heCA9IDAuMDU7XG4gICAgICAgIHRoaXMucm90SW5jID0gMC4wMDU7XG5cbiAgICAgICAgdGhpcy5jZW50ZXJZID0gMDtcbiAgICAgICAgdGhpcy55RGVsdGFNYXggPSAxMjU7XG4gICAgICAgIHRoaXMueURlbHRhSW5jID0gMjtcbiAgICB9XG5cbiAgICBjcmVhdGUoZ2FtZSkge1xuICAgICAgICB2YXIgdyA9IGdhbWUud29ybGQud2lkdGg7XG4gICAgICAgIHZhciBoID0gZ2FtZS53b3JsZC5oZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5jb2xsaXNpb25Hcm91cCA9IGdhbWUuYWRkLmdyb3VwKCk7XG4gICAgICAgIGdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKHRoaXMuY29sbGlzaW9uR3JvdXApO1xuICAgICAgICB0aGlzLmNvbGxpc2lvbkdyb3VwLmNoZWNrV29ybGRCb3VuZHMgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuc3ByaXRlUHJvYmUgPSB0aGlzLmNvbGxpc2lvbkdyb3VwLmNyZWF0ZSh3LCAxMjgsICdvYnMucHJvYmUnKTtcbiAgICAgICAgdGhpcy5zcHJpdGVQcm9iZS5zY2FsZS5zZXQoMC41LCAwLjUpO1xuICAgICAgICB0aGlzLnNwcml0ZVByb2JlLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgICAgIGdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKHRoaXMuc3ByaXRlUHJvYmUpO1xuICAgICAgICB0aGlzLnNwcml0ZVByb2JlLmJvZHkuYWxsb3dHcmF2aXR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3ByaXRlUHJvYmUuYm9keS5pbW1vdmFibGUgPSB0cnVlO1xuICAgIH1cblxuICAgIHVwZGF0ZShnYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLnNwcml0ZVByb2JlLnJvdGF0aW9uID49IHRoaXMucm90TWF4IHx8XG4gICAgICAgICAgICB0aGlzLnNwcml0ZVByb2JlLnJvdGF0aW9uIDw9ICh0aGlzLnJvdE1heCAqIC0xKSkge1xuICAgICAgICAgICAgdGhpcy5yb3RJbmMgPSB0aGlzLnJvdEluYyAqIC0xO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3ByaXRlUHJvYmUucm90YXRpb24gKz0gdGhpcy5yb3RJbmM7XG5cbiAgICAgICAgaWYgKHRoaXMuc3ByaXRlUHJvYmUucG9zaXRpb24ueSA+PSAodGhpcy5jZW50ZXJZICsgdGhpcy55RGVsdGFNYXgpIHx8XG4gICAgICAgICAgICB0aGlzLnNwcml0ZVByb2JlLnBvc2l0aW9uLnkgPD0gKHRoaXMuY2VudGVyWSAtIHRoaXMueURlbHRhTWF4KSkge1xuICAgICAgICAgICAgdGhpcy55RGVsdGFJbmMgPSB0aGlzLnlEZWx0YUluYyAqIC0xO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3ByaXRlUHJvYmUucG9zaXRpb24ueSArPSB0aGlzLnlEZWx0YUluYztcblxuICAgICAgICBpZiAodHJDb25maWcub2JzdGFjbGUuZGVidWcpIHtcbiAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uR3JvdXAuZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgICAgICAgICAgZ2FtZS5kZWJ1Zy5ib2R5KGNoaWxkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaW5Xb3JsZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlUHJvYmUuaW5Xb3JsZDtcbiAgICB9XG5cbiAgICBzdG9wKCkge1xuICAgIH1cblxuICAgIHJlc2V0KHgsIHkpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3Jlc2V0dGluZyBQcm9iZSB0byAnICsgeCArICcsICcgKyB5KTtcbiAgICAgICAgdGhpcy5jZW50ZXJZID0geTtcbiAgICAgICAgdGhpcy5jb2xsaXNpb25Hcm91cC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaXRlbS5yZXNldCh4LCB5KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29sbGlzaW9uR3JvdXAuc2V0QWxsKCdib2R5LnZlbG9jaXR5LngnLCB0aGlzLnZlbG9jaXR5ICogLTEpO1xuICAgIH1cblxuICAgIGdldENvbGxpZGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sbGlzaW9uR3JvdXA7XG4gICAgfVxufVxuIiwiY2xhc3MgQ2hhclNhdWNlciB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy52ZWxvY2l0eSA9IDMwMDtcbiAgICAgICAgdGhpcy5yb3RNYXggPSAwLjAyNTtcbiAgICAgICAgdGhpcy5yb3RJbmMgPSAwLjAwMjU7XG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcbiAgICAgICAgdmFyIHcgPSBnYW1lLndvcmxkLndpZHRoO1xuICAgICAgICB2YXIgaCA9IGdhbWUud29ybGQuaGVpZ2h0O1xuXG4gICAgICAgIHRoaXMuc291bmRVZm8gPSBnYW1lLmFkZC5hdWRpbygnb2JzLnNhdWNlci51Zm8nKTtcbiAgICAgICAgdGhpcy5zb3VuZFVmby5hbGxvd011bHRpcGxlID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5jb2xsaXNpb25Hcm91cCA9IGdhbWUuYWRkLmdyb3VwKCk7XG4gICAgICAgIGdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKHRoaXMuY29sbGlzaW9uR3JvdXApO1xuICAgICAgICAvL3RoaXMuY29sbGlzaW9uR3JvdXAuYm9keS5hbGxvd0dyYXZpdHkgPSBmYWxzZTtcbiAgICAgICAgLy90aGlzLmNvbGxpc2lvbkdyb3VwLmJvZHkuaW1tb3ZhYmxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jb2xsaXNpb25Hcm91cC5jaGVja1dvcmxkQm91bmRzID0gdHJ1ZTtcblxuICAgICAgICAvL3RoaXMuc3ByaXRlU2F1Y2VyID0gdGhpcy5nYW1lLmFkZC5zcHJpdGUodywgMTI4LCAnc2F1Y2VyJyk7XG4gICAgICAgIHRoaXMuc3ByaXRlU2F1Y2VyID0gdGhpcy5jb2xsaXNpb25Hcm91cC5jcmVhdGUodywgMTI4LCAnb2JzLnNhdWNlcicpO1xuICAgICAgICB0aGlzLnNwcml0ZVNhdWNlci5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICAgICAgICBnYW1lLnBoeXNpY3MuYXJjYWRlLmVuYWJsZSh0aGlzLnNwcml0ZVNhdWNlcik7XG4gICAgICAgIHRoaXMuc3ByaXRlU2F1Y2VyLmJvZHkuYWxsb3dHcmF2aXR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3ByaXRlU2F1Y2VyLmJvZHkuaW1tb3ZhYmxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zcHJpdGVTYXVjZXIuYm9keS5zZXRTaXplKDY0LCAyMCwgLTEwLCAtMzcpO1xuXG4gICAgICAgIC8vIEFkZGl0aW9uYWwgY29sbGlkZXIgYm94ZXMgdG8gbWF0Y2ggdGhlIHNoYXBlIG9mIHRoZSBzYXVjZXIgbW9yZSBjbG9zZWx5XG4gICAgICAgIHZhciBjMSA9IHRoaXMuY29sbGlzaW9uR3JvdXAuY3JlYXRlKHcsIDEyOCwgJycpO1xuICAgICAgICBjMS5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICAgICAgICBnYW1lLnBoeXNpY3MuYXJjYWRlLmVuYWJsZShjMSk7XG4gICAgICAgIGMxLmJvZHkuYWxsb3dHcmF2aXR5ID0gZmFsc2U7XG4gICAgICAgIGMxLmJvZHkuaW1tb3ZhYmxlID0gdHJ1ZTtcbiAgICAgICAgYzEuYm9keS5zZXRTaXplKDIwMCwgMjIsIC00LCAtMTYpO1xuXG4gICAgICAgIHZhciBjMiA9IHRoaXMuY29sbGlzaW9uR3JvdXAuY3JlYXRlKHcsIDEyOCwgJycpO1xuICAgICAgICBjMi5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICAgICAgICBnYW1lLnBoeXNpY3MuYXJjYWRlLmVuYWJsZShjMik7XG4gICAgICAgIGMyLmJvZHkuYWxsb3dHcmF2aXR5ID0gZmFsc2U7XG4gICAgICAgIGMyLmJvZHkuaW1tb3ZhYmxlID0gdHJ1ZTtcbiAgICAgICAgYzIuYm9keS5zZXRTaXplKDI3MCwgMzIsIC00LCAxMSk7XG5cbiAgICAgICAgdmFyIGMzID0gdGhpcy5jb2xsaXNpb25Hcm91cC5jcmVhdGUodywgMTI4LCAnJyk7XG4gICAgICAgIGMzLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgICAgIGdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKGMzKTtcbiAgICAgICAgYzMuYWxsb3dHcmF2aXR5ID0gZmFsc2U7XG4gICAgICAgIGMzLmJvZHkuaW1tb3ZhYmxlID0gdHJ1ZTtcbiAgICAgICAgYzMuYm9keS5zZXRTaXplKDIwMCwgMTYsIC00LCAzNSk7XG4gICAgfVxuXG4gICAgdXBkYXRlKGdhbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3ByaXRlU2F1Y2VyLnJvdGF0aW9uID49IHRoaXMucm90TWF4IHx8XG4gICAgICAgICAgICB0aGlzLnNwcml0ZVNhdWNlci5yb3RhdGlvbiA8PSAodGhpcy5yb3RNYXggKiAtMSkpIHtcbiAgICAgICAgICAgIHRoaXMucm90SW5jID0gdGhpcy5yb3RJbmMgKiAtMTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNwcml0ZVNhdWNlci5yb3RhdGlvbiArPSB0aGlzLnJvdEluYztcblxuICAgICAgICBpZiAodGhpcy5kZWJ1Zykge1xuICAgICAgICAgICAgdGhpcy5jb2xsaXNpb25Hcm91cC5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgZ2FtZS5kZWJ1Zy5ib2R5KGNoaWxkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5zb3VuZFVmby5zdG9wKCk7XG4gICAgfVxuXG4gICAgcmVzZXQoeCwgeSkge1xuICAgICAgICBjb25zb2xlLmxvZygncmVzZXR0aW5nIHNhdWNlciB0byAnICsgeCArICcsICcgKyB5KTtcbiAgICAgICAgdGhpcy5jb2xsaXNpb25Hcm91cC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaXRlbS5yZXNldCh4LCB5KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29sbGlzaW9uR3JvdXAuc2V0QWxsKCdib2R5LnZlbG9jaXR5LngnLCB0aGlzLnZlbG9jaXR5ICogLTEpO1xuXG4gICAgICAgIGlmICghdHJDb25maWcubXV0ZSAmJiAhdHJDb25maWcub2JzdGFjbGUubXV0ZSkge1xuICAgICAgICAgICAgdGhpcy5zb3VuZFVmby5wbGF5KCcnLCAwLCAxLCB0cnVlLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRDb2xsaWRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbGxpc2lvbkdyb3VwO1xuICAgIH1cblxuICAgIGluV29ybGQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZVNhdWNlci5pbldvcmxkO1xuICAgIH1cbn1cbiIsIlxuY2xhc3MgQ2hhcldvcm0ge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudmVsb2NpdHkgPSAxMDA7XG4gICAgICAgIHRoaXMueVBvcyA9IDA7XG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcbiAgICAgICAgdmFyIHcgPSBnYW1lLndvcmxkLndpZHRoO1xuICAgICAgICB2YXIgaCA9IGdhbWUud29ybGQuaGVpZ2h0O1xuICAgICAgICB0aGlzLnlQb3MgPSBoIC0gKDk3ICsgNDcpO1xuXG4gICAgICAgIHRoaXMuY29sbGlzaW9uR3JvdXAgPSBnYW1lLmFkZC5ncm91cCgpO1xuICAgICAgICBnYW1lLnBoeXNpY3MuYXJjYWRlLmVuYWJsZSh0aGlzLmNvbGxpc2lvbkdyb3VwKTtcbiAgICAgICAgdGhpcy5jb2xsaXNpb25Hcm91cC5jaGVja1dvcmxkQm91bmRzID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLnNwcml0ZVdvcm0gPSB0aGlzLmNvbGxpc2lvbkdyb3VwLmNyZWF0ZSh3LCA1MCwgJ29icy53b3JtJyk7XG4gICAgICAgIGdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKHRoaXMuc3ByaXRlV29ybSk7XG4gICAgICAgIHRoaXMuc3ByaXRlV29ybS5ib2R5LmFsbG93R3Jhdml0eSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNwcml0ZVdvcm0uYm9keS5pbW1vdmFibGUgPSB0cnVlO1xuICAgIH1cblxuICAgIHVwZGF0ZShnYW1lKSB7XG4gICAgfVxuXG4gICAgaW5Xb3JsZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlV29ybS5pbldvcmxkO1xuICAgIH1cblxuICAgIHN0b3AoKSB7XG4gICAgfVxuXG4gICAgcmVzZXQoeCwgeSkge1xuICAgICAgICBjb25zb2xlLmxvZygncmVzZXR0aW5nIHdvcm0gdG8gJyArIHgpO1xuICAgICAgICB2YXIgd29ybSA9IHRoaXM7XG4gICAgICAgIHRoaXMuY29sbGlzaW9uR3JvdXAuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIGl0ZW0ucmVzZXQoeCwgd29ybS55UG9zKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29sbGlzaW9uR3JvdXAuc2V0QWxsKCdib2R5LnZlbG9jaXR5LngnLCB0aGlzLnZlbG9jaXR5ICogLTEpO1xuICAgIH1cblxuICAgIGdldENvbGxpZGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sbGlzaW9uR3JvdXA7XG4gICAgfVxufVxuIiwiXG5jbGFzcyBFbnZCYWNrZ3JvdW5kIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgIH1cblxuICAgIGNyZWF0ZShnYW1lKSB7XG4gICAgICAgIHZhciB3ID0gZ2FtZS53b3JsZC53aWR0aDtcbiAgICAgICAgdmFyIGggPSBnYW1lLndvcmxkLmhlaWdodDtcbiAgICAgICAgdGhpcy5zcGFjZUJnID0gZ2FtZS5hZGQudGlsZVNwcml0ZSgwLCAwLCB3LCBoLCAnYmctc3BhY2UnKTtcbiAgICAgICAgdGhpcy5zdGFyc0xnID0gZ2FtZS5hZGQudGlsZVNwcml0ZSgwLCAwLCB3LCBoLCAnYmctc3RhcnMtbGFyZ2UnKTtcbiAgICAgICAgdGhpcy5zcGFjZURzID0gZ2FtZS5hZGQudGlsZVNwcml0ZSgwLCAwLCB3LCBoLCAnYmctc3RhcnMtZGVuc2UnKTtcbiAgICAgICAgdGhpcy5zdGFyc1NtID0gZ2FtZS5hZGQudGlsZVNwcml0ZSgwLCAwLCB3LCBoLCAnYmctc3RhcnMtc21hbGwnKTtcblxuICAgICAgICB0aGlzLmhvcml6b24gPSBnYW1lLmFkZC50aWxlU3ByaXRlKDAsIDE1NiwgdywgaCwgJ2JnLWhvcml6b24nKTtcbiAgICB9XG5cbiAgICB1cGRhdGUoZ2FtZSkge1xuICAgICAgICB0aGlzLnNwYWNlQmcudGlsZVBvc2l0aW9uLnggLT0gMC4wNzU7XG4gICAgICAgIHRoaXMuc3RhcnNMZy50aWxlUG9zaXRpb24ueCAtPSAwLjEwMDtcbiAgICAgICAgdGhpcy5zcGFjZURzLnRpbGVQb3NpdGlvbi54IC09IDAuMTI1O1xuICAgICAgICB0aGlzLnN0YXJzU20udGlsZVBvc2l0aW9uLnggLT0gMC4xNTA7XG5cbiAgICB9XG59XG4iLCJjbGFzcyBFbnZHcm91bmQge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcbiAgICAgICAgdmFyIHcgPSBnYW1lLndvcmxkLndpZHRoO1xuICAgICAgICB2YXIgaCA9IGdhbWUud29ybGQuaGVpZ2h0O1xuXG4gICAgICAgIHZhciB5UG9zID0gaCAtIDk3O1xuICAgICAgICB0aGlzLnNwcml0ZSA9IGdhbWUuYWRkLnRpbGVTcHJpdGUoMCwgeVBvcywgdywgaCwgJ2dyb3VuZCcpO1xuXG4gICAgICAgIGdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKHRoaXMuc3ByaXRlKTtcbiAgICAgICAgdGhpcy5zcHJpdGUuYm9keS5pbW1vdmFibGUgPSB0cnVlO1xuXG4gICAgICAgIC8vIGJ1ZyBpbiBwaGFzZXIgMi4zLjBcbiAgICAgICAgLy8gc2VlOiBodHRwOi8vd3d3Lmh0bWw1Z2FtZWRldnMuY29tL3RvcGljLzEzODU2LXByb2JsZW0td2l0aC1jb2xsaWRlLW1ldGhvZC1mcm9tLXBoeXNpY3MtYXJjYWRlLWluLWRpZmZlcmVudC12ZXJzaW9ucy1vZi1waGFzZXIvP3A9NzkwMzJcbiAgICAgICAgdGhpcy5zcHJpdGUucGh5c2ljc1R5cGUgPSBQaGFzZXIuU1BSSVRFO1xuICAgIH1cblxuICAgIHVwZGF0ZShnYW1lKSB7XG4gICAgICAgIHRoaXMuc3ByaXRlLnRpbGVQb3NpdGlvbi54IC09IDAuODU7XG4gICAgfVxuXG4gICAgZ2V0Q29sbGlkZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGU7XG4gICAgfVxufVxuIiwiY2xhc3MgRW52VmlnbmV0dGUge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcbiAgICAgICAgdmFyIHcgPSBnYW1lLndvcmxkLndpZHRoO1xuICAgICAgICB2YXIgaCA9IGdhbWUud29ybGQuaGVpZ2h0O1xuICAgICAgICB0aGlzLnYgPSBnYW1lLmFkZC5zcHJpdGUoMCwgMCwgJ3ZpZ25ldHRlJyk7XG4gICAgfVxuXG4gICAgdXBkYXRlKGdhbWUpIHtcbiAgICB9XG5cbn1cbiIsIi8qKlxuICogU2NyZWVuQm9vdFxuICpcbiAqIFRoaXMgaXMgdGhlIGxvZ28vbG9hZGluZyBzY3JlZW4gdGhhdCBzaG93cyB3aGVuIHRoZSBnYW1lIHN0YXJ0cyB1cC5cbiAqICAgICAgLSBTaG93IGNvbXBhbnkgbG9nb1xuICogICAgICAtIExvYWQgZ2FtZSBhc3NldHMgKGdyYXBoaWNzLCBzb3VuZHMsIGV0Yy4uLilcbiAqICAgICAgLSBTaG93IGxvYWRpbmcgcHJvZ3Jlc3NcbiAqICAgICAgLSBTZXQgbW9vZCBmb3IgZ2FtZVxuICpcbiAqL1xuY2xhc3MgU2NyZWVuQm9vdCB7XG5cbiAgICBwcmVsb2FkKGdhbWUpIHtcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBtb21lbnQoKTtcbiAgICAgICAgdGhpcy5pc0xvYWRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1pblRpbWUgPSBtb21lbnQoKS5hZGQoU2NyZWVuQm9vdC5NSU5fQk9PVF9USU1FLCAnc2Vjb25kcycpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdTY3JlZW5Cb290LnByZWxvYWQnKTtcbiAgICB9XG5cbiAgICBjcmVhdGUoZ2FtZSkge1xuICAgICAgICB2YXIgbG9hZFRpbWUgPSBtb21lbnQoKTtcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gbW9tZW50LnV0Yyhsb2FkVGltZS5kaWZmKHRoaXMuc3RhcnRUaW1lKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTY3JlZW5Cb290IGFzc2V0cyBsb2FkZWQgaW4gJyArIGR1cmF0aW9uLmZvcm1hdCgnSEg6bW06c3M6U1NTJykpO1xuICAgICAgICB0aGlzLmlzTG9hZGVkID0gdHJ1ZTtcblxuICAgICAgICB0ckNvbmZpZy5zZXR1cEdhbWUoZ2FtZSk7XG5cbiAgICAgICAgdmFyIHggPSBnYW1lLndvcmxkLmNlbnRlclg7XG4gICAgICAgIHZhciB5ID0gZ2FtZS53b3JsZC5jZW50ZXJZO1xuICAgICAgICB2YXIgbXNnID0gXCJNb3JwaFplcm8gcHJlc2VudHNcIjtcbiAgICAgICAgdmFyIHRleHQgPSBnYW1lLmFkZC50ZXh0KHgsIHksIG1zZywge1xuICAgICAgICAgICAgZm9udDogXCIzMnB4IEFyaWFsXCIsXG4gICAgICAgICAgICBmaWxsOiBcIiNkZGRkZDlcIixcbiAgICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiXG4gICAgICAgIH0pO1xuICAgICAgICB0ZXh0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgfVxuXG4gICAgdXBkYXRlKGdhbWUpIHtcbiAgICAgICAgdmFyIG5vdyA9IG1vbWVudCgpO1xuICAgICAgICBpZiAodGhpcy5pc0xvYWRlZCAmJiBub3cuaXNBZnRlcih0aGlzLm1pblRpbWUpKSB7XG4gICAgICAgICAgICBnYW1lLnN0YXRlLnN0YXJ0KCdtZW51Jyk7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuU2NyZWVuQm9vdC5NSU5fQk9PVF9USU1FID0gMS41OyAvLyBzZWNvbmRzXG4iLCIvKipcbiAqIFNjcmVlbkxvc3RcbiAqXG4gKiBHYW1lIE92ZXIgU2NyZWVuXG4gKi9cbmNsYXNzIFNjcmVlbkxvc3Qge1xuXG4gICAgcHJlbG9hZChnYW1lKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTY3JlZW5Mb3N0LnByZWxvYWQgc3RhcnQuLi4nKTtcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBtb21lbnQoKTtcbiAgICAgICAgdGhpcy5pc0xvYWRlZCA9IGZhbHNlO1xuXG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcbiAgICAgICAgdmFyIGxvYWRUaW1lID0gbW9tZW50KCk7XG4gICAgICAgIHZhciBkdXJhdGlvbiA9IG1vbWVudC51dGMobG9hZFRpbWUuZGlmZih0aGlzLnN0YXJ0VGltZSkpO1xuICAgICAgICBjb25zb2xlLmxvZygnU2NyZWVuTG9zdCBhc3NldHMgbG9hZGVkIGluICcgKyBkdXJhdGlvbi5mb3JtYXQoJ0hIOm1tOnNzOlNTUycpKTtcbiAgICAgICAgdGhpcy5pc0xvYWRlZCA9IHRydWU7XG5cbiAgICAgICAgdHJDb25maWcuc2V0dXBHYW1lKGdhbWUpO1xuXG4gICAgICAgIHZhciB4ID0gZ2FtZS53b3JsZC5jZW50ZXJYO1xuICAgICAgICB2YXIgeSA9IGdhbWUud29ybGQuY2VudGVyWTtcbiAgICAgICAgdmFyIG1zZyA9IFwiVHJ5IEFnYWluXCI7XG4gICAgICAgIHZhciB0ZXh0ID0gZ2FtZS5hZGQudGV4dCh4LCB5LCBtc2csIHtcbiAgICAgICAgICAgIGZvbnQ6IFwiMzJweCBBcmlhbFwiLFxuICAgICAgICAgICAgZmlsbDogXCIjZGRkZGQ5XCIsXG4gICAgICAgICAgICBhbGlnbjogXCJjZW50ZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgdGV4dC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuXG4gICAgICAgIGdhbWUuaW5wdXQub25Eb3duLmFkZE9uY2UoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBnYW1lLnN0YXRlLnN0YXJ0KCdwbGF5Jyk7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgIH1cbn1cbiIsIi8qKlxuICogU2NyZWVuTWVudVxuICpcbiAqIFRoaXMgaXMgdGhlIG1lbnUgc2NyZWVuLiBPcHRpb25zIGZvcjpcbiAqICAgICAgLSBTdGFydGluZyBhIGdhbWVcbiAqICAgICAgLSBBYm91dC9DcmVkaXRzIHBhZ2VcbiAqICAgICAgLSBTZXR0aW5ncyBwYWdlP1xuICpcbiAqL1xuY2xhc3MgU2NyZWVuTWVudSB7XG5cbiAgICBwcmVsb2FkKGdhbWUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1NjcmVlbk1lbnUucHJlbG9hZCBzdGFydC4uLicpO1xuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IG1vbWVudCgpO1xuICAgICAgICB0aGlzLmlzTG9hZGVkID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIHByZWxvYWRlciA9IG5ldyBVdGlsUHJlbG9hZGVyKCk7XG4gICAgICAgIHByZWxvYWRlci5wcmVsb2FkKGdhbWUpO1xuICAgIH1cblxuICAgIGNyZWF0ZShnYW1lKSB7XG4gICAgICAgIHZhciBsb2FkVGltZSA9IG1vbWVudCgpO1xuICAgICAgICB2YXIgZHVyYXRpb24gPSBtb21lbnQudXRjKGxvYWRUaW1lLmRpZmYodGhpcy5zdGFydFRpbWUpKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1NjcmVlbk1lbnUgYXNzZXRzIGxvYWRlZCBpbiAnICsgZHVyYXRpb24uZm9ybWF0KCdISDptbTpzczpTU1MnKSk7XG4gICAgICAgIHRoaXMuaXNMb2FkZWQgPSB0cnVlO1xuXG4gICAgICAgIHRyQ29uZmlnLnNldHVwR2FtZShnYW1lKTtcblxuICAgICAgICB2YXIgeCA9IGdhbWUud29ybGQuY2VudGVyWDtcbiAgICAgICAgdmFyIHkgPSBnYW1lLndvcmxkLmNlbnRlclk7XG4gICAgICAgIHZhciBtc2cgPSBcInBsYXlcIjtcbiAgICAgICAgdmFyIHRleHQgPSBnYW1lLmFkZC50ZXh0KHgsIHksIG1zZywge1xuICAgICAgICAgICAgZm9udDogXCIzMnB4IEFyaWFsXCIsXG4gICAgICAgICAgICBmaWxsOiBcIiNkZGRkZDlcIixcbiAgICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiXG4gICAgICAgIH0pO1xuICAgICAgICB0ZXh0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG5cbiAgICAgICAgZ2FtZS5pbnB1dC5vbkRvd24uYWRkT25jZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGdhbWUuc3RhdGUuc3RhcnQoJ3BsYXknKTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgfVxuXG4gICAgdXBkYXRlKGdhbWUpIHtcblxuICAgIH1cblxufVxuIiwiLyoqXG4gKiBTY3JlZW5QbGF5XG4gKlxuICogVGhpcyBpcyB0aGUgbWFpbiBwbGF5L2dhbWUgc2NyZWVuLlxuICpcbiAqL1xuY2xhc3MgU2NyZWVuUGxheSB7XG5cbiAgICBwcmVsb2FkKGdhbWUpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGdhbWUgb2JqZWN0cy4gT3JkZXIgaGVyZSBtYXR0ZXJzISBMYXllcmVkIEJhY2sgLT4gRnJvbnRcbiAgICAgICAgdGhpcy5vYmplY3RzID0gW107XG4gICAgICAgIHRoaXMub2JqZWN0cy5wdXNoKG5ldyBFbnZCYWNrZ3JvdW5kKCkpO1xuXG4gICAgICAgIC8vdGhpcy5ncm91bmQgPSBuZXcgRW52R3JvdW5kKCk7XG4gICAgICAgIC8vdGhpcy5vYmplY3RzLnB1c2godGhpcy5ncm91bmQpO1xuXG4gICAgICAgIHRoaXMucGxheWVyID0gbmV3IENoYXJQbGF5ZXIoKTtcbiAgICAgICAgdGhpcy5vYmplY3RzLnB1c2godGhpcy5wbGF5ZXIpO1xuXG4gICAgICAgIHZhciBvYnN0YWNsZXMgPSBuZXcgVXRpbE9ic3RhY2xlR2VuZXJhdG9yKCk7XG4gICAgICAgIHZhciB1aURpc3RhbmNlID0gbmV3IFVpRGlzdGFuY2UoKTtcbiAgICAgICAgdGhpcy5vYmplY3RzLnB1c2gob2JzdGFjbGVzKTtcbiAgICAgICAgdGhpcy5vYmplY3RzLnB1c2godWlEaXN0YW5jZSk7XG4gICAgICAgIHRoaXMucGxheWVyLnJlZ2lzdGVyT2JzZXJ2ZXIoXG4gICAgICAgICAgICAncG9zaXRpb24nLFxuICAgICAgICAgICAgZnVuY3Rpb24ocG9zKSB7XG4gICAgICAgICAgICAgICAgb2JzdGFjbGVzLnVwZGF0ZVBsYXllclBvc2l0aW9uKHBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIHRoaXMucGxheWVyLnJlZ2lzdGVyT2JzZXJ2ZXIoXG4gICAgICAgICAgICAnZGlzdGFuY2UnLFxuICAgICAgICAgICAgZnVuY3Rpb24oZGlzdGFuY2UpIHtcbiAgICAgICAgICAgICAgICBvYnN0YWNsZXMudXBkYXRlUGxheWVyRGlzdGFuY2UoZGlzdGFuY2UpO1xuICAgICAgICAgICAgICAgIHVpRGlzdGFuY2UudXBkYXRlUGxheWVyRGlzdGFuY2UoZGlzdGFuY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICB0aGlzLm9ic3RhY2xlcyA9IG9ic3RhY2xlcztcbiAgICAgICAgdGhpcy51aURpc3RhbmNlID0gdWlEaXN0YW5jZTtcblxuICAgICAgICB2YXIgcGxheVNjcmVlbiA9IHRoaXM7XG4gICAgICAgIHRoaXMucGxheWVyLnJlZ2lzdGVyT2JzZXJ2ZXIoXG4gICAgICAgICAgICAnZmFydCcsXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwbGF5U2NyZWVuLnNoYWtlTWFnbml0dWRlID0gdHJDb25maWcuc2hha2VNYWduaXR1ZGU7XG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IgJiYgd2luZG93Lm5hdmlnYXRvci52aWJyYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci52aWJyYXRlKHRyQ29uZmlnLnNoYWtlTWFnbml0dWRlICogMTApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm9iamVjdHMucHVzaChuZXcgRW52VmlnbmV0dGUoKSk7XG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcbiAgICAgICAgaWYgKHRyQ29uZmlnLmRlYnVnKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRzID0gbmV3IFN0YXRzKCk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuc3RhdHMuZG9tRWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnN0YXRzLmRvbUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgdGhpcy5zdGF0cy5kb21FbGVtZW50LnN0eWxlLnRvcCA9ICcwcHgnO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJDb25maWcuc2V0dXBHYW1lKGdhbWUpO1xuXG4gICAgICAgIC8vIGNyZWF0ZSgpXG4gICAgICAgIHRoaXMub2JqZWN0cy5mb3JFYWNoKG9iaiA9PiB7XG4gICAgICAgICAgICBvYmouY3JlYXRlKGdhbWUpO1xuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIHVwZGF0ZShnYW1lKSB7XG5cbiAgICAgICAgaWYgKHRyQ29uZmlnLmRlYnVnKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRzLmJlZ2luKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAvLyBwbGF5ZXIgdnMgZ3JvdW5kXG4gICAgICAgIC8vIGdhbWUucGh5c2ljcy5hcmNhZGUuY29sbGlkZShcbiAgICAgICAgLy8gICAgIHRoaXMucGxheWVyLmdldENvbGxpZGVycygpLFxuICAgICAgICAvLyAgICAgdGhpcy5ncm91bmQuZ2V0Q29sbGlkZXJzKClcbiAgICAgICAgLy8gKTtcbiAgICAgICAgLy8gcGxheWVyIHZzIG9ic3RhY2xlc1xuICAgICAgICBnYW1lLnBoeXNpY3MuYXJjYWRlLmNvbGxpZGUoXG4gICAgICAgICAgICB0aGlzLnBsYXllci5nZXRDb2xsaWRlcnMoKSxcbiAgICAgICAgICAgIHRoaXMub2JzdGFjbGVzLmdldENvbGxpZGVycygpLFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BsYXllciBjb2xsaXNpb24gZGV0ZWN0ZWQhJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lTG9zdChnYW1lKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgdGhpc1xuICAgICAgICApO1xuICAgICAgICBpZiAoIXRoaXMucGxheWVyLmluV29ybGQoKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1BsYXllciBvZmYgd29ybGQhJyk7XG4gICAgICAgICAgICB0aGlzLmdhbWVMb3N0KGdhbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdXBkYXRlIGFsbCBvYmplY3RzXG4gICAgICAgIHRoaXMub2JqZWN0cy5mb3JFYWNoKG9iaiA9PiB7XG4gICAgICAgICAgICBvYmoudXBkYXRlKGdhbWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnNoYWtlKGdhbWUpO1xuXG4gICAgICAgIGlmICh0ckNvbmZpZy5kZWJ1Zykge1xuICAgICAgICAgICAgdGhpcy5zdGF0cy5lbmQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNoYWtlKGdhbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuc2hha2VNYWduaXR1ZGUgPiAwKSB7XG4gICAgICAgICAgICB2YXIgcmFuZDEgPSBnYW1lLnJuZC5pbnRlZ2VySW5SYW5nZShcbiAgICAgICAgICAgICAgICB0aGlzLnNoYWtlTWFnbml0dWRlICogLTEsXG4gICAgICAgICAgICAgICAgdGhpcy5zaGFrZU1hZ25pdHVkZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHZhciByYW5kMiA9IGdhbWUucm5kLmludGVnZXJJblJhbmdlKFxuICAgICAgICAgICAgICAgIHRoaXMuc2hha2VNYWduaXR1ZGUgKiAtMSxcbiAgICAgICAgICAgICAgICB0aGlzLnNoYWtlTWFnbml0dWRlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZ2FtZS53b3JsZC5zZXRCb3VuZHMoXG4gICAgICAgICAgICAgICAgcmFuZDEsIHJhbmQyLFxuICAgICAgICAgICAgICAgIGdhbWUud2lkdGggKyByYW5kMSwgZ2FtZS5oZWlnaHQgKyByYW5kMlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuc2hha2VNYWduaXR1ZGUtLTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2hha2VNYWduaXR1ZGUgPD0gMCkge1xuICAgICAgICAgICAgICAgIGdhbWUud29ybGQuc2V0Qm91bmRzKDAsIDAsIGdhbWUud2lkdGgsZ2FtZS5oZWlnaHQpOyAvLyBub3JtYWxpemUgYWZ0ZXIgc2hha2U/XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnYW1lTG9zdChnYW1lKSB7XG4gICAgICAgIHRoaXMub2JqZWN0cy5mb3JFYWNoKG9iaiA9PiB7XG4gICAgICAgICAgICAvL29iai5zdG9wKGdhbWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgZ2FtZS5zdGF0ZS5zdGFydCgnbG9zdCcpO1xuICAgIH1cblxufVxuIiwiXG5jbGFzcyBHYW1lIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCctLSAtLSAtLSAtLSAgIFRvb3QgUmlwcGluZ3RvbiAtIEJsYXN0cyBPZmYhICAgLS0gLS0gLS0gLS0nKTtcblxuICAgICAgICB2YXIgcEdhbWUgPSBuZXcgUGhhc2VyLkdhbWUoXG4gICAgICAgICAgICAxMzM0LCA3NTAsXG4gICAgICAgICAgICBQaGFzZXIuQVVUTyxcbiAgICAgICAgICAgICcnXG4gICAgICAgICk7XG5cbiAgICAgICAgcEdhbWUuc3RhdGUuYWRkKCdib290JywgbmV3IFNjcmVlbkJvb3QoKSk7XG4gICAgICAgIHBHYW1lLnN0YXRlLmFkZCgnbWVudScsIG5ldyBTY3JlZW5NZW51KCkpO1xuICAgICAgICBwR2FtZS5zdGF0ZS5hZGQoJ3BsYXknLCBuZXcgU2NyZWVuUGxheSgpKTtcbiAgICAgICAgcEdhbWUuc3RhdGUuYWRkKCdsb3N0JywgbmV3IFNjcmVlbkxvc3QoKSk7XG5cbiAgICAgICAgdGhpcy5wR2FtZSA9IHBHYW1lO1xuICAgIH1cblxuICAgIHN0YXJ0KCkge1xuICAgICAgICAvL3RoaXMucEdhbWUuc3RhdGUuc3RhcnQoJ2Jvb3QnKTtcbiAgICAgICAgdGhpcy5wR2FtZS5zdGF0ZS5zdGFydCgnbWVudScpO1xuICAgIH1cbn1cbiIsImNsYXNzIFV0aWxPYnN0YWNsZUdlbmVyYXRvciB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wbGF5ZXJQb3NpdGlvblkgPSAwO1xuICAgICAgICB0aGlzLnBsYXllckRpc3RhbmNlID0gMDtcblxuICAgICAgICB0aGlzLm9ic3RhY2xlUG9vbCA9IHtcbiAgICAgICAgICAgICdzYXVjZXInOiBbXG4gICAgICAgICAgICAgICAgbmV3IENoYXJTYXVjZXIoKSxcbiAgICAgICAgICAgICAgICBuZXcgQ2hhclNhdWNlcigpLFxuICAgICAgICAgICAgICAgIG5ldyBDaGFyU2F1Y2VyKClcbiAgICAgICAgICAgIF0vKixcbiAgICAgICAgICAgICdwcm9iZSc6IFtcbiAgICAgICAgICAgICAgICBuZXcgQ2hhclByb2JlKCksXG4gICAgICAgICAgICAgICAgbmV3IENoYXJQcm9iZSgpLFxuICAgICAgICAgICAgICAgIG5ldyBDaGFyUHJvYmUoKVxuICAgICAgICAgICAgXSovXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY3JlYXRlKGdhbWUpIHtcbiAgICAgICAgdmFyIGdlbmVyYXRvciA9IHRoaXM7XG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMub2JzdGFjbGVQb29sKS5mb3JFYWNoKG9ic3RhY2xlVHlwZSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9ic3RhY2xlUG9vbFtvYnN0YWNsZVR5cGVdLmZvckVhY2gob2JzdGFjbGUgPT4ge1xuICAgICAgICAgICAgICAgIG9ic3RhY2xlLmNyZWF0ZShnYW1lKTtcbiAgICAgICAgICAgICAgICBnZW5lcmF0b3IucmVzZXRUbyhvYnN0YWNsZSwgLTIwMCwgLTIwMCk7XG4gICAgICAgICAgICAgICAgb2JzdGFjbGUuc3RvcCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWN0aXZlT2JzdGFjbGVzID0gW107XG4gICAgfVxuXG4gICAgdXBkYXRlKGdhbWUpIHtcbiAgICAgICAgdmFyIGluYWN0aXZlID0gW107XG4gICAgICAgIHZhciBsZW4gPSB0aGlzLmFjdGl2ZU9ic3RhY2xlcy5sZW5ndGg7XG4gICAgICAgIHZhciBpLCBvYnN0YWNsZTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBvYnN0YWNsZSA9IHRoaXMuYWN0aXZlT2JzdGFjbGVzW2ldO1xuICAgICAgICAgICAgb2JzdGFjbGUudXBkYXRlKGdhbWUpO1xuXG4gICAgICAgICAgICBpZiAoIW9ic3RhY2xlLmluV29ybGQoKSkge1xuICAgICAgICAgICAgICAgIG9ic3RhY2xlLnN0b3AoKTtcbiAgICAgICAgICAgICAgICBpbmFjdGl2ZS5wdXNoKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGVuID0gaW5hY3RpdmUubGVuZ3RoO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIC8vIHRha2UgaXQgb3V0IG9mIGFjdGl2ZU9ic3RhY2xlc1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVPYnN0YWNsZXMuc3BsaWNlKGluYWN0aXZlW2ldLCAxKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hZGROZXdPYnN0YWNsZXMoZ2FtZSk7XG4gICAgfVxuXG4gICAgYWRkTmV3T2JzdGFjbGVzKGdhbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlT2JzdGFjbGVzLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgb2JzdGFjbGUgPSB0aGlzLmdldFJhbmRvbU9ic3RhY2xlKCk7XG4gICAgICAgIHRoaXMucmVzZXQoZ2FtZSwgb2JzdGFjbGUpO1xuICAgICAgICB0aGlzLmFjdGl2ZU9ic3RhY2xlcy5wdXNoKG9ic3RhY2xlKTtcbiAgICB9XG5cbiAgICBnZXRSYW5kb21PYnN0YWNsZSgpIHtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLm9ic3RhY2xlUG9vbCk7XG4gICAgICAgIHZhciBudW1UeXBlcyA9IGtleXMubGVuZ3RoO1xuICAgICAgICB2YXIga2V5SWR4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbnVtVHlwZXMpO1xuICAgICAgICB2YXIga2V5ID0ga2V5c1trZXlJZHhdO1xuICAgICAgICB2YXIgcG9vbCA9IHRoaXMub2JzdGFjbGVQb29sW2tleV07XG4gICAgICAgIHJldHVybiBwb29sWzBdO1xuICAgIH1cblxuICAgIHJlc2V0KGdhbWUsIG9ic3RhY2xlKSB7XG4gICAgICAgIHZhciB4ID0gZ2FtZS53b3JsZC53aWR0aCAtIDEwMDtcbiAgICAgICAgdmFyIG1pbnkgPSA2NTtcbiAgICAgICAgdmFyIG1heHkgPSBnYW1lLndvcmxkLmhlaWdodCAtIDE2NTtcblxuICAgICAgICB2YXIgeSA9IHRoaXMucGxheWVyUG9zaXRpb25ZO1xuICAgICAgICBjb25zb2xlLmxvZygncGxheWVyUG9zaXRpb25ZOiAnICsgdGhpcy5wbGF5ZXJQb3NpdGlvblkpO1xuICAgICAgICBpZiAoeSA8IG1pbnkpIHtcbiAgICAgICAgICAgIHkgPSBtaW55O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHkgPiBtYXh5KSB7XG4gICAgICAgICAgICB5ID0gbWF4eTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVzZXRUbyhvYnN0YWNsZSwgeCwgeSk7XG4gICAgfVxuXG4gICAgcmVzZXRUbyhvYnN0YWNsZSwgeCwgeSkge1xuICAgICAgICBvYnN0YWNsZS5yZXNldCh4LCB5KTtcbiAgICB9XG5cbiAgICB1cGRhdGVQbGF5ZXJQb3NpdGlvbihwb3MpIHtcbiAgICAgICAgdGhpcy5wbGF5ZXJQb3NpdGlvblkgPSBwb3MueTtcbiAgICB9XG5cbiAgICB1cGRhdGVQbGF5ZXJEaXN0YW5jZShkaXN0YW5jZSkge1xuICAgICAgICB0aGlzLnBsYXllckRpc3RhbmNlID0gZGlzdGFuY2U7XG4gICAgfVxuXG4gICAgZ2V0Q29sbGlkZXJzKCkge1xuICAgICAgICB2YXIgY29sbGlkZXJzID0gW107XG4gICAgICAgIHRoaXMuYWN0aXZlT2JzdGFjbGVzLmZvckVhY2gob2JzdGFjbGUgPT4ge1xuICAgICAgICAgICAgY29sbGlkZXJzLnB1c2gob2JzdGFjbGUuZ2V0Q29sbGlkZXJzKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNvbGxpZGVycztcbiAgICB9XG59XG4iLCJjbGFzcyBVdGlsUHJlbG9hZGVyIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuXG4gICAgfVxuXG4gICAgcHJlbG9hZChnYW1lKSB7XG4gICAgICAgIHRoaXMubG9hZFNwcml0ZXMoZ2FtZSk7XG4gICAgICAgIHRoaXMubG9hZFNwcml0ZVNoZWV0cyhnYW1lKTtcbiAgICAgICAgdGhpcy5sb2FkQXVkaW8oZ2FtZSk7XG4gICAgfVxuXG4gICAgLy8gQXNzZXQgTG9hZGluZy4uLlxuICAgIGxvYWRTcHJpdGVzKGdhbWUpIHtcbiAgICAgICAgLy8gYmFja2dyb3VuZFxuICAgICAgICBnYW1lLmxvYWQuaW1hZ2UoJ2JnLXNwYWNlJywgJ2ltYWdlcy9iZy1zcGFjZS5qcGcnKTtcbiAgICAgICAgZ2FtZS5sb2FkLmltYWdlKCdiZy1zdGFycy1zbWFsbCcsICdpbWFnZXMvYmctc3RhcnMtc21hbGwucG5nJyk7XG4gICAgICAgIGdhbWUubG9hZC5pbWFnZSgnYmctc3RhcnMtZGVuc2UnLCAnaW1hZ2VzL2JnLXN0YXJzLXNtYWxsLWRlbnNlLnBuZycpO1xuICAgICAgICBnYW1lLmxvYWQuaW1hZ2UoJ2JnLXN0YXJzLWxhcmdlJywgJ2ltYWdlcy9iZy1zdGFycy1sYXJnZS5wbmcnKTtcbiAgICAgICAgZ2FtZS5sb2FkLmltYWdlKCdiZy1ob3Jpem9uJywgJ2ltYWdlcy9iZy1ob3Jpem9uLWdyYWRpZW50LnBuZycpO1xuICAgICAgICBnYW1lLmxvYWQuaW1hZ2UoJ2JnLW1vdW50YWlucy0wMScsICdpbWFnZXMvYmctbW91bnRhaW5zLTAxLnBuZycpO1xuICAgICAgICBnYW1lLmxvYWQuaW1hZ2UoJ2JnLW1vdW50YWlucy0wMicsICdpbWFnZXMvYmctbW91bnRhaW5zLTAyLnBuZycpO1xuICAgICAgICAvLyBncm91bmRcbiAgICAgICAgZ2FtZS5sb2FkLmltYWdlKCdncm91bmQnLCAnaW1hZ2VzL2dyb3VuZC5qcGcnKTtcbiAgICAgICAgZ2FtZS5sb2FkLmltYWdlKCd2aWduZXR0ZScsICdpbWFnZXMvdmlnbmV0dGUucG5nJyk7XG4gICAgfVxuXG4gICAgbG9hZFNwcml0ZVNoZWV0cyhnYW1lKSB7XG4gICAgICAgIC8vIHBsYXllclxuICAgICAgICBnYW1lLmxvYWQuc3ByaXRlc2hlZXQoJ3BsYXllci50b290JywgJ2ltYWdlcy90b290LXNwcml0ZXNoZWV0LnBuZycsIDY0LCA5Nik7XG4gICAgICAgIGdhbWUubG9hZC5zcHJpdGVzaGVldCgncGxheWVyLmJsYXN0JywgJ2ltYWdlcy9ibGFzdC1zcHJpdGVzaGVldC5wbmcnLCA2MCwgNjMpO1xuICAgICAgICAvLyBPYnN0YWNsZXNcbiAgICAgICAgZ2FtZS5sb2FkLnNwcml0ZXNoZWV0KCdvYnMuc2F1Y2VyJywgJ2ltYWdlcy9zYXVjZXItc3ByaXRlc2hlZXQucG5nJywgMjc2LCAxMDApO1xuICAgICAgICBnYW1lLmxvYWQuc3ByaXRlc2hlZXQoJ29icy5wcm9iZScsICdpbWFnZXMvcHJvYmUtc3ByaXRlc2hlZXQucG5nJywgMTI4LCAxMDcpO1xuICAgICAgICBnYW1lLmxvYWQuc3ByaXRlc2hlZXQoJ29icy53b3JtJywgJ2ltYWdlcy9tb29ud29ybS1zcHJpdGVzaGVldC5wbmcnLCAxMzMsIDUwKTtcblxuICAgIH1cblxuICAgIGxvYWRBdWRpbyhnYW1lKSB7XG4gICAgICAgIGdhbWUubG9hZC5hdWRpbygncGxheWVyLmZhcnQnLCAnc291bmRzL2ZhcnQtMDIud2F2Jyk7XG4gICAgICAgIGdhbWUubG9hZC5hdWRpbygnb2JzLnNhdWNlci51Zm8nLCAnc291bmRzL3Vmby0wMS53YXYnKTtcbiAgICB9XG59XG4iLCJjbGFzcyBVaURpc3RhbmNlIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnBsYXllckRpc3RhbmNlID0gMDtcbiAgICB9XG5cbiAgICBjcmVhdGUoZ2FtZSkge1xuICAgICAgICB2YXIgdyA9IGdhbWUud29ybGQud2lkdGg7XG4gICAgICAgIHRoaXMuZGlzcGxheSA9IGdhbWUuYWRkLnRleHQoMTYsIDE2LCAnRGlzdGFuY2U6IDAnLCB7XG4gICAgICAgICAgICBmb250U2l6ZTogJzI0cHgnLFxuICAgICAgICAgICAgZmlsbDogJyNmZmZmZWUnXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHVwZGF0ZShnYW1lKSB7XG4gICAgICAgIHRoaXMuZGlzcGxheS50ZXh0ID0gJ0Rpc3RhbmNlOiAnICsgTWF0aC5yb3VuZCh0aGlzLnBsYXllckRpc3RhbmNlIC8gMTApO1xuICAgIH1cblxuICAgIHVwZGF0ZVBsYXllckRpc3RhbmNlKGRpc3RhbmNlKSB7XG4gICAgICAgIHRoaXMucGxheWVyRGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=